/* Archivo: style.css (Updated for Listopic - v15.1 fixes) */

/* --- Variables de Color y Diseño --- */
:root {
    /* TEMA OSCURO REFINADO */
    --primary-bg: #121212;                     /* Negro profundo, estándar de apps modernas (Spotify, Netflix) */
    --container-bg: rgba(30, 30, 30, 0.7);     /* Contenedor casi negro, con efecto vidrio */
    --container-bg-secondary: rgba(40, 40, 40, 0.85); /* Un poco más claro para distinguir secciones */
    
    --text-color: #EAEAEA;                     /* Texto principal casi blanco para alto contraste */
    --secondary-text-color: rgba(234, 234, 234, 0.7); /* Texto secundario con menor opacidad */
    --title-color: #FFFFFF;                    /* Títulos en blanco puro */

    --accent-color-primary: #1DB954;           /* Verde Spotify: vibrante y reconocible */
    --accent-color-secondary: #f56ead;         /* Rosa neón para toques llamativos */
    --accent-color-tertiary: #06D6A0;           /* Menta brillante que ya usábamos */
    --accent-color-quaternary: #118AB2;         /* Azul digital que ya usábamos */
    --accent-color-quinary: #FFD166;           /* Amarillo/Oro para destacar */

    /* Valores RGB para usar en rgba() */
    --accent-color-primary-rgb: 29, 185, 84;
    --accent-color-secondary-rgb: 245,107,173;
    --accent-color-tertiary-rgb: 6,214,160;
    --accent-color-quaternary-rgb: 17,138,178;
    --danger-color-rgb: 217,83,79;

    --footer-bg: rgba(18, 18, 18, 0.6);
    --footer-text-color: rgba(255, 255, 255, 0.7);
    --footer-height: 50px;

    --border-color: rgba(255, 255, 255, 0.15);
    --border-color-light: rgba(255, 255, 255, 0.1);
    --input-bg: rgba(255, 255, 255, 0.08);
    --input-border: rgba(255, 255, 255, 0.2);
    --input-focus-border: var(--accent-color-primary);
    --main-button-text: #FFFFFF;               /* Texto blanco en botones de acento */
    --main-button-hover-bg: #1ED760;           /* Hover más brillante para el verde */
    --danger-color: #D9534F;
    --danger-hover-bg: #C9302C;
    --disabled-bg: #333;
    --disabled-text-color: #777;

    --border-radius-small: 4px;
    --border-radius-medium: 8px;
    --border-radius-large: 12px;

    --shadow-elevation-low: 0 2px 4px rgba(0,0,0,0.25);
    --shadow-elevation-medium: 0 6px 12px rgba(0,0,0,0.3);
    --shadow-elevation-high: 0 10px 20px rgba(0,0,0,0.35);
    
    --brand-font: 'Poppins', sans-serif;
    --primary-bg-rgb-values: 18, 18, 18; /* Para el nuevo fondo #121212 */
    --header-gradient-opacity-bottom: 0.6;
    --header-gradient-opacity-top: 0.05;
    --header-noise-opacity: 0.02;
    --header-height: 50px;
}

/* --- TEMA CLARO REFINADO --- */
body.light-theme {
    --primary-bg: #FFFFFF;                     /* Fondo blanco puro. ¡Más claro imposible! */
    --container-bg: rgba(245, 245, 247, 0.7);  /* Contenedores de un gris casi imperceptible */
    --container-bg-secondary: #F5F5F7;         /* Un gris muy claro para secciones secundarias */

    --text-color: #1d1d1f;                     /* Texto negro (estilo Apple) para máxima legibilidad */
    --secondary-text-color: rgba(29, 29, 31, 0.7);
    --title-color: #000000;                    /* Títulos en negro puro */

    /* Colores de acento ajustados para el tema claro, con más saturación */
    --accent-color-primary: #007AFF;           /* Azul Apple: profesional y vibrante */
    --accent-color-secondary: #E53935;
    --accent-color-tertiary: #34C759;          /* Verde Apple */
    --accent-color-quaternary: #5856D6;          /* Púrpura Apple */
    --accent-color-quinary: #FF9500;           /* Naranja Apple */

    --footer-bg: rgba(255, 255, 255, 0.7);
    --footer-text-color: #555B66;

    --input-bg: #F5F5F7;
    --input-border: #D1D1D6;
    --input-focus-border: var(--accent-color-primary);
    --main-button-text: #FFFFFF;
    --main-button-hover-bg: #0056b3;           /* Azul más oscuro para hover */
    
    --icon-placeholder-bg: rgba(0, 0, 0, 0.06);
    --icon-placeholder-color: var(--accent-color-primary);

    --primary-bg-rgb-values: 255, 255, 255;
    --header-noise-opacity: 0.01;
}



/* --- App Logo --- */
.app-logo-container {
    position: fixed; /* Se mantiene fijo en la pantalla al hacer scroll */
    top: 15px;
    left: 15px;
    z-index: 1002; /* Para asegurar que esté por encima de la mayoría del contenido, similar al botón de tema */
}

.app-logo {
    height: 70px; /* Ajusta esta altura según el tamaño deseado para tu logo */
    width: auto;  /* Mantiene la proporción */
    display: block; /* Evita espacio extra debajo de la imagen si es inline */
    transition: transform 0.2s ease-in-out, height 0.3s ease; /* Added height transition */
}
.app-logo:hover {
    transform: scale(1.05); /* Un ligero zoom al pasar el ratón */
}
/* Ya no se necesita una segunda definición de :root */

/* Decorative corner blobs (Simplified with CSS)
body::before, body::after {
    content: '';
    position: fixed;
    border-radius: 50%;
    opacity: 0.5;
    z-index: -1; 
    filter: blur(50px); 
}

body::before { 
    width: clamp(200px, 30vw, 400px);
    height: clamp(200px, 30vw, 400px);
    background-color: var(--accent-color-tertiary); 
    top: -10%;
    left: -10%;
    transform: rotate(30deg);
    animation: slowDrift 20s infinite alternate ease-in-out;
}

body::after { 
    width: clamp(250px, 35vw, 450px);
    height: clamp(250px, 35vw, 450px);
    background-color: var(--accent-color-secondary); 
    bottom: -12%;
    right: -12%;
    transform: rotate(-25deg);
    animation: slowDriftReverse 25s infinite alternate ease-in-out;
} */

@keyframes slowDrift {
    0% { transform: translate(0,0) rotate(30deg) scale(1); }
    100% { transform: translate(20px, -15px) rotate(40deg) scale(1.1); }
}
@keyframes slowDriftReverse {
    0% { transform: translate(0,0) rotate(-25deg) scale(1); }
    100% { transform: translate(-18px, 12px) rotate(-35deg) scale(1.08); }
}


/* --- Estilos Generales del Cuerpo --- */
body {
    font-family: 'Poppins', sans-serif;
    color: var(--text-color);
    background-color: var(--primary-bg); /* ¡Aquí está la magia! Usamos un color sólido */
    background-attachment: fixed; /* Se mantiene para evitar repeticiones raras */
    margin: 0;
    padding: 20px 20px calc(var(--footer-height) + 20px) 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    box-sizing: border-box;
    line-height: 1.6;
    font-weight: 300;
    overflow-x: hidden; 
    padding-top: var(--header-height);
    transition: background-color 0.3s ease, color 0.3s ease;
}

/* --- Título Principal "Listopic" --- */
h1.brand-title { 
    font-family: var(--brand-font);
    font-weight: 700; 
    color: var(--title-color);
    margin-top: 10;
    margin-bottom: 15px; 
    font-size: clamp(3em, 8vw, 4.5em); 
    letter-spacing: 1.5px;
    text-shadow: 2px 2px 5px rgba(0,0,0,0.3);
    text-align: center;
    animation: fadeInUpScale 0.8s ease-out 0.2s backwards;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Estilos para los pétalos del logo */
.logo-petal {
    display: inline-block;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background-color: var(--accent-color-primary);
    position: relative;
    margin: 0 2px;
    opacity: 0.7;
    animation: float 1s ease-in-out infinite;
}

.logo-petal.p1 { animation-delay: 0s; background-color: var(--accent-color-primary); }
.logo-petal.p2 { animation-delay: 0.2s; background-color: var(--accent-color-secondary); }
.logo-petal.p3 { animation-delay: 0.4s; background-color: var(--accent-color-tertiary); }
.logo-petal.p4 { animation-delay: 0.6s; background-color: var(--accent-color-quaternary); }
.logo-petal.p5 { animation-delay: 0.8s; background-color: var(--accent-color-quinary); }

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

.logo-petal.p1 { transform: rotate(-60deg) translateY(-0.1em); }
.logo-petal.p2 { transform: rotate(-30deg) translateY(-0.05em); }
.logo-petal.p3 { transform: rotate(0deg); }
.logo-petal.p4 { transform: rotate(30deg) translateY(-0.05em); }
.logo-petal.p5 { transform: rotate(60deg) translateY(-0.1em); }


h1:not(.brand-title), .container h2 { 
    font-family: 'Cormorant Garamond', serif; 
    color: var(--title-color); 
    margin-top: 0; margin-bottom: 25px; 
    font-size: clamp(2.2em, 6vw, 3em); 
    font-weight: 600; letter-spacing: 1px; 
    text-shadow: 1px 1px 4px rgba(0,0,0,0.2); 
    text-align: center; 
    animation: fadeInUpScale 0.8s ease-out 0.2s backwards; 
}
.container h2 { margin-bottom: 30px; }


/* --- Estructura Principal --- */
main { width: 100%; display: flex; flex-direction: column; align-items: center; padding-top: 10px; flex-grow: 1; } /* Reducido padding-top */

.container { 
    /* El .container ahora es solo un limitador de ancho invisible y un agrupador lógico */
    /* Todas las propiedades visuales de "marco" deben estar comentadas o eliminadas */
    /* background-color: var(--container-bg); */ 
    /* padding: clamp(25px, 4vw, 40px) clamp(20px, 5vw, 50px); */
    /* border-radius: 20px; */
    /* border: 1px solid rgba(255, 255, 255, 0.15); */ /* Eliminado/Comentado */
    /* box-shadow: 0 15px 40px rgba(0, 0, 0, 0.35); */ /* Eliminado/Comentado */
    /* backdrop-filter: blur(10px); */ /* Eliminado/Comentado */
    /* -webkit-backdrop-filter: blur(10px); */ /* Eliminado/Comentado */

    max-width: 900px; 
    width: 95%; 
    text-align: center; 
    margin: 0 auto 30px auto; /* Centrado horizontal y margen inferior */
}

/* === ESTILOS PARA LA PÁGINA PRINCIPAL (index.html) === */
.list-collection-container { margin-top: 20px; }
.list-collection-container h2 { font-size: clamp(1.8em, 5vw, 2.5em); margin-bottom: 20px; }
#list-circles-ul { list-style: none; padding: 0; margin: 0 0 30px 0; display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; }
#list-circles-ul li { min-width: 150px; }
#list-circles-ul a { display: flex; flex-direction: column; align-items: center; justify-content: center; width: 130px; height: 130px; padding: 15px; border-radius: 50%; background-color: rgba(255, 255, 255, 0.08); border: 1px solid var(--border-color); color: var(--text-color); text-decoration: none; transition: transform 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
#list-circles-ul a i { font-size: 2.5em; margin-bottom: 10px; color: var(--accent-color-primary); }
#list-circles-ul a span { font-size: 0.9em; text-align: center; font-weight: 400; display: block; max-width: 100%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
#list-circles-ul a:hover { transform: translateY(-5px) scale(1.05); background-color: rgba(255, 255, 255, 0.15); box-shadow: 0 8px 20px rgba(var(--accent-color-primary-rgb), 0.3); }
.add-list-button { display: inline-flex; align-items: center; padding: 12px 25px; background-color: transparent; border: 2px dashed var(--accent-color-primary); color: var(--text-color); text-decoration: none; border-radius: 8px; font-size: 1em; font-weight: 400; transition: all 0.3s ease; cursor: pointer; }
.add-list-button i { margin-right: 10px; font-size: 1.2em; color: var(--accent-color-primary); transition: color 0.3s ease; }
.add-list-button:hover { background-color: rgba(var(--accent-color-primary-rgb), 0.1); border-style: solid; border-color: var(--accent-color-primary); color: var(--accent-color-primary); }
.add-list-button:hover i { color: var(--accent-color-primary); }


/* --- Footer --- */
footer { position: fixed; bottom: 0; left: 0; width: 100%; background-color: var(--footer-bg); color: var(--footer-text-color); text-align: center; padding: 15px 0; font-size: 0.9em; height: var(--footer-height); z-index: 100; box-sizing: border-box; backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px);}

/* --- Animations --- */
@keyframes fadeInUpScale { from { opacity: 0; transform: translateY(20px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }


/* Ajustes para elementos movidos fuera del .container en list-view.html */
main > .table-container {
    width: 100%;
    max-width: 1300px;
    margin-left: auto; margin-right: auto;
    margin-top: 2px;
    margin-bottom: 20px;
    box-sizing: border-box;
}


/* --- GENERAL FORM STYLES --- */

.form-container { max-width: 700px; }
.form-group { margin-bottom: 20px; text-align: left; }
.form-group label { display: block; margin-bottom: 8px; font-weight: 400; }
.form-input, .form-textarea, .form-input[type=search], select.form-input { width: 100%; padding: 12px 15px; background-color: var(--input-bg); border: 1px solid var(--input-border); border-radius: 6px; color: var(--text-color); font-family: 'Poppins', sans-serif; font-size: 1em; box-sizing: border-box; transition: border-color 0.3s ease, box-shadow 0.3s ease; }
.form-input:focus, .form-textarea:focus, select.form-input:focus { outline: none; border-color: var(--input-focus-border); box-shadow: 0 0 0 3px rgba(var(--accent-color-primary-rgb), 0.3); }
.form-textarea { min-height: 100px; resize: vertical; }
.form-input::placeholder, .form-textarea::placeholder { color: var(--secondary-text-color); opacity: 0.8; }
.form-divider { border: 0; height: 1px; background-color: var(--border-color); margin: 30px 0; }
.form-actions { text-align: right; margin-top: 30px; }

/* Buttons */
.button, button, input[type="submit"], input[type="button"], .add-review-button, .submit-button, .edit-button, .delete-button, .add-button, .list-action-button { padding: 10px 20px; border-radius: 6px; border: none; cursor: pointer; font-family: 'Poppins', sans-serif; font-weight: 600; font-size: 1em; text-decoration: none; display: inline-block; text-align: center; transition: background-color 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease; }
.button:active, button:active, input[type="submit"]:active, input[type="button"]:active { transform: translateY(1px); }

.submit-button, .add-review-button, .primary-button { background-color: var(--accent-color-primary); color: var(--main-button-text); }
.primary-button:hover, .submit-button:hover, .add-review-button:hover { background-color: var(--main-button-hover-bg); box-shadow: 0 4px 15px rgba(var(--accent-color-primary-rgb), 0.3); }

.secondary-button { background-color: var(--accent-color-quaternary); color: white; }
.secondary-button:hover { background-color: #1a75cf; box-shadow: 0 4px 15px rgba(var(--accent-color-quaternary-rgb), 0.3); }

.edit-button { background-color: var(--accent-color-tertiary); color: var(--main-button-text); }
.edit-button:hover { background-color: #00cf6b; box-shadow: 0 4px 15px rgba(var(--accent-color-tertiary-rgb), 0.3); }
.delete-button.danger, .delete-list-button.danger, .remove-button.danger { background-color: var(--danger-color); color: white; }
.delete-button.danger:hover, .delete-list-button.danger:hover, .remove-button.danger:hover { background-color: var(--danger-hover-bg); box-shadow: 0 4px 15px rgba(var(--danger-color-rgb), 0.3); }
.add-button { background-color: var(--accent-color-quaternary); color: white; margin-top: 10px; }
.add-button:hover { background-color: #1a75cf; }
.back-button { display: inline-block; margin-bottom: 2px; color: var(--accent-color-primary); text-decoration: none; font-weight: 400; transition: color 0.2s ease; }
.back-button:hover { color: var(--main-button-hover-bg); }
#add-tag-btn { width: 100%; box-sizing: border-box; }

/* LIST-FORM: Criteria & Tags */
.criteria-group, .tags-group { border: 1px solid rgba(255,255,255,0.2); padding: 20px; border-radius: 8px; margin-bottom: 20px; }
.criteria-group legend, .tags-group legend { padding: 0 10px; color: var(--accent-color-secondary); font-weight: 600; }
/* --- Estilos para LIST-FORM: Criterios (Actualizado) --- */
.criterion-item {
    display: flex;
    flex-direction: column; /* Para apilar los inputs principales y luego las opciones */
    gap: 15px; /* Espacio entre las secciones internas del criterio */
    background-color: rgba(var(--text-color-rgb, 224, 224, 224), 0.05); /* Fondo muy sutil */
    padding: 15px;
    border: 1px solid var(--border-color-light);
    border-radius: var(--border-radius-medium);
    margin-bottom: 20px; /* Más espacio entre criterios */
}

.criterion-main-input {
    display: flex;
    flex-direction: column; /* Label encima del input */
}
.criterion-main-input label {
    margin-bottom: 5px;
    font-weight: 500; /* Hacer el nombre del criterio un poco más destacado */
}
.criterion-main-input input.criterion-input { /* El input para el nombre/label del criterio */
    width: 100%; /* Ocupar todo el ancho */
}

.criterion-slider-config {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); /* Layout responsive para los campos de config */
    gap: 10px 15px; /* Espacio vertical y horizontal */
    border-top: 1px solid var(--border-color-light);
    border-bottom: 1px solid var(--border-color-light);
    padding: 15px 0;
}
.criterion-slider-config > div { /* Cada cajita de label + input */
    display: flex;
    flex-direction: column;
}
.criterion-slider-config label {
    font-size: 0.85em;
    color: var(--secondary-text-color);
    margin-bottom: 4px;
}
.criterion-input-small, .criterion-input-xtra-small {
    width: 100%; /* Que ocupen el ancho de su celda en el grid */
    font-size: 0.9em; /* Un poco más pequeños */
}

.criterion-options {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 5px;
}
.criterion-main-input, .criterion-slider-config, .criterion-options {
    display: flex;
    flex-wrap: wrap; /* Permitir que los elementos internos se envuelvan */
    gap: 10px; /* Espacio entre elementos internos */
    align-items: center; /* Alinear verticalmente si hay diferentes alturas */
}

.criterion-weighted-label {
    font-size: 0.95em;
    display: flex;
    align-items: center;
    gap: 8px;
}
.criterion-weighted-label input[type="checkbox"] { /* Estilos del checkbox de ponderación */
    width: 16px;
    height: 16px;
    accent-color: var(--accent-color-primary);
}

/* En style.css (puedes añadirlo en la sección de formularios o etiquetas) */

.fixed-tags-group {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 15px;
}
.form-divider-light {
    border: none;
    height: 1px;
    background-color: var(--border-color-light, rgba(255, 255, 255, 0.1));
    margin: 20px 0;
}
.tag-checkbox input[type="checkbox"] {
    display: none; /* Ocultamos el checkbox por defecto */
}
.tag-checkbox span {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 15px;
    background-color: var(--input-bg);
    color: var(--secondary-text-color);
    border-radius: 20px;
    cursor: pointer;
    border: 1px solid var(--border-color-light);
    transition: all 0.2s ease;
}
.tag-checkbox span i {
    opacity: 0.7;
}
/* Estilo cuando el checkbox está seleccionado */
.tag-checkbox input[type="checkbox"]:checked + span {
    background-color: var(--accent-color-primary);
    color: #0A1931; /* Un color oscuro para el texto */
    border-color: var(--accent-color-primary);
    font-weight: 600;
}
.tag-checkbox input[type="checkbox"]:checked + span i {
    opacity: 1;
}

/* Light theme adjustments para criterios */
body.light-theme .criterion-item {
    background-color: rgba(0,0,0,0.02);
    border-color: rgba(0,0,0,0.1);
}
body.light-theme .criterion-slider-config {
    border-top-color: rgba(0,0,0,0.08);
    border-bottom-color: rgba(0,0,0,0.08);
}

.tag-item { display: flex; gap: 10px; align-items: center; margin-bottom: 10px; background-color: rgba(0,0,0,0.1); padding: 10px; border-radius: 5px; }
.tag-item input { flex-grow: 1; }
.remove-button { padding: 5px 10px; font-size: 1.2em; line-height: 1; }

/* REVIEW-FORM: Image Upload */
.image-upload-area { border: 2px dashed var(--input-border); border-radius: 8px; padding: 20px; text-align: center; cursor: pointer; transition: border-color 0.3s ease, background-color 0.3s ease; }
.image-upload-area.drag-over { border-style: solid; border-color: var(--accent-color-primary); background-color: rgba(var(--accent-color-primary-rgb, 255,209,102), 0.05); }
.upload-instructions i { font-size: 3em; color: var(--accent-color-primary); margin-bottom: 10px; }
.upload-instructions p { margin: 5px 0; font-size: 0.9em; }
.file-input-hidden { display: none; }
.image-upload-area .url-input { margin-top: 5px; }
.image-preview img { max-width: 100%; max-height: 200px; margin-top: 15px; border-radius: 6px; border: 1px solid var(--input-border); }
#image-actions button { background-color: var(--accent-color-secondary); color: white; border: none; padding: 8px 12px; margin: 5px; border-radius: 5px; cursor: pointer; font-size: 0.9em; }
#image-actions button:hover { opacity: 0.9; }

/* REVIEW-FORM: Tag Selection (Checkboxes) */
.tag-selection { display: flex; flex-wrap: wrap; gap: 10px; padding-top: 5px; }
.tag-checkbox { background-color: rgba(255,255,255,0.1); padding: 8px 12px; border-radius: 15px; border: 1px solid transparent; cursor: pointer; transition: background-color 0.2s, border-color 0.2s, color 0.2s; font-size: 0.9em; display: inline-flex; align-items: center; color: var(--text-color); }
.tag-checkbox:hover { background-color: rgba(255,255,255,0.2); }
.tag-checkbox input[type="checkbox"] { appearance: none; -webkit-appearance: none; -moz-appearance: none; margin-right: 8px; width: 16px; height: 16px; border: 1px solid var(--input-border); border-radius: 3px; background-color: var(--input-bg); cursor: pointer; position: relative; vertical-align: middle; outline: none; flex-shrink: 0; transition: background-color 0.2s, border-color 0.2s; }
.tag-checkbox input[type="checkbox"]:checked { background-color: var(--accent-color-primary); border-color: var(--accent-color-primary); }
.tag-checkbox input[type="checkbox"]:checked::before { content: '✔'; font-size: 12px; font-weight: bold; color: var(--primary-bg); position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); line-height: 1; }
.tag-checkbox.selected { background-color: var(--accent-color-primary); color: var(--primary-bg); border-color: var(--accent-color-primary); font-weight: 500; }
.tag-checkbox.selected input[type="checkbox"] { border-color: var(--primary-bg); }

/* REVIEW-FORM: Restaurant Suggestions */
.suggestions-box { border: 1px solid var(--input-border); border-top: none; border-radius: 0 0 6px 6px; background-color: var(--primary-bg); max-height: 200px; overflow-y: auto; }
.suggestions-box ul { list-style: none; padding: 0; margin: 0; }
.suggestions-box li { padding: 10px 15px; cursor: pointer; border-bottom: 1px solid var(--input-border); text-align: left; }
.suggestions-box li:last-child { border-bottom: none; }
.suggestions-box li:hover { background-color: var(--input-bg); }
.suggestions-box p { padding: 10px 15px; font-style: italic; opacity: 0.7; }

/* REVIEW-FORM: Botón Obtener Dirección Actual y contenedor de campos manuales */
#get-current-address-btn {
    padding: 8px 12px !important; /* Usar !important con precaución, solo si es necesario para sobrescribir .button */
    font-size: 0.9em !important;
    flex-shrink: 0;
    line-height: 1.2; /* Ajustar para el icono */
}

.input-with-button-beside {
    display: flex;
    gap: 8px;
    align-items: center;
}
.input-with-button-beside .form-input {
    flex-grow: 1;
}
.input-with-button-beside .button { /* El botón al lado */
    flex-shrink: 0;
}

#manual-location-fields {
    display: none; /* Controlado con JS */
    border: 1px solid var(--border-color-light);
    padding: 20px;
    border-radius: var(--border-radius-medium);
    margin-top: 10px;
    background-color: rgba(var(--text-color-rgb, 224, 224, 224), 0.03);
}
#manual-location-fields label { margin-top: 10px; font-size: 0.9em; }
#manual-location-fields input.form-input { margin-bottom: 5px; }

/* Styles for criteria sliders in forms */
.slider-group { margin-bottom: 20px; text-align: left; }
.slider-group label { display: block; margin-bottom: 8px; font-weight: 400; }
.slider-value-display { display: inline-block; min-width: 35px; margin-left: 10px; font-weight: 600; color: var(--accent-color-primary); background-color: rgba(0,0,0,0.2); padding: 3px 8px; border-radius: 4px; font-size: 0.9em; text-align: center; }
.rating-slider { width: 100%; margin: 8px 0; accent-color: var(--accent-color-secondary); cursor: pointer; }
.rating-slider::-webkit-slider-thumb { background: var(--accent-color-secondary); border-radius: 50%; padding:2px; }
.rating-slider::-moz-range-thumb { background: var(--accent-color-secondary); border-radius: 50%; border:none; height: 16px; width: 16px; }
.slider-range-labels { display: flex; justify-content: space-between; font-size: 0.8em; color: rgba(255,255,255,0.6); padding: 0 2px; }

/* LIST-VIEW: Table & Filters */
.list-header-actions { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap:15px; margin-bottom: 3px; } /* Reducido margin-bottom */
.list-header-actions h2 { margin-bottom: 0;margin-top: 40px; text-align: left; }
.list-actions { display: flex; gap: 5px; }
.list-action-button { font-size: 0.9em; padding: 8px 15px; }
.list-action-button i { margin-right: 6px; }

.add-review-button.submit-button{
    width: 100%;
    right: 0;
    margin-left: 20px
}
.search-filter-container { width: 100%; margin-bottom: 10px; display: flex; justify-content: left; }
.search-input { width: 100%; max-width: 400px; padding: 8px 15px; background-color: var(--input-bg); border: 1px solid var(--input-border); border-radius: 6px; color: var(--text-color); font-size: 1em; }
.search-input:focus { outline: none; border-color: var(--input-focus-border); }
.tag-filter-container { margin-bottom: 0px; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }

/* Botones de filtro unificados - Estilo mejorado */
.tag-filter-button {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.6rem 1.2rem;
    margin: 0.25rem;
    border: 2px solid var(--border-color);
    background: var(--background-primary);
    color: var(--text-secondary);
    border-radius: 25px;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    position: relative;
    overflow: hidden;
}

.tag-filter-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s;
}

.tag-filter-button:hover::before {
    left: 100%;
}

.tag-filter-button:hover {
    border-color: var(--accent-color-primary);
    background: rgba(var(--accent-color-primary-rgb), 0.1);
    color: var(--accent-color-primary);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(var(--accent-color-primary-rgb), 0.2);
}

.tag-filter-button.active,
.tag-filter-button.selected {
    border-color: var(--accent-color-primary);
    background: var(--accent-color-primary);
    color: white;
    font-weight: 600;
    box-shadow: 0 4px 15px rgba(var(--accent-color-primary-rgb), 0.4);
    transform: translateY(-1px);
}

.tag-filter-button.active::before,
.tag-filter-button.selected::before {
    display: none;
}

.tag-filter-button i {
    font-size: 0.85rem;
    transition: transform 0.3s ease;
}

.tag-filter-button:hover i {
    transform: scale(1.1);
}

.tag-filter-button.active i,
.tag-filter-button.selected i {
    transform: scale(1.05);
}
.tag-filter-button { background-color: rgba(255,255,255,0.1); color: var(--text-color); padding: 3px 15px; border-radius: 20px; font-size: 0.9em; transition: background-color 0.2s, color 0.2s; }
.tag-filter-button:hover { background-color: rgba(255,255,255,0.2); }
.tag-filter-button.selected { background-color: var(--accent-color-secondary); color: white; font-weight: 600; }

.table-container { 
    overflow-x: auto; 
    border-radius: 12px; /* Redondeo para el contenedor */
    overflow: hidden; /* Importante para que el border-radius afecte a la tabla interna */
    /* Sombra y borde para tema oscuro se manejan por defecto, tema claro tiene su propio borde */
    box-shadow: 0 8px 20px rgba(0,0,0,0.15); /* Sombra sutil para ambos temas */
    /* margin-bottom ya está en main > .table-container */
} 

.ranking-table { 
    width: 100%; 
    border-collapse: collapse; 
    table-layout: fixed; /* MUY IMPORTANTE para anchos de columna predecibles */
    font-size: 0.95em; 
    /* margin-bottom: 25px;  Movido a .table-container o main > .table-container */
}

/* Estilos base para th y td (tema oscuro por defecto) */
.ranking-table th, .ranking-table td { 
    padding: 12px 15px; 
    text-align: left; 
    border-bottom: 1px solid rgba(255,255,255,0.1); 
    vertical-align: middle; /* Asegurar alineación vertical */
}
.ranking-table th { 
    background-color: rgba(0,0,0,0.2); 
    font-weight: 600; 
    color: var(--accent-color-primary); 
    white-space: nowrap; /* Evita que el texto de la cabecera se parta, excepto criterios */
}
/* Permitir que las cabeceras de criterios se dividan */
.ranking-table th.score-col {
    white-space: normal;
    hyphens: auto;
}

.ranking-table th.sortable { cursor: pointer; }
.ranking-table th.sortable:hover { background-color: rgba(0,0,0,0.3); }
.ranking-table th.sorted-asc::after { content: " ▲"; font-size: 0.8em; }
.ranking-table th.sorted-desc::after { content: " ▼"; font-size: 0.8em; }

.ranking-row { cursor: pointer; transition: background-color 0.2s ease; }
.ranking-row:hover { background-color: rgba(255,255,255,0.07); } /* Ligero aumento en hover */

/* Redondeo de esquinas de la tabla (solo para la primera y última cabecera) */
/* El redondeo inferior se maneja mejor con el contenedor y overflow:hidden */
.ranking-table th:first-child { border-top-left-radius: 12px; } /* Coincide con .table-container */
.ranking-table th:last-child { border-top-right-radius: 12px; } /* Coincide con .table-container */
.ranking-table tr:last-child td { 
    border-bottom: none; /* No borde inferior para la última fila de datos */
}

/* Definición de anchos y estilos para columnas específicas */
.ranking-row { cursor: pointer; transition: background-color 0.2s ease; }
.ranking-row:hover { background-color: rgba(255,255,255,0.05); }
.ranking-row td { vertical-align: middle; }

/* --- INICIO: Correcciones para tamaño de imagen e icono placeholder --- */
.ranking-table .col-image { /* Clase para la celda <td> */
    width: 60px;  /* Ancho fijo para la celda que contiene la imagen/icono */
    min-width: 60px; /* Evitar que se encoja demasiado */
    height: 60px; /* Alto fijo */
    padding: 5px;   /* Padding alrededor de la imagen/icono */
    text-align: center;
    vertical-align: middle; /* Asegurar que el contenido esté centrado verticalmente */
}
.ranking-table th.col-image { /* Para la cabecera, si es necesario ajustar */
    width: 70px; /* Un poco más para compensar paddings si los tuviera el th */
    min-width: 70px;
}

.ranking-item-image { /* Para las imágenes reales */
    width: 50px;   /* (60px celda - 2*5px padding) */
    height: 50px;  /* (60px celda - 2*5px padding) */
    object-fit: cover; /* Cubre el espacio, puede recortar pero mantiene proporción */
    border-radius: 5px; /* Mismo borde que tenías */
    display: inline-block; /* Ajustado para respetar el padding de la celda */
    border: none; /* Quitar el borde si el contenedor .col-image ya lo simula o no se quiere */
    margin: auto; /* Centrar si es inline-block y la celda es flex */
}

.ranking-item-icon-placeholder { /* Contenedor para el icono Font Awesome */
    width: 50px;   /* (60px celda - 2*5px padding) */
    height: 50px;
    display: inline-flex; /* Ajustado para respetar padding y centrar contenido */
    align-items: center;
    justify-content: center;
    background-color: var(--icon-placeholder-bg, rgba(0,0,0,0.25)); /* Fondo para el icono */
    border-radius: 5px; /* Mismo borde que las imágenes */
    box-sizing: border-box;
    margin: auto;
}
.ranking-item-icon-placeholder i { /* El icono Font Awesome en sí */
    font-size: 1.8em; /* Ajusta el tamaño del icono (ej. 1.5em, 2em) */
    color: var(--icon-placeholder-color, var(--accent-color-primary)); /* Color del icono */
}

/* Limpieza de duplicados que estaban al final de la sección de imagen */
/* .ranking-table .col-image { ... } */ /* Ya definido arriba */
/* .ranking-table td { ... } */ /* Estilos base ya definidos */
/* .ranking-table th { ... } */ /* Estilos base ya definidos */
/* --- FIN: Correcciones para tamaño de imagen e icono placeholder --- */

/* Estilos para columnas específicas */
.ranking-table td {
  vertical-align: middle; /* Alinear el contenido de la celda verticalmente */
  padding: 10px; /* Agregar un poco de espacio entre el contenido y los bordes */
}

.ranking-table th {
  text-align: left; /* Alinear el contenido de la celda horizontalmente */
  padding: 10px; /* Agregar un poco de espacio entre el contenido y los bordes */
}

.ranking-table th.col-element, .ranking-table td.col-element {
    min-width: 180px; /* Un mínimo para que no se comprima demasiado */
    /* width: 30%; /* Opcional, si se prefiere porcentaje */
}
.ranking-table .col-element .restaurant-name,
.ranking-table .col-element .dish-name-sub {
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.3;
}
.ranking-table .col-element .restaurant-name { font-weight: 600; }
.ranking-table .col-element .dish-name-sub { font-size: 0.9em; opacity: 0.8; }
.ranking-table th.score-col, .ranking-table td.score-col { text-align: center; font-weight: 600; width: 80px; }
.ranking-table .col-general .overall-score { font-size: 1.3em; color: var(--accent-color-primary); }
.ranking-table .col-location a { color: var(--accent-color-tertiary); font-size: 1.3em; }
.ranking-table .col-location a:hover { color: #05a984; }
.ranking-table .col-location .location-no-link { color: rgba(255,255,255,0.4); font-size: 1.3em; }
.ranking-table .non-weighted-cell { /* Para estilizar las celdas de criterios no ponderados */
    font-style: italic;
    opacity: 0.7;
    font-size: 0.9em;
}
small.non-weighted-header { /* Para (NP) en cabeceras */
    font-size: 0.8em;
    font-weight: normal;
    opacity: 0.7;
}
/* Para la columna de puntuación general */
.ranking-table th.col-general, .ranking-table td.col-general { 
    width: 100px; text-align: center; 
}


/* DETAIL-VIEW Specifics */
.detail-list-name { font-size: 0.9em; color: rgba(255,255,255,0.7); margin-bottom: 5px; text-align: center; }
#detail-restaurant-name { margin-bottom: 5px; }
.detail-dish-name { font-size: 1.1em; color: var(--accent-color-quinary); margin-bottom: 25px; text-align: center; font-weight: 400; }
.detail-content { display: flex; flex-wrap: wrap; gap: 30px; margin-bottom: 30px; }
.detail-image-area { flex: 1; min-width: 280px; }
.detail-image-area img { width: 100%; max-height: 400px; object-fit: cover; border-radius: 10px; border: 1px solid var(--input-border); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
/* Para el placeholder de icono en detail-view */
.detail-image-icon-placeholder {
    width: 100%;
    height: 300px; /* Ajusta a la altura deseada para el placeholder grande */
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--icon-placeholder-bg, rgba(0,0,0,0.25));
    border-radius: 10px;
    border: 1px solid var(--input-border);
}
.detail-image-icon-placeholder i {
    font-size: 5em; /* Icono más grande para detail-view */
    color: var(--icon-placeholder-color, var(--accent-color-primary));
}


.detail-info-area { flex: 1; min-width: 280px; text-align: left; background-color: rgba(0,0,0,0.15); padding: 20px; border-radius: 8px; }
.detail-overall-score-container { text-align: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); }
.detail-overall-score-container span { display: block; font-size: 1em; opacity: 0.8; }
.detail-overall-score { font-size: 3em; font-weight: 700; color: var(--accent-color-primary); }
.detail-ratings-list { list-style: none; padding: 0; margin: 0 0 20px 0; }
.detail-ratings-list li { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.08); }
.detail-ratings-list li:last-child { border-bottom: none; }
.detail-ratings-list .rating-label { opacity: 0.9; }
.detail-ratings-list .rating-value { font-weight: 600; color: var(--accent-color-secondary); }
small.non-weighted-detail { font-size: 0.85em; opacity: 0.7; font-style: italic; }


#detail-location-container { margin-bottom: 20px; }
.detail-location a, .detail-no-location { display: inline-flex; align-items: center; gap: 8px; color: var(--accent-color-tertiary); text-decoration: none; padding: 8px 12px; background-color: rgba(var(--accent-color-tertiary-rgb, 6,214,160), 0.1); border-radius: 6px; transition: background-color 0.2s; }
.detail-location a:hover { background-color: rgba(var(--accent-color-tertiary-rgb, 6,214,160), 0.2); }
.detail-no-location { color: rgba(255,255,255,0.5); background-color: rgba(255,255,255,0.05); }
.detail-no-location i { opacity: 0.7; }

.detail-comment, .detail-tags-area { margin-bottom: 20px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); }
.detail-comment h4, .detail-tags-area h4 { margin-top: 0; margin-bottom: 10px; color: var(--accent-color-quaternary); font-weight: 600; }
#detail-comment-text { line-height: 1.7; opacity: 0.95; }
#detail-tags { display: flex; flex-wrap: wrap; gap: 8px; }
.tag-detail { background-color: var(--accent-color-secondary); color: white; padding: 5px 10px; border-radius: 15px; font-size: 0.85em; }
.detail-actions { margin-top: 30px; display: flex; justify-content: flex-end; gap: 15px; }

/* Media Queries for smaller screens */
@media (max-width: 768px) {
    .list-header-actions { flex-direction: column; align-items: stretch; }
    .list-header-actions h2 { text-align: left; }
    .list-actions { justify-content: center; }
    .detail-content { flex-direction: column; }
    .criterion-item input[name="criteria_title[]"] { flex-basis: 100%; }
    .criterion-item input[name="criteria_label_left[]"], .criterion-item input[name="criteria_label_right[]"] { flex-basis: calc(50% - 1rem); }
    
    /* Logo adjustments for medium screens */
    .app-logo-container {
        top: 10px;
        left: 10px;
    }
    .app-logo {
        height: 60px; /* Further reduced from 70px */
    }
}

@media (max-width: 480px) {
    h1.brand-title { font-size: 2.5em; }
    .container h2 { font-size: 1.8em; }
    .button, button, input[type="submit"], .add-review-button, .submit-button, .edit-button, .delete-button, .add-button { width: 100%; margin-bottom: 10px; }
    .form-actions, .detail-actions { display: flex; flex-direction: column; gap:10px; }
    .detail-actions .button, .detail-actions button { margin-bottom: 0; }
    .list-action-button span { display: none; } 
    .list-action-button i { margin-right: 0; }
    #list-circles-ul a { width: 100px; height: 100px; }
    #list-circles-ul a i { font-size: 2em; }
    .criterion-item input[name="criteria_label_left[]"], .criterion-item input[name="criteria_label_right[]"] { flex-basis: 100%; }
    .criterion-item .criterion-weighted-label { width: 100%; margin-left: 0; justify-content: flex-start; margin-top: 0.5rem; padding-left: 0; }
    .criterion-item .remove-button { margin-left: auto; margin-top: 0.5rem; }

    /* Logo adjustments for small screens */
    .app-logo-container {
        top: 8px;
        left: 8px;
    }
    .app-logo {
        height: 50px; /* Further reduced from 55px */
    }
}

/* Added a more specific breakpoint for very small devices if needed, based on previous report structure */
@media (max-width: 360px) {
    .app-logo-container {
        top: 5px;
        left: 5px;
    }
    .app-logo {
        height: 40px; /* Further reduced from 50px */
    }
    /* Other 360px styles from previous responsiveness pass would go here if they existed */
    /* For example, if brand-title size was also adjusted at 360px: */
    /* h1.brand-title { font-size: 2.2em; } */
}



/* Light theme specific adjustments */

body.light-theme #list-circles-ul a {
    background-color: #FFFFFF; 
    border: 1px solid #E5E5E5;
}
body.light-theme #list-circles-ul a:hover {
    background-color: #F5F5F7;
    border-color: #D1D1D6;
}
body.light-theme #manual-location-fields {
    background-color: #F5F5F7;
    border-color: #E5E5E5;
}



body.light-theme .tag-filter-button {
    background-color: #E9EDF0; 
    color: var(--text-color);
    border: 1px solid #CCD1D6;
}
body.light-theme .tag-filter-button:hover {
    background-color: #DDE1E5;
    border-color: #BCC1C6;
}
body.light-theme .tag-filter-button.selected {
    background-color: var(--accent-color-primary);
    color: #FFFFFF;
    border-color: var(--accent-color-primary);
}

body.light-theme .table-container {
    border: 1px solid var(--input-border);
    box-shadow: 0 4px 15px rgba(0,0,0,0.08);
}
body.light-theme .ranking-table th {
    background-color: #F5F5F7;
    color: var(--title-color);
    border-bottom: 1px solid #D4DAE0;
}
body.light-theme .ranking-table td {
    border-bottom: 1px solid #E1E6EB;
}
body.light-theme .ranking-row:hover {
    background-color: #EFEFEF;
}

body.light-theme .edit-button {
    color: #FFFFFF;
}
body.light-theme .edit-button:hover {
    color: #FFFFFF;
}

body.light-theme .user-profile-button {
  background-color: #FFFFFF;
  color: var(--text-color);
  border-color: var(--input-border);
}
body.light-theme .user-profile-button:hover {
  background-color: var(--accent-color-primary);
  color: var(--main-button-text);
  border-color: var(--accent-color-primary);
}

body.light-theme .user-menu {
  background-color: #FFFFFF;
  border-color: #D1D5DB;
  box-shadow: 0 8px 20px rgba(0,0,0,0.1);
}
body.light-theme .user-menu a, 
body.light-theme .user-menu button {
  color: var(--text-color);
}
body.light-theme .user-menu a:hover,
body.light-theme .user-menu button:hover {
  background-color: #f0f0f0;
  color: var(--accent-color-primary);
}
body.light-theme .user-menu-divider {
  background-color: #E5E7EB;
}

body.light-theme .header-action-button {
  background-color: #FFFFFF;
  color: var(--text-color);
  border-color: var(--input-border);
}
body.light-theme .header-action-button:hover, 
body.light-theme a.header-action-button:hover {
  background-color: var(--accent-color-primary);
  color: var(--main-button-text); 
  border-color: var(--accent-color-primary);
}
body.light-theme .user-info-card,
body.light-theme .profile-stats,
body.light-theme .profile-section {
    background-color: #FAFAFA;
    border: 1px solid #EAEAEA;
}
body.light-theme #profile-photo-display {
    border-color: var(--accent-color-primary);
}
body.light-theme .profile-section h3 {
    border-bottom-color: #EAEAEA;
}
body.light-theme .modal-content {
    background-color: var(--primary-bg);
    border: 1px solid var(--input-border);
}


/* --- Estilos para el botón de cambio de tema --- */
.theme-toggle-button {
  /*position: fixed;
  top: 15px;
  right: 15px;
  background-color: var(--container-bg); /* Usa el color de fondo de los contenedores del tema actual */
  /* position: fixed, top, right, y z-index se eliminan para permitir que este botón
     sea un elemento flex dentro de .header-actions-container.
     Su estilo visual principal debería provenir de .header-action-button si se usan juntos. */
    background-color: var(--container-bg); /* Estas propiedades podrían ser redundantes si .header-action-button siempre está aplicado */
  color: var(--text-color); /* Usa el color de texto del tema actual */
  border: 1px solid var(--input-border); /* Usa el color de borde de input del tema actual */
  border-radius: 50%;
  width: 45px;
  height: 45px;
  display: flex; /* Asegura que flexbox esté aplicado */
  align-items: center; /* Centra verticalmente el icono */
  justify-content: center; /* Centra horizontalmente el icono */
  font-size: 1.2em; /* Ajusta el tamaño base para el icono si es necesario */
  padding: 0; /* Elimina padding si interfiere con el centrado del icono */
  /*z-index: 1001;*/
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
}

.theme-toggle-button:hover {
  background-color: var(--accent-color-primary); /* Usa el color de acento primario del tema actual */
  color: var(--main-button-text); /* Usa el color de texto de botón principal del tema actual */
  border-color: var(--accent-color-primary); /* Usa el color de acento primario del tema actual */
  transform: translateY(-1px);
}

.theme-toggle-button i {
  line-height: 1; /* Ayuda a centrar verticalmente el icono de FontAwesome */
  display: flex; /* Para asegurar que el icono se comporte como un bloque flexible */
  align-items: center;
  justify-content: center;
}

/* Media Queries Adicionales para tablas */
@media (max-width: 768px) {
    .ranking-table {
        font-size: 0.9em; /* Reducir un poco la fuente */
    }
    .ranking-table th, .ranking-table td {
        padding: 10px 8px; /* Reducir padding */
    }
    .ranking-table th.col-image, .ranking-table td.col-image {
        width: 55px; 
        min-width: 55px;
    }
    .ranking-item-image, .ranking-item-icon-placeholder {
        width: 40px; 
        height: 40px;
    }
    .ranking-item-icon-placeholder i { font-size: 1.5em; }
    .ranking-table th.score-col, .ranking-table td.score-col { width: 65px; }
    .ranking-table th.col-general, .ranking-table td.col-general { width: 85px; }
}

@media (max-width: 600px) {
    .ranking-table th.col-location, .ranking-table td.col-location {
        display: none; /* Ocultar columna de ubicación en pantallas muy pequeñas */
    }
    .ranking-table {
        font-size: 0.85em; /* Reducir aún más la fuente */
    }
     .ranking-table th, .ranking-table td {
        padding: 8px 6px; /* Reducir más padding */
    }
}

/* --- Estilos para Grouped Detail View (grouped-detail-view.html) --- */
.grouped-detail-header {
    text-align: center;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--input-border);
}
.grouped-detail-header h2 {
    font-size: clamp(1.8em, 5vw, 2.5em); 
    color: var(--title-color);
    margin-bottom: 5px;
}
.grouped-detail-header #list-name-subheader {
    font-size: 1em;
    color: var(--secondary-text-color);
    margin-top: 0;
}

.group-summary-section, .group-images-section, .individual-reviews-section {
    margin-bottom: 30px;
}

.group-summary-section.card, .group-images-section.card {
    padding: 20px;
    text-align: left; /* Sobrescribir el text-align:center del .container si es necesario */
}
.group-summary-section h3, .group-images-section h3, .individual-reviews-section h3 {
    margin-top: 0;
    margin-bottom: 15px;
    color: var(--accent-color-secondary); 
    border-bottom: 2px solid var(--accent-color-primary);
    padding-bottom: 8px;
    text-align: left;
}

.summary-score .score-value, .summary-count .count-value {
    font-weight: bold;
    font-size: 1.2em;
    color: var(--accent-color-tertiary); 
}

.image-gallery-placeholder {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}
.gallery-thumbnail {
    width: 100px;
    height: 100px;
    object-fit: cover;
    border-radius: 8px;
    border: 2px solid var(--input-border);
    transition: transform 0.2s ease;
}
.gallery-thumbnail:hover {
    transform: scale(1.05);
    border-color: var(--accent-color-primary);
}

.review-card {
    background-color: var(--container-bg); /* O var(--surface-color) si lo tienes */
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    text-align: left;
}
.review-card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; border-bottom: 1px dashed var(--input-border); padding-bottom: 8px;}
.review-card-header h4 { margin: 0; font-size: 1.1em; }
.review-card-score strong { font-size: 1.2em; color: var(--accent-color-primary); } 
.review-card-body { display: flex; gap: 15px; margin-bottom: 10px; }
.review-card-image-container { flex-basis: 120px; flex-shrink: 0; }
.review-card-image { width: 100%; height: auto; max-height: 120px; object-fit: cover; border-radius: 6px; }
.review-card-no-image { width: 120px; height: 120px; background-color: var(--icon-placeholder-bg); display: flex; align-items: center; justify-content: center; border-radius: 6px; font-size: 2em; color: var(--icon-placeholder-color); }
.review-card-details { flex-grow: 1; }
.review-card-details ul { list-style: none; padding: 0; margin: 0; font-size: 0.9em; }
.review-card-details ul li { margin-bottom: 4px; }
.review-card-comment-section { margin-bottom: 10px; font-size: 0.95em; }
.review-card-comment-empty { opacity: 0.7; font-style: italic; }
.review-card-actions { text-align: right; margin-top: 10px; }
.review-card-actions .button-link { font-size: 0.9em; padding: 6px 12px; }

body.light-theme .review-card {
    background-color: #FFFFFF;
    box-shadow: 0 2px 8px rgba(0,0,0,0.07);
}

/* Footer (already defined earlier, ensuring it's consistent) */
/* The footer style from lines 183-184 was very basic. */
/* The more complete footer style (similar to what I provided before) is now integrated near the top. */
/* This section can be removed if the footer style at the top is now the definitive one. */
/* For now, I'll assume the earlier, more complete footer definition is active. */

body.light-theme footer {
    border-top: 1px solid #D1D5DB; /* Borde para tema claro */
} 

/* --- Animations --- */
@keyframes fadeInUpScale { from { opacity: 0; transform: translateY(20px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }


.search-button {
      /* position: fixed;  <-- Eliminado para que dependa del contenedor */
  /* top: 15px;        <-- Eliminado */
  /* Theme toggle button is at right: 15px, width: 45px. Add 10px gap. */
  /* 15px (theme-toggle offset) + 45px (theme-toggle width) + 10px (gap) = 70px */
  /* right: 70px;      <-- Eliminado */
  /* position: relative; Para el posicionamiento absoluto del menú hijo */
  background-color: var(--container-bg);
  color: var(--text-color);
  border: 1px solid var(--input-border);
  border-radius: 50%;
  width: 45px;
  height: 45px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.3em; /* Icon size */
  padding: 0;
  /* z-index: 1001;  <-- Manejado por .user-profile-menu-container y .user-menu */
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  cursor: pointer;
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
}

  .search-button:hover {
    background-color: var(--accent-color-primary); /* Usa el color de acento primario del tema actual */
    color: var(--main-button-text); /* Usa el color de texto de botón principal del tema actual */
    border-color: var(--accent-color-primary); /* Usa el color de acento primario del tema actual */
    transform: translateY(-1px);
  }
  
  .search-button i {
    line-height: 1; /* Ayuda a centrar verticalmente el icono de FontAwesome */
    display: flex; /* Para asegurar que el icono se comporte como un bloque flexible */
    align-items: center;
    justify-content: center;
  }

/* NUEVO: Contenedor para el menú de perfil */
.user-profile-menu-container {
    /* position: fixed;
    top: 15px; */
    /* Theme toggle button is at right: 15px, width: 45px. Add 10px gap. */
    /* 15px (theme-toggle offset) + 45px (theme-toggle width) + 10px (gap) = 70px */
    /* right: 70px; */
    /* z-index: 1002; /* Por encima del botón de tema, pero debajo del menú desplegable */
    position: relative;
  }


/* --- User Profile Menu --- */
.user-profile-button {
  /* position: fixed;  <-- Eliminado para que dependa del contenedor */
  /* top: 15px;        <-- Eliminado */
  /* Theme toggle button is at right: 15px, width: 45px. Add 10px gap. */
  /* 15px (theme-toggle offset) + 45px (theme-toggle width) + 10px (gap) = 70px */
  /* right: 70px;      <-- Eliminado */
  position: relative; /* Para el posicionamiento absoluto del menú hijo */
  background-color: var(--container-bg);
  color: var(--text-color);
  border: 1px solid var(--input-border);
  border-radius: 50%;
  width: 45px;
  height: 45px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.3em; /* Icon size */
  padding: 0;
  /* z-index: 1001;  <-- Manejado por .user-profile-menu-container y .user-menu */
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  cursor: pointer;
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
}

.user-profile-button:hover {
  background-color: var(--accent-color-primary);
  color: var(--main-button-text);
  border-color: var(--accent-color-primary);
  transform: translateY(-1px);
}

.user-profile-button i {
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

.user-menu {
  position: absolute;
  top: calc(100% + 8px); /* Below the button with a small gap */
  right: 0;
  background-color: var(--container-bg); /* Consistente con el botón y otros contenedores */
  border: 1px solid var(--input-border);
  border-radius: 8px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.25);
  min-width: 200px;
  z-index: 1003; /* Above user button and theme button */
  padding: 8px 0;
  display: none; /* Hidden by default, toggled by JS */
  flex-direction: column; /* If using display:flex for .is-active */
}

.user-menu.is-active {
  display: flex; /* Or display: block; */
}

.user-menu a, .user-menu button { /* Assuming links or buttons for menu items */
  display: block;
  padding: 10px 20px;
  color: var(--text-color);
  text-decoration: none;
  font-size: 0.95em;
  background-color: transparent;
  border: none;
  width: 100%;
  text-align: left;
  cursor: pointer;
  transition: background-color 0.2s ease, color 0.2s ease;
  box-sizing: border-box; /* Ensure padding is included in the 100% width */
}
.user-menu a:hover, .user-menu button:hover {
  background-color: rgba(var(--accent-color-primary-rgb), 0.15);
  color: var(--accent-color-primary);
}

.user-menu-divider {
  height: 1px;
  margin: 8px 0;
  background-color: var(--input-border);
  border: 0;
}

/* Light theme adjustments for User Profile Menu */
body.light-theme .user-profile-button {
  background-color: #FFFFFF;
  color: var(--text-color);
  border-color: var(--input-border);
}
body.light-theme .user-profile-button:hover {
  background-color: var(--accent-color-primary);
  color: var(--main-button-text); /* Ensure this var is appropriate for light theme accent */
  border-color: var(--accent-color-primary);
}

body.light-theme .user-menu {
  background-color: #FFFFFF; /* Lighter background for dropdown in light mode */
  border-color: #D1D5DB; /* Consistent light theme border */
  box-shadow: 0 8px 20px rgba(0,0,0,0.1);
}
body.light-theme .user-menu a, 
body.light-theme .user-menu button {
  color: var(--text-color);
}
body.light-theme .user-menu a:hover,
body.light-theme .user-menu button:hover {
  background-color: #f0f0f0; /* Light grey hover for items */
  color: var(--accent-color-primary);
}
body.light-theme .user-menu-divider {
  background-color: #E5E7EB; /* Lighter divider for light theme */
}
/* La llave de cierre extra que estaba aquí ha sido eliminada. */


/* --- Header Action Buttons (Search, User Profile, Theme Toggle) --- */
.header-actions-container { /* Este es tu contenedor principal del header fijo */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    padding: 0 20px; 
    /* background-color: rgba(var(--primary-bg-rgb, 10, 25, 49), 0.3); Fondo translúcido    z-index: 1005; Ya lo tienes alto */
    display: flex;
    justify-content: space-between; /* CLAVE: para separar izquierda y derecha */
    align-items: center;
    height: 80px; /* O la altura que definiste */
    box-sizing: border-box;
    z-index: 1005; /* Asegúrate de que sea suficientemente alto */

    /* Capa base: Gradiente de transparencia progresiva */
    /* Va desde más opaco abajo (usando el color de fondo primario del tema) 
       hasta casi transparente arriba. */
       background-image: linear-gradient(
        to top, /* De abajo hacia arriba */
        rgba(var(--primary-bg-rgb-values), 0), /* Color y opacidad en la parte inferior */
        rgba(var(--primary-bg-rgb-values), 1)     /* Color y opacidad en la parte superior */
        /* Si quieres que la parte superior sea completamente transparente, puedes usar:
           transparent
           en lugar de la segunda rgba()
        */
    );
    background-size: 100% 100%; /* Asegura que el gradiente cubra todo el contenedor */
    background-repeat: no-repeat;
    
    /* Necesario para posicionar correctamente el pseudo-elemento del granulado */
    
    pointer-events: none; /* Dejamos que los clics pasen a través del fondo */
}

.header-actions-container a,
.header-actions-container button {
    pointer-events: auto;
}

/* Capa de efecto granulado (superpuesta al gradiente) */
.header-actions-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    
    /* Técnica para el granulado: Usaremos un SVG como data URI.
       Este SVG genera un patrón de ruido fractal.
       Puedes ajustar 'baseFrequency' para cambiar la "densidad/tamaño" del grano.
       Valores más altos (ej. 0.75, 0.95) = grano más fino.
       Valores más bajos (ej. 0.1, 0.25) = grano más grueso.
       'numOctaves' añade detalle al ruido. */
       background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAFUlEQVQYV2NkYGD4z4AGsH4A8A4B6R9Z9gAAAABJRU5ErkJggg==');
       /* Opcionalmente, puedes controlar el tamaño de cada "tile" del ruido. 
       Si no pones background-size, se ajustará al tamaño del SVG. */
    background-size: 200px 200px; /* Ajusta esto para cambiar la escala del grano */
    background-repeat: repeat; /* Para que la imagen se repita y cubra el área */
    opacity: var(--header-noise-opacity); /* Controla cuán visible es el granulado */
    pointer-events: none; /* Para que no interfiera con los clics en el header */
    
    /* No se necesita z-index aquí si el ::before está en el mismo elemento
       que tiene el gradiente como background-image. El ::before se renderizará
       encima del background del elemento padre por defecto. */
}

.header-left-content {
    display: flex;
    align-items: center;
    gap: 12px; /* Espacio entre el logo y el texto dinámico */
    overflow: hidden; /* Para ayudar a contener el texto si se vuelve muy largo */
}

.header-dynamic-page-info {
    display: flex; /* Para alinear los spans si es necesario, aunque con white-space: nowrap es menos crítico */
    align-items: baseline; /* Alinea el texto por la base */
    color: var(--title-color); /* Color base del texto */
    font-family: 'Poppins', serif; /* La fuente que te gusta */
    font-weight: 600; /* El grosor que te gusta */
    font-size: 2em; /* Ajusta este tamaño. Un h2 suele ser más grande (2.2em+), 
                         pero para el header quizás quieras algo más comedido. 
                         Prueba con valores entre 1.2em y 1.8em. */
    letter-spacing: 0.5px; /* Un poco de espaciado si quieres */
    text-shadow: 1px 1px 3px rgba(0,0,0,0.15); /* Sombra más sutil para header */

    white-space: nowrap; /* Para que no se parta en varias líneas */
    overflow: hidden;    /* Oculta el texto que no quepa */
    text-overflow: ellipsis; /* Muestra "..." si el texto es muy largo */
    flex-shrink: 1; /* Permitir que se encoja si es necesario */
    min-width: 0;   /* Ayuda a flex-shrink con overflow */
    /* max-width: calc(100vw - 300px);  Un max-width puede ser útil para evitar que 
                                      empuje a los iconos de la derecha. 
                                      Este valor es un ejemplo, ajústalo. */                                
}

#page-category-name {
    color: var(--accent-color-primary); /* La categoría en color de acento */
    /* Puedes añadir un margin-right si quieres más espacio antes del separador */
}

#page-list-name-separator {
    margin: 5px;
    font-size: 0.25em; /* Pequeño espacio alrededor del guion */
}

#page-list-name {
    color: var(--title-color); /* El nombre de la lista con el color de título normal */
}

.header-right-actions {
    display: flex;
    align-items: center;
    gap: 9px; /* Espacio entre los botones de acción */
}

/* En style.css */

/* Estilo general para los botones de acción del header, incluyendo los que son enlaces */
.header-action-button, 
a.header-action-button { /* Importante añadir 'a.header-action-button' */
    background-color: var(--container-bg);
    color: var(--text-color); /* Para el color del icono */
    border: 1px solid var(--input-border);
    border-radius: 45%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2em; /* Tamaño del icono */
    padding: 0;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    cursor: pointer;
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
    box-sizing: border-box;
    flex-shrink: 0;
    
    text-decoration: none; /* CLAVE: Quita el subrayado de los enlaces */
}



/* Hover state */
.header-action-button:hover,
a.header-action-button:hover {
    background-color: var(--accent-color-primary);
    color: var(--main-button-text); /* Asegura que el icono cambie de color */
    border-color: var(--accent-color-primary);
    transform: translateY(-1px);
    text-decoration: none; /* Mantener sin subrayado en hover */
}

.header-action-button, a.header-action-button i {
    line-height: 1;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Specific adjustments if .user-profile-button needs to retain its original class for JS */
/* but also adopt .header-action-button styles */
.user-profile-button.header-action-button {
    /* It will inherit all .header-action-button styles */
    /* No specific overrides needed unless its behavior must differ */
}

/* Adjust .user-profile-menu-container as it's now a flex item */
.user-profile-menu-container {
    position: relative; /* Was fixed, now relative to the flex container */
    top: auto;          /* Reset fixed positioning */
    right: auto;        /* Reset fixed positioning */
    z-index: auto;      /* Reset z-index or manage within header-actions-container */
    /* display: flex;      Removed: Let parent flex container handle alignment of this block */
    /* align-items: center; Removed: Button inside has fixed size, should align correctly */
    box-sizing: border-box; /* Ensure padding/border don't affect final size unexpectedly */
    flex-shrink: 0; /* Also prevent this container from shrinking */
    /* Purpose of this container is to be a positioned anchor for the absolute .user-menu */
    /* and a flex item in .header-actions-container. Its size will be that of its child button. */
}
/* The .user-profile-button itself is now styled by .header-action-button */
/* The .user-menu dropdown positioning might need adjustment if it was based on fixed parent */
.user-menu {
    /* top: calc(100% + 8px); /* This should still work if .user-profile-menu-container is relative */
    /* right: 0; */ /* This should still work */
}


/* Light theme adjustments for new buttons/container */
body.light-theme .header-action-button {
  background-color: #FFFFFF;
  color: var(--text-color); /* Uses light theme text color */
  border-color: var(--input-border); /* Uses light theme input border */
}
body.light-theme .header-action-button:hover, 
a.header-action-button:hover {
  background-color: var(--accent-color-primary); /* Uses light theme accent */
  /* Ensure main-button-text for light theme is set correctly for light theme accent bg */
  color: var(--main-button-text); 
  border-color: var(--accent-color-primary);
}

/* Responsive adjustments for header actions container */
@media (max-width: 768px) {
    .header-actions-container {
        height: 75px; /* Usa la variable */
        top: 0px;
        right: 10px;
        gap: 8px;
    }
    .header-action-button, a.header-action-button {
        width: 35px;
        height: 35px;
        font-size: 1.1em;
    }
}

@media (max-width: 480px) {
    .header-actions-container {
        height: 60px;
        top: 0px; /* Adjusted from 8px */
        right: 0px; /* Adjusted from 8px */
        gap: 3px; /* Remains 5px, seems appropriate */
    }
    .header-action-button, a.header-action-button {
        width: 30px; /* Adjusted from 38px */
        height: 30px; /* Adjusted from 38px */
        font-size: 0.95em; /* Adjusted from 1em for icons */
    }
    .search-button {
        margin-bottom: 10px;
    }
}

@media (max-width: 360px) {
    .header-actions-container {
        gap: 1px; /* Further reduce gap */
        height: 50px;
        top: 0px;
        /* top: 5px; right: 5px; already set by 480px, can be kept or overridden if needed */
    }
    .header-action-button, a.header-action-button {
        width: 28px; /* Further reduce size */
        height: 28px; /* Further reduce size */
        font-size: 0.85em; /* Further reduce icon size */
    }
}


/* --- Estilos para la página de perfil (profile.html) --- */
/* Estilos para el encabezado fijo de la página de perfil */
.page-header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    background-color: var(--container-bg);
    border-bottom: 1px solid var(--border-color);
    box-shadow: var(--shadow-elevation-low);
    z-index: 1000; /* Debe estar por debajo de .header-actions-container y modales */
    box-sizing: border-box;
}
.page-header h1 {
    margin: 0;
    font-size: 1.5em;
    color: var(--text-color);
}

.profile-container {
    max-width: 800px;
    margin: 20px auto; /* Margen superior ajustado ya que body tiene padding-top */
    padding: 20px; /* Padding interno del contenedor del perfil */
}

.user-info-card { /* Reemplaza al antiguo .profile-header */
    text-align: center;
    margin-bottom: 40px;
    padding: 20px;
    background: var(--container-bg);
    border-radius: 10px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

#profile-photo-display { /* Para la imagen de perfil clickeable */
    width: 120px;
    height: 120px;
    margin: 0 auto 20px;
    border-radius: 50%;
    overflow: hidden;
    object-fit: cover;
    border: 3px solid var(--border-color);
    background-color: var(--input-bg); /* Fondo mientras carga o si no hay imagen */
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}
#profile-photo-display:hover {
    transform: scale(1.05);
    box-shadow: 0 0 15px rgba(var(--accent-color-primary-rgb), 0.5);
}

#profile-display-name { /* Ya existía, se mantiene y ajusta si es necesario */
    margin: 10px 0 5px;
    color: var(--title-color);
    font-size: 1.8em;
    font-family: var(--brand-font);
    font-weight: 600;
}

#profile-username-display {
    color: var(--accent-color-primary);
    font-size: 1.1em;
    margin-bottom: 15px;
}

#profile-bio-display {
    color: var(--secondary-text-color);
    margin-bottom: 15px;
    white-space: pre-wrap; /* Para respetar saltos de línea en la bio */
    font-size: 0.95em;
    line-height: 1.5;
}

#profile-email-display { /* Ya existía, se mantiene */
    font-size: 0.9em;
    color: var(--secondary-text-color);
    margin-bottom: 20px;
}

.edit-profile-button { /* Para el botón "Editar Perfil" */
    margin-top: 15px;
}

.profile-item-list { /* Para #my-lists-ul y #my-reviews-ul */
    list-style: none;
    padding: 0;
    margin: 0;
}

.profile-list li {
    padding: 12px 15px;
    margin-bottom: 10px;
    background: rgba(var(--accent-color-primary-rgb), 0.05);
    border-radius: 6px;
    transition: background-color 0.2s;
}
.profile-list li:hover {
    background: rgba(var(--accent-color-primary-rgb), 0.1);
}
.profile-list li a {
    color: var(--text-color);
    text-decoration: none;
    font-weight: 500;
}
.profile-list li a:hover {
    color: var(--accent-color-primary);
}

/* Profile Stats Section */
.profile-stats {
    display: flex;
    justify-content: space-around;
    background-color: var(--container-bg-secondary);
    padding: 20px;
    border-radius: var(--border-radius-medium);
    margin-bottom: 30px;
    box-shadow: var(--shadow-elevation-low);
}
.stat-item {
    text-align: center;
    cursor: pointer;
    padding: 5px 10px;
    border-radius: var(--border-radius-small);
    transition: background-color 0.2s ease;
}
.stat-item:hover {
    background-color: rgba(var(--accent-color-primary-rgb), 0.1);
}
.stat-item .count {
    font-size: 1.8em;
    font-weight: bold;
    display: block;
    color: var(--text-color);
}
.stat-item .label {
    font-size: 0.9em;
    color: var(--secondary-text-color);
}

/* Profile Sections (Mis Listas, Mis Reseñas) */
.profile-section { /* Ya existía, se adapta */
    background: var(--container-bg-secondary);
    border-radius: var(--border-radius-medium);
    padding: 20px;
    margin-bottom: 30px;
    box-shadow: var(--shadow-elevation-low);
}
.profile-section h3 { /* Ya existía, se adapta */
    color: var(--accent-color-secondary); /* Cambiado de primary a secondary para variedad */
    font-size: 1.4em;
    margin-top: 0;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--border-color);
}

/* Modal Styles */
.modal {
    display: none; /* Hidden by default */
    position: fixed;
    z-index: 1050; /* Above header actions */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.5); /* Semi-transparent black overlay */
    align-items: center;
    justify-content: center;
}
.modal.active {
    display: flex; /* Use flex to center content */
}
.modal-content {
    background-color: var(--container-bg);
    margin: auto;
    padding: 25px;
    border-radius: var(--border-radius-large);
    box-shadow: var(--shadow-elevation-high);
    width: 90%;
    max-width: 500px; /* Default max-width */
    position: relative;
    animation: fadeInUpScale 0.3s ease-out forwards;
}
.modal-content.photo-modal-content {
    max-width: 600px;
    text-align: center;
}
.close-button {
    color: var(--secondary-text-color);
    position: absolute;
    top: 10px;
    right: 20px;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.2s ease;
}
.close-button:hover, .close-button:focus {
    color: var(--text-color);
}

/* Save button specific to modals, if different from global .button or .submit-button */
.save-button { /* This class was used in profile.html modals */
    /* Inherits from .button, or define specific styles here */
    /* Example: if it needs to be distinct from .submit-button */
    background-color: var(--accent-color-tertiary); /* Default green */
    color: var(--primary-bg); /* Dark text on light green */
}
.save-button:disabled {
    background-color: var(--disabled-bg);
    color: var(--disabled-text-color) !important; /* Ensure override */
    opacity: 0.7;
    cursor: not-allowed;
}
.save-button.has-changes {
    background-color: var(--accent-color-primary); /* Yellow when changes pending */
    color: var(--main-button-text); /* Dark text on yellow */
}

#enlarged-profile-photo {
    max-width: 100%;
    max-height: 70vh; /* Limit height */
    border-radius: var(--border-radius-medium);
    margin-bottom: 15px;
    border: 2px solid var(--border-color);
}
#photo-edit-controls {
    margin-top: 20px;
    padding: 15px;
    background-color: rgba(0,0,0,0.1);
    border-radius: var(--border-radius-small);
}
#photo-edit-controls .form-group {
    margin-bottom: 15px;
}
#photo-edit-controls input[type="file"],
#photo-edit-controls input[type="url"] {
    margin-bottom: 10px;
}


/* Ajustes responsivos */
@media (max-width: 768px) {
    .profile-container {
        padding: 15px;
        padding-top: 90px;
        margin-top: 0; /* Body padding-top handles space for fixed header */
    }
    .user-info-card {
        padding: 15px;
    }
    .profile-picture {
        width: 100px;
        height: 100px;
    }
    
    .profile-picture i {
        font-size: 60px;
    }
    .modal-content {
        padding: 20px;
    }
}

@media (max-width: 480px) {
    #profile-display-name {
        font-size: 1.5em;
    }
    .user-info-card {
        margin-bottom: 25px;
    }
    .profile-stats { margin-bottom: 25px; flex-direction: column; gap: 15px; }
    .profile-section {
        padding: 15px;
    }
}

/* --- User Profile Page Styles --- */
#profile-picture-placeholder {
    /* This ID might be from an older version or a different approach. */
    /* The current profile.html uses #profile-photo-display directly. */
    /* If #profile-picture-placeholder is still used as a container, style it here. */
    /* For now, assuming #profile-photo-display is the primary element. */
    text-align: center;
}
#profile-picture-placeholder .fa-user-circle { /* Default icon if no image */
    font-size: 100px; /* Adjust as needed */
    color: var(--accent-color-primary);
    line-height: 1; /* Ensure it aligns well if it's the only thing */
}


/* #profile-display-name and #profile-email styles are now part of .user-info-card section */

/* #profile-my-lists and #profile-my-reviews are now styled by .profile-section */
/* The specific ul and li styles are covered by .profile-item-list */


#profile-my-lists, #profile-my-reviews {
    margin-bottom: 35px;
    padding: 20px;
    background-color: rgba(0,0,0,0.1); /* Subtle background for sections */
    border-radius: 8px;
    text-align: left; /* Align section content to left */
}
#profile-my-lists h3, #profile-my-reviews h3 {
    /* These are now styled by .profile-section h3 */
}



#my-reviews-container .review-item-placeholder { /* Example class for styling individual reviews later */
    padding: 10px;
    margin-bottom:10px;
    background-color: rgba(255,255,255,0.05);
    border-radius: 5px;
}


/* Light theme adjustments for profile page sections */
body.light-theme #profile-photo-display {
    border-color: var(--input-border); /* Uses light theme input border */
}

/* --- Profile Page Specific Container Width --- */
.profile-page-container {
    max-width: 1100px !important; /* Increased from default 900px for .container. Using !important to ensure override if needed. */
}
/* End Profile Page Specific Container Width */


/* Style for dynamically created profile image */
.profile-image-dynamic {
    width: 120px; /* Matches existing #profile-picture-placeholder img style */
    height: 120px;
    border-radius: 50%;
    border: 3px solid var(--input-border);
    object-fit: cover;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    display: block; /* Or inline-block if preferred for layout */
    margin: 0 auto 20px auto; /* Centering if it's a block */
}


body.light-theme .user-info-card,
body.light-theme .profile-stats,
body.light-theme .profile-section {
    background-color: rgba(0,0,0,0.03); /* Very light background for sections */
    border: 1px solid var(--input-border);
}
body.light-theme .profile-section h3 {
    border-bottom: 1px solid var(--input-border); /* Uses light theme input border */
}
body.light-theme .profile-list li {
    border-bottom: 1px solid rgba(var(--accent-color-primary-rgb), 0.2); /* Slightly more visible in light */
    background-color: rgba(0,0,0,0.02);
}
body.light-theme .profile-list li:hover {
    background-color: rgba(0,0,0,0.05);
}
body.light-theme .profile-list li a {
    color: var(--text-color); /* Uses light theme text color */
}
body.light-theme .profile-list li a:hover {
    color: var(--accent-color-primary); /* Uses light theme accent */
}

/* Profile Message Area */
#profile-message-area {
    margin-top: 15px;
    padding: 12px 15px;
    border-radius: var(--border-radius-small);
    font-weight: 500;
    text-align: center;
    line-height: 1.4;
    display: none; /* Oculto por defecto, JS lo muestra */
    font-size: 0.9em;
}
#profile-message-area.success { background-color: rgba(var(--accent-color-tertiary-rgb), 0.15); color: var(--accent-color-tertiary); border: 1px solid var(--accent-color-tertiary); }
#profile-message-area.error { background-color: rgba(var(--danger-color-rgb), 0.15); color: var(--danger-color); border: 1px solid var(--danger-color); }



body.light-theme .modal-content {
    background-color: var(--primary-bg); /* Light theme page background */
    border: 1px solid var(--input-border);
}
body.light-theme .save-button {
    background-color: var(--accent-color-tertiary);
    color: white; /* Text on green */
}
body.light-theme .save-button.has-changes {
    background-color: var(--accent-color-primary);
    color: var(--main-button-text); /* Dark text on yellow */
}
body.light-theme #photo-edit-controls {
    background-color: rgba(0,0,0,0.05);
}

/* Estilos para listas y reseñas en el perfil */
.profile-list-item, .profile-review-item {
    background-color: var(--container-bg); /* Un fondo sutil */
    padding: 15px;
    margin-bottom: 12px;
    border-radius: var(--border-radius-medium);
    border: 1px solid var(--border-color-light);
    transition: box-shadow 0.2s ease, transform 0.2s ease;
}
.profile-list-item:hover, .profile-review-item:hover {
    box-shadow: var(--shadow-elevation-low);
    transform: translateY(-2px);
}

.profile-list-item a, .profile-review-item a {
    text-decoration: none;
    color: var(--text-color);
    display: block;
}

.profile-list-item-name, .profile-review-item-title {
    font-size: 1.1em;
    font-weight: 600;
    color: var(--accent-color-primary);
    margin-bottom: 8px;
    display: block;
}

.profile-list-item-meta, .profile-review-item-meta {
    font-size: 0.85em;
    color: var(--secondary-text-color);
    display: flex;
    flex-wrap: wrap;
    gap: 15px; /* Espacio entre meta items */
}
.profile-list-item-meta span, .profile-review-item-meta span {
    display: inline-flex;
    align-items: center;
}
.profile-list-item-meta i, .profile-review-item-meta i {
    margin-right: 6px;
    color: var(--accent-color-secondary);
}

.profile-review-item-main {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}
.profile-review-rating {
    font-weight: bold;
    color: var(--accent-color-tertiary);
    font-size: 1em;
}
.profile-review-rating .fa-star {
    color: var(--accent-color-primary); /* O el color que prefieras para la estrella */
    font-size: 0.9em;
}

/* Placeholder y errores en listas/reseñas del perfil */
.loading-placeholder, .error-placeholder {
    color: var(--secondary-text-color);
    font-style: italic;
    padding: 10px 0;
}
.error-placeholder {
    color: var(--danger-color);
}

.review-author-info {
    text-align: center;
    margin-top: -15px; /* Para acercarlo un poco al título del plato si quieres */
    margin-bottom: 20px;
    font-size: 0.9em;
    color: var(--secondary-text-color); /* O el color que prefieras */
}

.review-author-info strong {
    color: var(--text-color); /* O un color de acento */
    font-weight: 600;
}



/* En style.css */

.search-page-container h1.brand-title {
    font-size: clamp(2.5em, 7vw, 3.5em); /* Un poco más pequeño que el de index */
    margin-bottom: 25px;
}

.search-input-area {
    display: flex;
    gap: 10px;
    margin-bottom: 25px;
}

.large-search-input {
    padding: 15px 20px; /* Más grande */
    font-size: 1.1em;
    flex-grow: 1;
}

.search-input-area .submit-button {
    flex-shrink: 0; /* Para que el botón no se encoja */
    padding: 15px 25px;
}

.entity-type-filters {
    margin-bottom: 20px;
    text-align: center; /* Centrar los botones de tipo */
}
.entity-type-filters p {
    margin-bottom: 10px;
    font-weight: 500;
}
.entity-type-btn { /* Hereda de .tag-filter-button pero podemos especializar */
    margin: 0 5px 10px 5px; /* Espacio alrededor */
    /* Estilos para 'active' se pueden manejar con la clase .selected que ya tienes para .tag-filter-button */
}
.entity-type-btn.active { /* O usa .selected si reutilizas esa clase */
    background-color: var(--accent-color-secondary);
    color: var(--main-button-text);
    border: 2px solid var(--accent-color-secondary);
    border-color: var(--accent-color-primary);
    color: white;
}


.advanced-filters-trigger {
    text-align: center;
    margin-bottom: 30px;
}

.search-results-container {
    margin-top: 20px;
    /* Aquí irán los estilos para las tarjetas de resultados */
}
.search-placeholder {
    color: var(--secondary-text-color);
    font-style: italic;
    padding: 20px;
    text-align: center;
}

/* Estilos para el modal de filtros (ya tienes estilos base para .modal y .modal-content) */
#advanced-filters-content .form-group {
    margin-bottom: 15px;
}
#advanced-filters-content label {
    font-size: 0.95em;
}
#advanced-filters-content .form-input, 
#advanced-filters-content select { /* Si usas select para categorías o insignias */
    font-size: 0.95em;
}

#sort-order-select {
    max-width: 250px; /* Evita que sea demasiado ancho */
}
.sort-controls-container {
    display: flex;
    justify-content: flex-end; /* Alinea el control a la derecha */
    align-items: center;
    gap: 10px;
    margin-top: 20px;
    margin-bottom: 0;
}

.sort-controls-container label {
    margin-bottom: 0; /* Quitamos el margen inferior de la etiqueta */
    font-weight: 500;
}


/* --- Estilos para Tarjetas de Resultado de Búsqueda --- */

.search-results-container {
    text-align: left; /* Para que las tarjetas se alineen a la izquierda */
    margin-top: 0px;
}

.search-card {
    display: flex;
    align-items: center;
    gap: 15px;
    background-color: var(--container-bg-secondary, rgba(23, 38, 63, 0.85));
    padding: 8px;
    padding-left: 15px;
    border-radius: var(--border-radius-medium, 8px);
    margin-bottom: 2px;
    text-decoration: none;
    color: var(--text-color);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    border: 1px solid var(--border-color-light, rgba(255, 255, 255, 0.1));
}

.search-card:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-elevation-medium, 0 6px 12px rgba(0,0,0,0.2));
}

.search-card__icon-container {
    flex-shrink: 0;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgba(var(--accent-color-primary-rgb), 0.1);
    border-radius: 50%;
    font-size: 1.2em;
    color: var(--accent-color-primary);
}

.search-card__icon-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
}

.search-card__content {
    flex-grow: 1;
    overflow: hidden; /* Para manejar textos largos */
}

.search-card__title {
    margin: 0 0 8px 0;
    font-size: 1.1em;
    font-weight: 600;
    color: var(--title-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.search-card__tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.info-tag {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background-color: var(--input-bg, rgba(0, 0, 0, 0.35));
    padding: 4px 10px;
    border-radius: 20px; /* Estilo "píldora" */
    font-size: 0.8em;
    font-weight: 500;
    line-height: 1.4;
    color: var(--secondary-text-color, rgba(224, 224, 224, 0.7));
}

.info-tag i {
    opacity: 0.8;
}

/* Modificadores de color para cada tipo de etiqueta */
.info-tag--list {
    background-color: rgba(var(--accent-color-secondary-rgb), 0.15);
    color: var(--accent-color-secondary);
}

.info-tag--user {
    background-color: rgba(var(--accent-color-tertiary-rgb), 0.15);
    color: var(--accent-color-tertiary);
}

.info-tag--place {
    background-color: rgba(var(--accent-color-quaternary-rgb), 0.15);
    color: var(--accent-color-quaternary);
}

.info-tag--item {
    background-color: rgba(var(--accent-color-quinary-rgb), 0.15);
    color: var(--accent-color-quinary);
}

/* --- Estilos para la Página de Perfil y Modales (NUEVO) --- */

.profile-page-container .brand-title {
    display: none; /* Ocultamos el título genérico para dar paso a la cabecera */
}

/* Nueva cabecera de perfil */
.user-info-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    padding: clamp(20px, 5vw, 40px);
    background: var(--container-bg-secondary);
    border-radius: var(--border-radius-large);
    margin-bottom: 30px;
    text-align: center;
}

.profile-picture-container {
    position: relative;
}

.profile-picture {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    object-fit: cover;
    border: 4px solid var(--accent-color-primary);
    box-shadow: var(--shadow-elevation-medium);
    background-color: var(--primary-bg);
}

.profile-details h2 {
    margin: 10px 0 5px 0;
    font-size: 2em;
    color: var(--title-color);
}

.profile-details #profile-username-display {
    color: var(--secondary-text-color);
    font-size: 1.1em;
    margin-bottom: 10px;
}

.profile-details #profile-location-display {
    color: var(--secondary-text-color);
    font-size: 0.9em;
    margin-bottom: 15px;
}
.profile-details #profile-location-display i {
    margin-right: 6px;
    color: var(--accent-color-tertiary);
}

.profile-details #profile-bio-display {
    margin-top: 15px;
    max-width: 600px;
    line-height: 1.6;
    color: var(--text-color);
}

.edit-profile-button {
    margin-top: 20px;
}

/* Estilos para el Modal */
.modal {
    display: none; /* Oculto por defecto */
    position: fixed; 
    z-index: 1050; /* Por encima de todo */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto; 
    background-color: rgba(0,0,0,0.6); /* Fondo oscuro semitransparente */
    align-items: center;
    justify-content: center;
}

.modal.active {
    display: flex; /* Se muestra con flex para centrar */
}

.modal-content {
    background-color: var(--primary-bg);
    margin: auto;
    padding: clamp(20px, 4vw, 40px);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-large);
    box-shadow: var(--shadow-elevation-high);
    width: 90%;
    max-width: 550px;
    position: relative;
    animation: fadeInUpScale 0.3s ease-out forwards;
}

.close-button {
    color: var(--secondary-text-color);
    position: absolute;
    top: 15px;
    right: 25px;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.2s ease;
}

.close-button:hover,
.close-button:focus {
    color: var(--danger-color);
    text-decoration: none;
}

/* Mensajes dentro del modal */
#modal-message-area {
    margin-bottom: 15px;
    padding: 12px;
    border-radius: var(--border-radius-small);
    font-size: 0.9em;
    display: none; /* Oculto por defecto */
}
#modal-message-area.success {
    background-color: rgba(var(--accent-color-tertiary-rgb), 0.15);
    color: var(--accent-color-tertiary);
}
#modal-message-area.error {
    background-color: rgba(var(--danger-color-rgb), 0.15);
    color: var(--danger-color);
}

/* Preview de imagen en el modal */
#edit-photo-preview img {
    max-width: 150px;
    max-height: 150px;
    border-radius: 50%;
    object-fit: cover;
    margin: 10px auto;
    display: block;
    border: 2px solid var(--border-color);
}

@media (min-width: 768px) {
    .user-info-card {
        flex-direction: row;
        text-align: left;
    }
}

/* Añadir estos estilos para las cards de búsqueda mejoradas */

.search-card {
    display: flex;
    padding: 1rem;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    margin-bottom: 1rem;
    background: var(--card-background);
    transition: all 0.2s ease;
    text-decoration: none;
    color: inherit;
}

.search-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    border-color: var(--primary-color);
}

.search-card__icon-container {
    flex-shrink: 0;
    width: 60px;
    height: 60px;
    margin-right: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    background: var(--background-secondary);
}

.search-card__icon {
    font-size: 1.5rem;
    color: var(--text-secondary);
}

.search-card__avatar,
.search-card__image {
    width: 60px;
    height: 60px;
    border-radius: 8px;
    object-fit: cover;
}

.search-card__content {
    flex: 1;
    min-width: 0;
}

.search-card__title {
    margin: 0 0 0.5rem 0;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    line-height: 1.3;
}

.search-card__description {
    margin: 0 0 0.75rem 0;
    color: var(--text-secondary);
    font-size: 0.9rem;
    line-height: 1.4;
}

.search-card__tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
}

.info-tag {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.25rem 0.5rem;
    background: var(--background-secondary);
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--text-secondary);
}

.info-tag i {
    font-size: 0.7rem;
}

/* Colores específicos para diferentes tipos de tags */
.info-tag--list {
    background: #e3f2fd;
    color: #1976d2;
}

.info-tag--user {
    background: #f3e5f5;
    color: #7b1fa2;
}

.info-tag--place {
    background: #e8f5e8;
    color: #388e3c;
}

.info-tag--item {
    background: #fff3e0;
    color: #f57c00;
}

.info-tag--public {
    background: #e8f5e8;
    color: #2e7d32;
}

.info-tag--private {
    background: #ffebee;
    color: #c62828;
}

.info-tag--rating {
    background: #fff8e1;
    color: #f9a825;
}

.search-card__meta {
    margin-top: 0.5rem;
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.search-card__badges,
.search-card__user-tags,
.search-card__place-types {
    display: flex;
    flex-wrap: wrap;
    gap: 0.25rem;
    margin-top: 0.5rem;
}

.badge {
    padding: 0.2rem 0.4rem;
    border-radius: 8px;
    font-size: 0.7rem;
    font-weight: 600;
    background: linear-gradient(135deg, #ffd700, #ffb300);
    color: #333;
}

.user-tag,
.place-type-tag {
    padding: 0.2rem 0.4rem;
    background: var(--primary-color-light);
    color: var(--primary-color);
    border-radius: 8px;
    font-size: 0.7rem;
    font-weight: 500;
}

.search-card__rating {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 0.5rem;
}

.rating-stars {
    display: flex;
    gap: 0.1rem;
}

.star-filled {
    color: #ffc107;
}

.star-half {
    color: #ffc107;
}

.star-empty {
    color: #e0e0e0;
}

.rating-text {
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text-secondary);
}

.search-card__rating-breakdown {
    margin-top: 0.5rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
}

.criteria-rating {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.75rem;
}

.criteria-name {
    color: var(--text-secondary);
    font-weight: 500;
}

.criteria-stars {
    display: flex;
    gap: 0.05rem;
}

.criteria-stars i {
    font-size: 0.6rem;
}

/* Responsive */
@media (max-width: 768px) {
    .search-card {
        flex-direction: column;
        text-align: center;
    }
    
    .search-card__icon-container {
        margin: 0 auto 1rem auto;
    }
    
    .search-card__tags {
        justify-content: center;
    }
}


/* Añadir/actualizar estos estilos */

.tag-filter-button.active i,
.tag-filter-button.selected i {
    transform: scale(1.05);
}

/* Estilos específicos para botones de categoría de etiquetas */
.category-tag-button {
    display: inline-block;
    padding: 0.4rem 0.8rem;
    margin: 0.2rem;
    border: 2px solid var(--border-color);
    background: var(--background-primary);
    color: var(--text-secondary);
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    text-decoration: none;
}

.category-tag-button:hover {
    border-color: var(--accent-color-secondary);
    background: rgba(var(--accent-color-secondary-rgb), 0.1);
    color: var(--accent-color-secondary);
    transform: translateY(-1px);
}

.category-tag-button.active {
    border-color: var(--accent-color-secondary);
    background: var(--accent-color-secondary);
    color: white;
    font-weight: 600;
    box-shadow: 0 2px 8px rgba(var(--accent-color-secondary-rgb), 0.3);
}

/* Mejoras para las cards de búsqueda */
.search-card {
    display: flex;
    padding: 1.25rem;
    border: 1px solid var(--border-color);
    border-radius: 12px;
    margin-bottom: 1rem;
    background: var(--card-background);
    transition: all 0.3s ease;
    text-decoration: none;
    color: inherit;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.search-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    border-color: var(--primary-color);
}

.search-card__icon-container {
    flex-shrink: 0;
    width: 70px;
    height: 70px;
    margin-right: 1.25rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 12px;
    background: var(--background-secondary);
    border: 1px solid var(--border-color);
}

.search-card__icon {
    font-size: 1.75rem;
    color: var(--text-secondary);
}

.search-card__avatar,
.search-card__image {
    width: 70px;
    height: 70px;
    border-radius: 12px;
    object-fit: cover;
    border: 1px solid var(--border-color);
}

.search-card__content {
    flex: 1;
    min-width: 0;
}

.search-card__title {
    margin: 0 0 0.5rem 0;
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1.3;
}

.search-card__description {
    margin: 0 0 1rem 0;
    color: var(--text-secondary);
    font-size: 0.95rem;
    line-height: 1.5;
}

.search-card__tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
}

.info-tag {
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    padding: 0.4rem 0.75rem;
    background: var(--background-secondary);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text-secondary);
    transition: all 0.2s ease;
}

.info-tag:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.info-tag i {
    font-size: 0.75rem;
}

/* Colores específicos para diferentes tipos de tags con mejor contraste */
.info-tag--list {
    background: linear-gradient(135deg, #e3f2fd, #bbdefb);
    color: #0d47a1;
    border-color: #2196f3;
}

.info-tag--user {
    background: linear-gradient(135deg, #f3e5f5, #e1bee7);
    color: #4a148c;
    border-color: #9c27b0;
}

.info-tag--place {
    background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
    color: #1b5e20;
    border-color: #4caf50;
}

.info-tag--item {
    background: linear-gradient(135deg, #fff3e0, #ffe0b2);
    color: #e65100;
    border-color: #ff9800;
}

.info-tag--public {
    background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
    color: #1b5e20;
    border-color: #4caf50;
}

.info-tag--private {
    background: linear-gradient(135deg, #ffebee, #ffcdd2);
    color: #b71c1c;
    border-color: #f44336;
}

.info-tag--rating {
    background: linear-gradient(135deg, #fff8e1, #ffecb3);
    color: #f57f17;
    border-color: #ffc107;
}

.info-tag--category,
.info-tag--count,
.info-tag--followers,
.info-tag--reviews,
.info-tag--lists,
.info-tag--location,
.info-tag--region,
.info-tag--price {
    background: var(--background-secondary);
    color: var(--text-secondary);
    border-color: var(--border-color);
}

/* Mejoras para el modal de filtros avanzados */
.advanced-filters-content {
    max-height: 60vh;
    overflow-y: auto;
    padding: 1rem 0;
}

.filter-category-section {
    margin-bottom: 1.5rem;
    padding: 1rem;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    background: var(--background-secondary);
}

.filter-category-title {
    margin: 0 0 1rem 0;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.category-tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 1rem;
}

.category-tag-button {
    padding: 0.4rem 0.8rem;
    border: 2px solid var(--border-color);
    background: var(--background-primary);
    color: var(--text-secondary);
    border-radius: 16px;
    font-size: 0.8rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.category-tag-button:hover {
    border-color: var(--primary-color);
    background: var(--primary-color-light);
    color: var(--primary-color);
}

.category-tag-button.active {
    border-color: var(--primary-color);
    background: var(--primary-color);
    color: white;
}

/* Tema oscuro */
[data-theme="dark"] .info-tag {
    background: var(--background-secondary);
    border-color: var(--border-color);
    color: var(--text-secondary);
}

[data-theme="dark"] .info-tag--list {
    background: rgba(33, 150, 243, 0.2);
    color: #64b5f6;
    border-color: #2196f3;
}

[data-theme="dark"] .info-tag--user {
    background: rgba(156, 39, 176, 0.2);
    color: #ba68c8;
    border-color: #9c27b0;
}

[data-theme="dark"] .info-tag--place {
    background: rgba(76, 175, 80, 0.2);
    color: #81c784;
    border-color: #4caf50;
}

[data-theme="dark"] .info-tag--item {
    background: rgba(255, 152, 0, 0.2);
    color: #ffb74d;
    border-color: #ff9800;
}

/* Responsive */
@media (max-width: 768px) {
    .search-card {
        flex-direction: column;
        text-align: center;
        padding: 1rem;
    }
    
    .search-card__icon-container {
        margin: 0 auto 1rem auto;
        width: 60px;
        height: 60px;
    }
    
    .search-card__avatar,
    .search-card__image {
        width: 60px;
        height: 60px;
    }
    
    .search-card__tags {
        justify-content: center;
    }
    
    .entity-type-filters {
        text-align: center;
    }
    
    .tag-filter-button {
        margin: 0.25rem;
        font-size: 0.8rem;
        padding: 0.4rem 0.8rem;
    }
}

/* ===============================================
   ESTILOS PARA ETIQUETAS DINÁMICAS
   =============================================== */

/* Estilos para estados de carga y error en etiquetas */
.text-error {
    color: #f44336 !important;
}

.category-tags-container .fa-spinner {
    margin-right: 0.5rem;
}

/* Tema oscuro para texto de error */
[data-theme="dark"] .text-error {
    color: #ff6b6b !important;
}

/* ===============================================
   ESTILOS PARA TARJETAS DE ELEMENTOS MEJORADAS
   =============================================== */

/* Tarjeta de elemento específica */
.search-card--item {
    min-height: auto;
}

.search-card__header {
    margin-bottom: 0.75rem;
}

.search-card__restaurant {
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin: 0.25rem 0 0 0;
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.search-card__restaurant i {
    font-size: 0.75rem;
    color: var(--accent-color);
}

/* Rating summary compacto */
.search-card__rating-summary {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.75rem;
    padding: 0.5rem;
    background: var(--background-secondary);
    border-radius: 8px;
}

.overall-rating {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.rating-value {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--primary-color);
}

.rating-stars {
    display: flex;
    gap: 0.1rem;
}

.price-tag {
    background: var(--accent-color-tertiary);
    color: white;
    padding: 0.25rem 0.5rem;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 600;
}

/* Barras de criterios compactas */
.criteria-bars {
    margin-bottom: 0.75rem;
}

.criteria-bar {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.4rem;
    font-size: 0.85rem;
}

.criteria-label {
    min-width: 60px;
    font-weight: 500;
    color: var(--text-secondary);
    font-size: 0.8rem;
}

.criteria-progress {
    flex: 1;
    height: 6px;
    background: var(--border-color);
    border-radius: 3px;
    overflow: hidden;
}

.criteria-fill {
    height: 100%;
    background: linear-gradient(90deg, #ff6b6b 0%, #ffa726 50%, #66bb6a 100%);
    border-radius: 3px;
    transition: width 0.3s ease;
}

.criteria-value {
    min-width: 30px;
    text-align: right;
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.8rem;
}

/* Tags como pills */
.tag-pill {
    display: inline-block;
    background: var(--primary-color-light);
    color: var(--primary-color);
    padding: 0.2rem 0.6rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 500;
    margin-right: 0.4rem;
    margin-bottom: 0.2rem;
}

/* Meta información compacta */
.search-card__meta {
    display: flex;
    flex-direction: column;
    gap: 0.3rem;
    margin-top: 0.5rem;
    padding-top: 0.5rem;
    border-top: 1px solid var(--border-color);
}

.meta-item {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.meta-item i {
    font-size: 0.7rem;
    color: var(--accent-color);
    min-width: 12px;
}

.notes-preview {
    font-style: italic;
    opacity: 0.8;
}

/* Tema oscuro para elementos */
[data-theme="dark"] .search-card__rating-summary {
    background: var(--background-tertiary);
}

[data-theme="dark"] .criteria-progress {
    background: var(--background-tertiary);
}

[data-theme="dark"] .tag-pill {
    background: rgba(var(--primary-color-rgb), 0.2);
    color: var(--primary-color-light);
}

/* Mejoras para las calificaciones con colores */
.overall-rating {
    padding: 0.75rem;
    border-radius: 8px;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.rating-value {
    font-size: 1.1rem;
    font-weight: 700;
    min-width: 60px;
}

.review-count {
    font-size: 0.8rem;
    color: var(--text-secondary);
    font-weight: 500;
}

.criteria-rating {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.25rem;
}

.criteria-label {
    font-size: 0.8rem;
    font-weight: 500;
    min-width: 80px;
    color: var(--text-secondary);
}

.criteria-progress {
    flex: 1;
    height: 6px;
    background: var(--border-color);
    border-radius: 3px;
    overflow: hidden;
    min-width: 60px;
}

.criteria-fill {
    height: 100%;
    border-radius: 3px;
    transition: width 0.3s ease;
}

.criteria-value {
    font-size: 0.8rem;
    font-weight: 600;
    min-width: 35px;
    text-align: right;
}

.search-card__restaurant {
    font-size: 0.9rem;
    color: var(--accent-color-tertiary);
    font-weight: 500;
    margin: 0.25rem 0;
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.search-card__restaurant i {
    font-size: 0.8rem;
}

.search-card__rating-breakdown {
    margin: 0.75rem 0;
    padding: 0.5rem;
    background: rgba(var(--text-color-rgb, 255,255,255), 0.02);
    border-radius: 6px;
    border: 1px solid var(--border-color);
}

/* ===== PLACE DETAIL PAGE ===== */

/* Place Information Card */
.place-info-card {
    background: var(--container-bg);
    border-radius: var(--border-radius-large);
    padding: 24px;
    margin-bottom: 24px;
    box-shadow: var(--shadow-elevation-low);
    border: 1px solid var(--border-color-light);
}

.place-header {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
}

.place-image-container {
    flex-shrink: 0;
    width: 120px;
    height: 120px;
    border-radius: var(--border-radius-medium);
    overflow: hidden;
    background: var(--input-bg);
    border: 1px solid var(--border-color-light);
}

.place-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.place-image-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--secondary-text-color);
    font-size: 2rem;
}

.place-details {
    flex: 1;
    min-width: 0;
}

.place-name {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--text-color);
    margin: 0 0 12px 0;
    line-height: 1.2;
}

.place-meta {
    margin-bottom: 16px;
}

.place-address {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--secondary-text-color);
    margin-bottom: 8px;
    font-size: 0.95rem;
}

.place-address i {
    color: var(--accent-color-primary);
}

.place-types {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.place-type-tag {
    background: var(--accent-color-primary);
    color: var(--main-button-text);
    padding: 4px 8px;
    border-radius: var(--border-radius-small);
    font-size: 0.8rem;
    font-weight: 500;
}

.place-actions {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
}

.place-stats {
    display: flex;
    justify-content: space-around;
    padding-top: 20px;
    border-top: 1px solid var(--border-color-light);
}

.stat-item {
    text-align: center;
}

.stat-value {
    display: block;
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--accent-color-primary);
    line-height: 1;
}

.stat-label {
    display: block;
    font-size: 0.85rem;
    color: var(--secondary-text-color);
    margin-top: 4px;
}

/* Reviews Section */
.reviews-section {
    background: var(--container-bg);
    border-radius: var(--border-radius-large);
    padding: 24px;
    box-shadow: var(--shadow-elevation-low);
    border: 1px solid var(--border-color-light);
}

.section-title {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.4rem;
    font-weight: 600;
    color: var(--text-color);
    margin: 0 0 20px 0;
}

.section-title i {
    color: var(--accent-color-primary);
}

.filters-bar {
    display: flex;
    gap: 12px;
    margin-bottom: 24px;
    flex-wrap: wrap;
}

.filters-bar .form-input {
    flex: 1;
    min-width: 200px;
}

/* List Groups */
.list-group {
    margin-bottom: 32px;
}

.list-group:last-child {
    margin-bottom: 0;
}

.list-group-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 2px solid var(--accent-color-primary);
}

.list-name {
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 0;
    font-size: 1.2rem;
    font-weight: 600;
}

.list-name a {
    color: var(--accent-color-primary);
    text-decoration: none;
    transition: color 0.2s ease;
}

.list-name a:hover {
    color: var(--accent-color-secondary);
}

.list-name i {
    color: var(--accent-color-primary);
}

.review-count {
    background: var(--accent-color-primary);
    color: var(--main-button-text);
    padding: 4px 8px;
    border-radius: var(--border-radius-small);
    font-size: 0.8rem;
    font-weight: 500;
}

/* Reviews Grid */
.reviews-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 16px;
}

.review-card {
    background: var(--input-bg);
    border: 1px solid var(--border-color-light);
    border-radius: var(--border-radius-medium);
    padding: 16px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.review-card:hover {
    box-shadow: var(--shadow-elevation-medium);
    transform: translateY(-2px);
    border-color: var(--accent-color-primary);
}

.review-header {
    margin-bottom: 12px;
}

.review-item {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 12px;
}

.item-name {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-color);
    margin: 0;
    flex: 1;
    line-height: 1.3;
}

.review-rating {
    padding: 6px 10px;
    border-radius: var(--border-radius-small);
    text-align: center;
    min-width: 60px;
}

.rating-value {
    font-size: 0.9rem;
    font-weight: 700;
}

.criteria-ratings {
    margin-bottom: 12px;
}

.criteria-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 4px 0;
    font-size: 0.85rem;
}

.criteria-label {
    color: var(--secondary-text-color);
}

.criteria-value {
    font-weight: 600;
}

.review-notes {
    margin-bottom: 12px;
}

.review-notes p {
    color: var(--secondary-text-color);
    font-size: 0.9rem;
    line-height: 1.4;
    margin: 0;
}

.review-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-bottom: 12px;
}

.tag-pill {
    background: var(--accent-color-tertiary);
    color: white;
    padding: 3px 8px;
    border-radius: var(--border-radius-small);
    font-size: 0.75rem;
    font-weight: 500;
}

.review-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.8rem;
    color: var(--secondary-text-color);
    padding-top: 8px;
    border-top: 1px solid var(--border-color-light);
}

.review-date, .review-price {
    display: flex;
    align-items: center;
    gap: 4px;
}

/* Empty and Error States */
.empty-state, .error-state {
    text-align: center;
    padding: 40px 20px;
    color: var(--secondary-text-color);
}

.empty-state i, .error-state i {
    font-size: 3rem;
    margin-bottom: 16px;
    color: var(--accent-color-primary);
}

.empty-state h3, .error-state h3 {
    font-size: 1.2rem;
    margin: 0 0 8px 0;
    color: var(--text-color);
}

.empty-state p, .error-state p {
    margin: 0;
    font-size: 0.9rem;
}

/* Responsive Design */
@media (max-width: 768px) {
    .place-header {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    .place-image-container {
        width: 100px;
        height: 100px;
    }

    .place-name {
        font-size: 1.5rem;
    }

    .place-stats {
        flex-direction: column;
        gap: 16px;
    }

    .stat-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        text-align: left;
    }

    .stat-value {
        font-size: 1.2rem;
    }

    .filters-bar {
        flex-direction: column;
    }

    .reviews-grid {
        grid-template-columns: 1fr;
    }

    .list-group-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }
}

@media (max-width: 480px) {
    .place-info-card, .reviews-section {
        padding: 16px;
        margin-bottom: 16px;
    }

    .review-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }

    .review-rating {
        align-self: flex-end;
    }
}

/* ===== PLACE DETAIL PAGE - ADDITIONAL STYLES ===== */

/* Loading and Error States */
.loading-state, .error-state {
    text-align: center;
    padding: 60px 20px;
    background: var(--container-bg);
    border-radius: var(--border-radius-large);
    margin: 20px 0;
}

.loading-spinner {
    font-size: 2rem;
    color: var(--accent-color-primary);
    margin-bottom: 16px;
}

.error-message {
    color: var(--text-color);
}

.error-message h3 {
    color: var(--danger-color);
    margin: 16px 0;
}

.error-message i {
    font-size: 3rem;
    color: var(--danger-color);
    margin-bottom: 16px;
}

/* Enhanced Place Meta Information */
.place-phone, .place-website, .place-hours, .place-price-level {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--secondary-text-color);
    margin-bottom: 8px;
    font-size: 0.95rem;
}

.place-phone i, .place-website i, .place-hours i, .place-price-level i {
    color: var(--accent-color-primary);
    width: 16px;
}

.place-phone a, .place-website a {
    color: var(--accent-color-primary);
    text-decoration: none;
    transition: color 0.2s ease;
}

.place-phone a:hover, .place-website a:hover {
    color: var(--accent-color-secondary);
}

.hours-status.open {
    color: var(--accent-color-tertiary);
    font-weight: 500;
}

.hours-status.closed {
    color: var(--danger-color);
    font-weight: 500;
}

/* Enhanced Place Image */
.place-image-placeholder {
    flex-direction: column;
    gap: 8px;
}

.place-image-placeholder span {
    font-size: 0.8rem;
    color: var(--secondary-text-color);
}

/* Review List Groups */
.review-list-group {
    margin-bottom: 32px;
    background: var(--input-bg);
    border-radius: var(--border-radius-medium);
    padding: 20px;
    border: 1px solid var(--border-color-light);
}

.review-list-group:last-child {
    margin-bottom: 0;
}

.reviews-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 16px;
    margin-top: 16px;
}

/* Review Cards */
.review-card {
    background: var(--container-bg);
    border-radius: var(--border-radius-medium);
    padding: 16px;
    border: 1px solid var(--border-color-light);
    cursor: pointer;
    transition: all 0.2s ease;
}

.review-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-elevation-medium);
    border-color: var(--accent-color-primary);
}

.review-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}

.review-rating {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9rem;
}

.rating-number {
    font-weight: 600;
}

.review-date {
    font-size: 0.8rem;
    color: var(--secondary-text-color);
}

.review-content {
    color: var(--text-color);
}

.item-name {
    font-size: 1.1rem;
    font-weight: 600;
    margin: 0 0 8px 0;
    color: var(--text-color);
}

/* Criteria Ratings */
.criteria-ratings {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin: 8px 0;
}

.criteria-item {
    display: flex;
    align-items: center;
    gap: 4px;
    background: var(--input-bg);
    padding: 4px 8px;
    border-radius: var(--border-radius-small);
    font-size: 0.8rem;
}

.criteria-label {
    color: var(--secondary-text-color);
}

.criteria-value {
    font-weight: 600;
}

/* Review Notes */
.review-notes {
    margin: 8px 0;
}

.review-notes p {
    margin: 0;
    font-size: 0.9rem;
    line-height: 1.4;
    color: var(--secondary-text-color);
}

/* Review Tags */
.review-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    margin-top: 8px;
}

.tag-pill {
    background: var(--accent-color-secondary);
    color: var(--main-button-text);
    padding: 2px 6px;
    border-radius: var(--border-radius-small);
    font-size: 0.7rem;
    font-weight: 500;
}

/* Empty State */
.empty-state {
    text-align: center;
    padding: 40px 20px;
    color: var(--secondary-text-color);
}

.empty-state i {
    font-size: 3rem;
    color: var(--accent-color-primary);
    margin-bottom: 16px;
}

.empty-state h4 {
    color: var(--text-color);
    margin: 16px 0 8px 0;
}

/* Success and Error Colors */
.success-color { color: var(--accent-color-tertiary); }
.warning-color { color: var(--accent-color-primary); }
.error-color { color: var(--danger-color); }

/* Responsive Design for Place Detail */
@media (max-width: 768px) {
    .place-header {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    .place-image-container {
        width: 150px;
        height: 150px;
    }

    .place-actions {
        justify-content: center;
    }

    .place-stats {
        flex-wrap: wrap;
        gap: 16px;
    }

    .reviews-grid {
        grid-template-columns: 1fr;
    }

    .filters-bar {
        flex-direction: column;
    }

    .filters-bar .form-input {
        min-width: auto;
    }
}

@media (max-width: 480px) {
    .place-info-card, .reviews-section {
        padding: 16px;
        margin-bottom: 16px;
    }

    .place-name {
        font-size: 1.5rem;
    }

    .section-title {
        font-size: 1.2rem;
    }

    .review-card {
        padding: 12px;
    }
}

/* Modal Styles 
    // +++++Vamos a incluir un pequeño foro para la lista actual++++++ */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.7);
}

.modal-content {
    background-color: var(--container-bg-secondary);
    margin: 5% auto;
    padding: 30px;
    border-radius: 8px;
    width: 80%;
    max-width: 700px;
    max-height: 900px;
    overflow-y: auto;
    box-shadow: 0 15px 8px rgba(0, 0, 0, 0.2);
}

.close-modal {
    float: right;
    font-size: 28px;
    cursor: pointer;
}

/* Agregar al final del archivo */

/* Estilos mejorados para mensajes del foro */
.forum-message {
    border-bottom: 1px solid var(--border-color-light);
    padding: 15px 0;
    margin-bottom: 10px;
}

.message-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 5px;
}

.message-text {
    margin: 0;
    padding-left: 10px;
    line-height: 1.5;
}

.no-messages {
    text-align: center;
    color: var(--secondary-text-color);
    font-style: italic;
    padding: 20px;
}

.forum-input-area {
    margin-top: 20px;
    display: flex;
    gap: 10px;
    align-items: flex-end;
}

#new-forum-message {
    flex-grow: 1;
    min-height: 80px;
    resize: vertical;
}

#send-forum-message {
    height: 42px;
}

/* Añadir estos estilos para asegurar visibilidad */
.message-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 5px;
}

.delete-message-btn {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.2em;
    padding: 5px;
    color: #ff6b6b;
    opacity: 0.7;
    transition: opacity 0.2s;
}

.delete-message-btn:hover {
    opacity: 1;
}

#follow-unfollow-btn.secondary-button {
    background-color: var(--accent-color-tertiary); /* Un verde para indicar "activo" */
    color: var(--main-button-text);
}

#follow-unfollow-btn.secondary-button:hover {
    background-color: #05a984; /* Un verde más oscuro */
}

/* ============================================= */
/* === Componente: Tarjeta de Reseña Perfil === */
/* ============================================= */
.profile-review-card {
    background-color: var(--container-bg-secondary);
    padding: 15px;
    margin-bottom: 15px;
    border-radius: var(--border-radius-medium);
    border: 1px solid var(--border-color-light);
    transition: box-shadow 0.2s ease, transform 0.2s ease;
    display: flex;
    gap: 15px;
    text-align: left;
}

.profile-review-card:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-elevation-medium);
}

.profile-review-card__image {
    flex-shrink: 0;
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: var(--border-radius-small);
    background-color: var(--icon-placeholder-bg);
}

.profile-review-card__content {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
}

.profile-review-card__title {
    font-size: 1.1em;
    font-weight: 600;
    margin: 0 0 8px 0;
    color: var(--title-color);
}

.profile-review-card__title a {
    text-decoration: none;
    color: inherit;
    transition: color 0.2s ease;
}

.profile-review-card__title a:hover {
    color: var(--accent-color-primary);
}

.profile-review-card__meta {
    margin-top: auto; /* Empuja las meta-tags hacia abajo */
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

/* =================================== */
/* === Componente: Info Tag Global === */
/* =================================== */
.info-tag {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background-color: rgba(var(--accent-color-primary-rgb), 0.1);
    color: var(--secondary-text-color);
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.8em;
    font-weight: 500;
    line-height: 1.4;
    text-decoration: none;
    transition: background-color 0.2s ease;
}

.info-tag:hover {
    background-color: rgba(var(--accent-color-primary-rgb), 0.2);
}

.info-tag i {
    opacity: 0.8;
}

.info-tag--list {
    background-color: rgba(var(--accent-color-secondary-rgb), 0.15);
    color: var(--accent-color-secondary);
}
.info-tag--rating {
    background-color: rgba(var(--accent-color-tertiary-rgb), 0.15);
    color: var(--accent-color-tertiary);
    font-weight: bold;
}
.info-tag--rating .fa-star {
    color: var(--accent-color-primary);
}

/* ============================================= */
/* === Componente: Tarjeta de Reseña Perfil === */
/* ============================================= */
#my-reviews-container {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.profile-review-card {
    background-color: var(--container-bg-secondary);
    padding: 15px;
    border-radius: var(--border-radius-medium);
    border: 1px solid var(--border-color-light);
    transition: box-shadow 0.2s ease, transform 0.2s ease;
    display: flex;
    gap: 15px;
    text-align: left;
}

.profile-review-card:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-elevation-medium);
}

.profile-review-card__image {
    flex-shrink: 0;
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: var(--border-radius-small);
    background-color: var(--icon-placeholder-bg);
}

.profile-review-card__content {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
}

.profile-review-card__title {
    font-size: 1.1em;
    font-weight: 600;
    margin: 0 0 8px 0;
    color: var(--title-color);
}

.profile-review-card__title a {
    text-decoration: none;
    color: inherit;
    transition: color 0.2s ease;
}

.profile-review-card__title a:hover {
    color: var(--accent-color-primary);
}

.profile-review-card__meta {
    margin-top: auto; /* Empuja las meta-tags hacia abajo */
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

/* =================================== */
/* === Componente: Info Tag Global === */
/* =================================== */
.info-tag {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background-color: rgba(var(--accent-color-primary-rgb), 0.1);
    color: var(--secondary-text-color);
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.8em;
    font-weight: 500;
    line-height: 1.4;
    text-decoration: none;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.1s ease;
}

.info-tag:hover {
    background-color: rgba(var(--accent-color-primary-rgb), 0.2);
    transform: translateY(-1px);
}

.info-tag i {
    opacity: 0.8;
}

.info-tag--list {
    background-color: rgba(var(--accent-color-secondary-rgb), 0.15);
    color: var(--accent-color-secondary);
}
.info-tag--rating {
    background-color: rgba(var(--accent-color-tertiary-rgb), 0.15);
    color: var(--accent-color-tertiary);
    font-weight: bold;
}
.info-tag--rating .fa-star {
    color: var(--accent-color-primary);
}

body.light-theme .profile-review-card {
    background-color: #FFFFFF;
}

body.light-theme .info-tag {
    background-color: rgba(0,0,0,0.05);
    border: 1px solid rgba(0,0,0,0.1);
}
body.light-theme .info-tag:hover {
    background-color: rgba(0,0,0,0.1);
}

/* =========================================== */
/* === Componente: Super Tarjeta Reseña v2.1 === */
/* =========================================== */

.review-super-card {
    background-color: var(--container-bg);
    border-radius: var(--border-radius-large);
    border: 1px solid var(--border-color-light);
    margin: 2px;
    /* ANTES: max-width: 700px; AHORA: Sin límite para que sea más alargado */
    max-width: 1000px; /* Aumentamos el límite para que no sea infinito en pantallas enormes */
    overflow: hidden;
    text-align: left;
    box-shadow: var(--shadow-elevation-medium);
    transition: box-shadow 0.2s ease, transform 0.2s ease;
    cursor: pointer;
}
.review-super-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-elevation-high);
}

/* --- Cabecera --- */
.review-super-card__header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: 10px 15px;
    background-color: var(--container-bg-secondary);
    border-bottom: 1px solid var(--border-color-light);
}
.review-super-card__title-group {
    margin-right: 15px;
}
.review-super-card__title {
    font-size: 1.1rem; /* Usamos REM para que sea responsive */
    font-weight: 700;
    margin: 0 0 2px 0;
}
.review-super-card__subtitle {
    font-size: 0.85rem; /* Usamos REM */
    color: var(--secondary-text-color);
    margin: 0;
}
.review-super-card__score .score-value {
    font-size: 1.8rem; /* Usamos REM */
}
.review-super-card__score .score-label {
    font-size: 0.7rem; /* Usamos REM */
}

/* --- Cuerpo --- */
.review-super-card__body {
    display: flex;
    gap: 20px;
    padding: 20px;
}
.review-super-card__image-container {
    flex: 0 0 150px; /* Base de 150px, no crece, no se encoge */
    width: 150px;
    height: 150px;
}
.review-super-card__image,
.review-super-card__icon-placeholder {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: var(--border-radius-medium);
}
.review-super-card__icon-placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--icon-placeholder-bg);
    font-size: 3rem;
    color: var(--icon-placeholder-color);
}
.review-super-card__main-content {
    flex: 1 1 auto; /* Permite que el contenido principal crezca */
    min-width: 0; /* Arregla problemas de flexbox con elementos largos */
}

/* --- Barras de Criterios --- */
.criteria-bars-list {
    display: flex;
    flex-direction: column;
    gap: 2px; /* Un poco más de espacio */
    font-size: 0.85rem;
}
.criteria-bar {
    display: flex;
    align-items: center;
    gap: 8px;
}
.criteria-bar__label {
    width: 30%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    opacity: 0.9;
}
.criteria-bar__viz {
    width: 60%;
    display: flex;
    align-items: center;
    gap: 8px;
}
.criteria-bar__bg {
    flex-grow: 1;
    height: 8px;
    background-color: var(--icon-placeholder-bg);
    border-radius: 4px;
    overflow: hidden;
}
.criteria-bar__fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.5s ease-out;
}
.criteria-bar__value {
    font-weight: 700;
    font-size: 0.9em;
}

.review-super-card__section {
    margin-top: 10px;
}

/* --- Footer --- */
.review-super-card__footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap; /* Permite que los elementos se recoloquen si no caben */
    gap: 10px;
    padding: 12px 20px;
    background-color: var(--container-bg-secondary);
    border-top: 1px solid var(--border-color-light);
    font-size: 0.8rem;
    color: var(--secondary-text-color);
}


/* =========================================== */
/* ===         MEDIA QUERY PARA MÓVILES      === */
/* =========================================== */
@media (max-width: 768px) {
    /* Reducimos el tamaño de fuente base para que todo en REM se haga más pequeño */
    :root {
        font-size: 14px;
    }

    .review-super-card__body {
        flex-direction: column; /* Apila la imagen sobre el contenido */
    }

    .review-super-card__image-container {
        width: 100%; /* La imagen ocupa todo el ancho */
        height: auto; /* La altura se ajusta automáticamente */
        aspect-ratio: 16 / 9; /* Mantiene una proporción panorámica */
        flex-basis: auto; /* Reseteamos la base flex */
    }

    .review-super-card__header {
        padding: 12px 15px;
    }
    .review-super-card__body {
        padding: 15px;
        gap: 15px;
    }
    .review-super-card__footer {
        padding: 10px 15px;
    }
}

/* En public/style.css, al final */

.list-view-actions {
    text-align: right;
    margin-bottom: 20px;
}

#show-map-modal-btn {
    padding: 8px 15px;
    font-size: 0.9em;
}

/* Estilos para el contenido del modal del mapa */
.map-modal-content {
    width: 95%;
    height: 85vh; /* Ocupa el 85% de la altura de la pantalla */
    max-width: 1200px;
    padding: 15px;
    display: flex;
    flex-direction: column;
}

.map-modal-content #map-modal-title {
    margin-top: 0;
    margin-bottom: 15px;
    flex-shrink: 0; /* Evita que el título se encoja */
}

#list-map-container {
    flex-grow: 1; /* El mapa ocupa todo el espacio restante */
    border-radius: 8px;
    background-color: #333; /* Un color de fondo mientras carga */
}

/* Para que el mapa de Leaflet se vea bien */
.leaflet-container {
    height: 100%;
    width: 100%;
}

/* En public/style.css - Estilos para los marcadores del mapa por puntuación */

.map-marker-icon {
    font-size: 28px; /* Tamaño del icono */
    text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
    transition: transform 0.2s ease-in-out;
}

.map-marker-icon:hover {
    transform: scale(1.2);
}

.map-marker-gold { color: #FFD700; } /* Oro para los mejores */
.map-marker-silver { color: #C0C0C0; } /* Plata para los buenos */
.map-marker-bronze { color: #CD7F32; } /* Bronce para los decentes */
.map-marker-default { color: var(--accent-color-quaternary); } /* Un color por defecto */


/* ============================================= */
/* === ESTILOS PARA MAPAS Y MARCADORES (V3) === */
/* ============================================= */

/* Contenedor principal de nuestra chincheta personalizada */
.custom-marker {
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 50% 50% 50% 0; /* Forma de gota/pin */
    transform: rotate(-45deg); /* La rotamos para que apunte hacia abajo */
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    border: 2px solid #fff; /* Borde blanco para que destaque */
}

/* El contenido dentro de la chincheta (el número) */
.custom-marker-content {
    font-family: 'Poppins', sans-serif;
    font-weight: 700;
    font-size: 14px;
    color: #fff;
    transform: rotate(45deg); /* Des-rotamos el texto para que se lea bien */
    text-shadow: 1px 1px 2px rgba(0,0,0,0.4);
}

/* Clases de color para el fondo de la chincheta */
.marker-gold { background: linear-gradient(135deg, #FFD700, #FDB813); }
.marker-silver { background: linear-gradient(135deg, #e0e0e0, #BDBDBD); }
.marker-bronze { background: linear-gradient(135deg, #CD7F32, #A0522D); }
.marker-default { background: linear-gradient(135deg, #118AB2, #065A71); }

/* --- Estilos para el Popup del Mapa (Revisado) --- */
.map-popup {
    font-family: 'Poppins', sans-serif;
    width: 180px; /* Ancho fijo para consistencia */
}
.map-popup-img {
    width: 100%;
    height: 100px; /* Altura controlada */
    object-fit: cover;
    border-radius: 6px;
    background-color: #555;
}
.map-popup-content {
    padding-top: 8px;
}
.map-popup-title {
    margin: 0 0 5px 0;
    font-size: 1em; /* Un poco más pequeño para caber bien */
    font-weight: 600;
    color: var(--title-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis; /* Para nombres largos */
}
.map-popup-score {
    font-size: 0.9em;
    color: var(--secondary-text-color);
    margin-bottom: 8px;
}
.map-popup-link {
    font-size: 0.9em;
    font-weight: 500;
    color: var(--accent-color-primary);
    text-decoration: none;
}
.map-popup-link:hover {
    text-decoration: underline;
}

/* Ajustes finos al contenedor del popup de Leaflet */
.leaflet-popup-content-wrapper {
    padding: 1px;
    border-radius: 8px;
    background: var(--container-bg);
}
.leaflet-popup-content {
    margin: 12px !important;
    line-height: 1.4;
}