/* Archivo: style.css (Updated for Listopic - v15.1 fixes) */

/* --- Variables de Color y Diseño --- */
:root {
    --primary-bg: #0A1931; 
    --container-bg: rgba(23, 38, 63, 0.7); /* Fondo de contenedores principales, semi-transparente */
    --text-color: #E0E0E0; 
    --title-color: #FFFFFF; 
    --accent-color-primary: #FFD166; 
    --accent-color-secondary: #f56ead; 
    --accent-color-tertiary: #06D6A0; 
    --accent-color-quaternary: #118AB2; 
    --accent-color-quinary: #FF9A8B; 

    --accent-color-primary-rgb: 255,209,102; /* Para usar en rgba() */
    --accent-color-secondary-rgb: 245,107,173; /* Para usar en rgba() */
    --accent-color-tertiary-rgb: 6,214,160; /* Para usar en rgba() */
    --accent-color-quaternary-rgb: 17,138,178; /* Para usar en rgba() */
    --danger-color-rgb: 217,83,79; /* Para usar en rgba() */

    --footer-bg: rgba(0, 0, 0, 0.4);
    --footer-text-color: rgba(255, 255, 255, 0.7);
    --footer-height: 50px;

    --border-color: rgba(255, 255, 255, 0.2); /* Color de borde general */
    --border-color-light: rgba(255, 255, 255, 0.1); /* Borde más sutil */
    --input-bg: rgba(0, 0, 0, 0.35);
    --input-border: rgba(255, 255, 255, 0.25);
    --input-focus-border: var(--accent-color-primary);
    --main-button-text: #1A1D24; /* UPDATED: Was var(--primary-bg), now dark grey for better contrast on accent BGs */
    --main-button-hover-bg: #fbc02d; /* Hover para botones principales */
    --danger-color: #D9534F; /* Color para acciones peligrosas */
    --danger-hover-bg: #C9302C;
    --disabled-bg: #555;
    --disabled-text-color: #999;

    --container-bg-secondary: rgba(23, 38, 63, 0.85); /* Un poco más opaco que el container-bg principal */

    --border-radius-small: 4px;
    --border-radius-medium: 8px;
    --border-radius-large: 12px;

    --shadow-elevation-low: 0 2px 4px rgba(0,0,0,0.15);
    --shadow-elevation-medium: 0 6px 12px rgba(0,0,0,0.2);
    --shadow-elevation-high: 0 10px 20px rgba(0,0,0,0.25);
    
    --brand-font: 'Poppins', sans-serif; /* Fuente para la marca/títulos principales */
    /* --primary-bg: #1A1D24;  <-- Esta línea estaba en una segunda definición de :root, la he movido/consolidado aquí si es el valor deseado para el tema oscuro. Si #0A1931 es el correcto, elimina esta. Asumiré #0A1931 por ahora. */
    --secondary-text-color: rgba(224, 224, 224, 0.7); /* Ejemplo para tema oscuro */

    /* Nuevas para el placeholder del icono */
    --icon-placeholder-bg: rgba(0, 0, 0, 0.25); /* Fondo para el div del icono */
    --icon-placeholder-color: var(--accent-color-primary); /* Color del icono Font Awesome */

    --primary-bg-rgb-values: 10, 25, 49; /* Para el color oscuro #0A1931 */
    --header-gradient-opacity-bottom: 0.6; /* Opacidad en la parte inferior del header */
    --header-gradient-opacity-top: 0.05;    /* Opacidad en la parte superior (casi transparente) */
    --header-noise-opacity: 0.03;         /* Opacidad de la capa de "ruido" o granulado */
    --header-height: 50px;
}

/* --- App Logo --- */
.app-logo-container {
    position: fixed; /* Se mantiene fijo en la pantalla al hacer scroll */
    top: 15px;
    left: 15px;
    z-index: 1002; /* Para asegurar que esté por encima de la mayoría del contenido, similar al botón de tema */
}

.app-logo {
    height: 70px; /* Ajusta esta altura según el tamaño deseado para tu logo */
    width: auto;  /* Mantiene la proporción */
    display: block; /* Evita espacio extra debajo de la imagen si es inline */
    transition: transform 0.2s ease-in-out, height 0.3s ease; /* Added height transition */
}
.app-logo:hover {
    transform: scale(1.05); /* Un ligero zoom al pasar el ratón */
}
/* Ya no se necesita una segunda definición de :root */

/* Decorative corner blobs (Simplified with CSS) */
body::before, body::after {
    content: '';
    position: fixed;
    border-radius: 50%;
    opacity: 0.5;
    z-index: -1; 
    filter: blur(50px); 
}

body::before { 
    width: clamp(200px, 30vw, 400px);
    height: clamp(200px, 30vw, 400px);
    background-color: var(--accent-color-tertiary); 
    top: -10%;
    left: -10%;
    transform: rotate(30deg);
    animation: slowDrift 20s infinite alternate ease-in-out;
}

body::after { 
    width: clamp(250px, 35vw, 450px);
    height: clamp(250px, 35vw, 450px);
    background-color: var(--accent-color-secondary); 
    bottom: -12%;
    right: -12%;
    transform: rotate(-25deg);
    animation: slowDriftReverse 25s infinite alternate ease-in-out;
}

@keyframes slowDrift {
    0% { transform: translate(0,0) rotate(30deg) scale(1); }
    100% { transform: translate(20px, -15px) rotate(40deg) scale(1.1); }
}
@keyframes slowDriftReverse {
    0% { transform: translate(0,0) rotate(-25deg) scale(1); }
    100% { transform: translate(-18px, 12px) rotate(-35deg) scale(1.08); }
}


/* --- Estilos Generales del Cuerpo --- */
body {
    font-family: 'Poppins', sans-serif;
    color: var(--text-color);
    background-color: var(--primary-bg); 
    background-attachment: fixed;
    margin: 0;
    padding: 20px 20px calc(var(--footer-height) + 20px) 20px;
    /* padding-top: 80px; 
    padding-left: 20px;
    padding-right: 20px;
    padding-bottom: calc(var(--footer-height) + 20px); 
    */
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    box-sizing: border-box;
    line-height: 1.6;
    font-weight: 300;
    overflow-x: hidden; 
    padding-top: var(--header-height); /* Usa la misma variable para el padding */
}

/* --- Título Principal "Listopic" --- */
h1.brand-title { 
    font-family: var(--brand-font);
    font-weight: 700; 
    color: var(--title-color);
    margin-top: 0;
    margin-bottom: 15px; 
    font-size: clamp(3em, 8vw, 4.5em); 
    letter-spacing: 1.5px;
    text-shadow: 2px 2px 5px rgba(0,0,0,0.3);
    text-align: center;
    animation: fadeInUpScale 0.8s ease-out 0.2s backwards;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Estilos para los pétalos del logo */
.logo-petal {
    display: inline-block;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background-color: var(--accent-color);
    position: relative;
    margin: 0 2px;
    opacity: 0,7;
    animation: float 1s ease-in-out infinite;
}

.logo-petal.p1 { animation-delay: 0s; background-color: #ff6b6b; }
.logo-petal.p2 { animation-delay: 0.2s; background-color: #4ecdc4; }
.logo-petal.p3 { animation-delay: 0.4s; background-color: #45b7d1; }
.logo-petal.p4 { animation-delay: 0.6s; background-color: #ff9f43; }
.logo-petal.p5 { animation-delay: 0.8s; background-color: #5f27cd; }

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

/* h1.brand-title .logo-petal { 
    display: inline-block;
    width: 0.5em; 
    height: 0.7em;
    border-radius: 50% 50% 0 0 / 80% 80% 0 0 ; 
    margin: 0 0.1em; 
   transform-origin: bottom center;
    box-shadow: 1px 1px 3px rgba(0,0,0,0.25); 
   transition: transform 0.3s ease-out; 
} */
.logo-petal.p1 { background-color: var(--accent-color-primary); transform: rotate(-60deg) translateY(-0.1em); }
.logo-petal.p2 { background-color: var(--accent-color-secondary); transform: rotate(-30deg) translateY(-0.05em); }
.logo-petal.p3 { background-color: var(--accent-color-tertiary); transform: rotate(0deg); }
.logo-petal.p4 { background-color: var(--accent-color-quaternary); transform: rotate(30deg) translateY(-0.05em); }
.logo-petal.p5 { background-color: var(--accent-color-quinary); transform: rotate(60deg) translateY(-0.1em); }


h1:not(.brand-title), .container h2 { 
    font-family: 'Cormorant Garamond', serif; 
    color: var(--title-color); 
    margin-top: 0; margin-bottom: 25px; 
    font-size: clamp(2.2em, 6vw, 3em); 
    font-weight: 600; letter-spacing: 1px; 
    text-shadow: 1px 1px 4px rgba(0,0,0,0.2); 
    text-align: center; 
    animation: fadeInUpScale 0.8s ease-out 0.2s backwards; 
}
.container h2 { margin-bottom: 30px; }


/* --- Estructura Principal --- */
main { width: 100%; display: flex; flex-direction: column; align-items: center; padding-top: 10px; flex-grow: 1; } /* Reducido padding-top */

.container { 
    /* El .container ahora es solo un limitador de ancho invisible y un agrupador lógico */
    /* Todas las propiedades visuales de "marco" deben estar comentadas o eliminadas */
    /* background-color: var(--container-bg); */ 
    /* padding: clamp(25px, 4vw, 40px) clamp(20px, 5vw, 50px); */
    /* border-radius: 20px; */
    /* border: 1px solid rgba(255, 255, 255, 0.15); */ /* Eliminado/Comentado */
    /* box-shadow: 0 15px 40px rgba(0, 0, 0, 0.35); */ /* Eliminado/Comentado */
    /* backdrop-filter: blur(10px); */ /* Eliminado/Comentado */
    /* -webkit-backdrop-filter: blur(10px); */ /* Eliminado/Comentado */

    max-width: 900px; 
    width: 95%; 
    text-align: center; 
    margin: 0 auto 30px auto; /* Centrado horizontal y margen inferior */
}

/* === ESTILOS PARA LA PÁGINA PRINCIPAL (index.html) === */
.list-collection-container { margin-top: 20px; }
.list-collection-container h2 { font-size: clamp(1.8em, 5vw, 2.5em); margin-bottom: 20px; }
#list-circles-ul { list-style: none; padding: 0; margin: 0 0 30px 0; display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; }
#list-circles-ul li { min-width: 150px; }
#list-circles-ul a { display: flex; flex-direction: column; align-items: center; justify-content: center; width: 130px; height: 130px; padding: 15px; border-radius: 50%; background-color: rgba(255, 255, 255, 0.08); border: 1px solid rgba(255, 255, 255, 0.15); color: var(--text-color); text-decoration: none; transition: transform 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
#list-circles-ul a i { font-size: 2.5em; margin-bottom: 10px; color: var(--accent-color-primary); }
#list-circles-ul a span { font-size: 0.9em; text-align: center; font-weight: 400; display: block; max-width: 100%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
#list-circles-ul a:hover { transform: translateY(-5px) scale(1.05); background-color: rgba(255, 255, 255, 0.15); box-shadow: 0 8px 20px rgba(var(--accent-color-primary-rgb, 255,209,102), 0.3); }
.add-list-button { display: inline-flex; align-items: center; padding: 12px 25px; background-color: transparent; border: 2px dashed var(--accent-color-primary); color: var(--text-color); text-decoration: none; border-radius: 8px; font-size: 1em; font-weight: 400; transition: all 0.3s ease; cursor: pointer; }
.add-list-button i { margin-right: 10px; font-size: 1.2em; color: var(--accent-color-primary); transition: color 0.3s ease; }
.add-list-button:hover { background-color: rgba(var(--accent-color-primary-rgb, 255,209,102), 0.1); border-style: solid; border-color: var(--accent-color-primary); color: var(--accent-color-primary); }
.add-list-button:hover i { color: var(--accent-color-primary); }


/* --- Footer --- */
footer { position: fixed; bottom: 0; left: 0; width: 100%; background-color: var(--footer-bg); color: var(--footer-text-color); text-align: center; padding: 15px 0; font-size: 0.9em; height: var(--footer-height); z-index: 100; box-sizing: border-box; }

/* --- Animations --- */
@keyframes fadeInUpScale { from { opacity: 0; transform: translateY(20px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }


/* Ajustes para elementos movidos fuera del .container en list-view.html */
/* Estos se aplican cuando .table-container y .add-review-button son hijos directos de main */
main > .table-container {
    width: 100%; /* Ocupa el ancho disponible en main, respetando el padding del body */
    /* max-width: 1200px; /* Opcional: si quieres un límite específico más grande que 900px */
    max-width: 1300px; /* Límite para que no sea excesivamente ancha */
    margin-left: auto; margin-right: auto; /* Centrar si el espacio es mayor */
    margin-top: 2px;    /* Espacio respecto a los filtros/búsqueda que están en .container */
    margin-bottom: 20px; /* Espacio antes del botón de añadir */
    box-sizing: border-box; /* Para que el padding del body no cause problemas de ancho */
    /* Los estilos de box-shadow, border-radius, etc., ya están en .table-container */
}

main > .add-review-button.submit-button {
    /* main tiene align-items: center, por lo que el botón se centrará. */
    /* Si quieres darle un ancho máximo o específico, puedes hacerlo aquí. */
    /* Ejemplo: max-width: 300px; */
    /* No es necesario width: 100% a menos que quieras que ocupe toda la línea */
}

/* --- GENERAL FORM STYLES --- */

.form-container { max-width: 700px; }
.form-group { margin-bottom: 20px; text-align: left; }
.form-group label { display: block; margin-bottom: 8px; font-weight: 400; }
.form-input, .form-textarea { width: 100%; padding: 12px 15px; background-color: var(--input-bg); border: 1px solid var(--input-border); border-radius: 6px; color: var(--text-color); font-family: 'Poppins', sans-serif; font-size: 1em; box-sizing: border-box; transition: border-color 0.3s ease, box-shadow 0.3s ease; }
.form-input:focus, .form-textarea:focus { outline: none; border-color: var(--input-focus-border); box-shadow: 0 0 0 3px rgba(var(--accent-color-primary-rgb, 255,209,102), 0.3); }
.form-textarea { min-height: 100px; resize: vertical; }
.form-input::placeholder, .form-textarea::placeholder { color: rgba(255, 255, 255, 0.5); }
.form-divider { border: 0; height: 1px; background-color: rgba(255,255,255,0.15); margin: 30px 0; }
.form-actions { text-align: right; margin-top: 30px; }

/* Buttons */
.button, button, input[type="submit"], input[type="button"], .add-review-button, .submit-button, .edit-button, .delete-button, .add-button, .list-action-button { padding: 10px 20px; border-radius: 6px; border: none; cursor: pointer; font-family: 'Poppins', sans-serif; font-weight: 600; font-size: 1em; text-decoration: none; display: inline-block; text-align: center; transition: background-color 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease; }
.button:active, button:active, input[type="submit"]:active, input[type="button"]:active { transform: translateY(1px); }

.submit-button, .add-review-button { background-color: var(--accent-color-primary); color: var(--main-button-text); }
.primary-button { background-color: var(--accent-color-primary); color: var(--main-button-text); }
.primary-button:hover { background-color: var(--main-button-hover-bg); box-shadow: 0 4px 15px rgba(var(--accent-color-primary-rgb), 0.3); }

.secondary-button { background-color: var(--accent-color-quaternary); color: white; }
.secondary-button:hover { background-color: #0f7694; box-shadow: 0 4px 15px rgba(var(--accent-color-quaternary-rgb), 0.3); }
.submit-button:hover, .add-review-button:hover { background-color: var(--main-button-hover-bg); box-shadow: 0 4px 15px rgba(var(--accent-color-primary-rgb, 255,209,102), 0.3); }
.edit-button { background-color: var(--accent-color-tertiary); color: var(--main-button-text); }
.edit-button:hover { background-color: #05a984; box-shadow: 0 4px 15px rgba(var(--accent-color-tertiary-rgb, 6,214,160), 0.3); }
.delete-button.danger, .delete-list-button.danger, .remove-button.danger { background-color: var(--danger-color); color: white; }
.delete-button.danger:hover, .delete-list-button.danger:hover, .remove-button.danger:hover { background-color: var(--danger-hover-bg); box-shadow: 0 4px 15px rgba(var(--danger-color-rgb, 217,83,79), 0.3); }
.add-button { background-color: var(--accent-color-quaternary); color: white; margin-top: 10px; }
.add-button:hover { background-color: #0f7694; }
.back-button { display: inline-block; margin-bottom: 2px; color: var(--accent-color-primary); text-decoration: none; font-weight: 400; transition: color 0.2s ease; }
.back-button:hover { color: var(--main-button-hover-bg); }
.add-button, .add-button:hover { width: 100%; box-sizing: border-box; }

/* LIST-FORM: Criteria & Tags */
.criteria-group, .tags-group { border: 1px solid rgba(255,255,255,0.2); padding: 20px; border-radius: 8px; margin-bottom: 20px; }
.criteria-group legend, .tags-group legend { padding: 0 10px; color: var(--accent-color-secondary); font-weight: 600; }
/* --- Estilos para LIST-FORM: Criterios (Actualizado) --- */
.criterion-item {
    display: flex;
    flex-direction: column; /* Para apilar los inputs principales y luego las opciones */
    gap: 15px; /* Espacio entre las secciones internas del criterio */
    background-color: rgba(var(--text-color-rgb, 224, 224, 224), 0.05); /* Fondo muy sutil */
    padding: 15px;
    border: 1px solid var(--border-color-light);
    border-radius: var(--border-radius-medium);
    margin-bottom: 20px; /* Más espacio entre criterios */
}

.criterion-main-input {
    display: flex;
    flex-direction: column; /* Label encima del input */
}
.criterion-main-input label {
    margin-bottom: 5px;
    font-weight: 500; /* Hacer el nombre del criterio un poco más destacado */
}
.criterion-main-input input.criterion-input { /* El input para el nombre/label del criterio */
    width: 100%; /* Ocupar todo el ancho */
}

.criterion-slider-config {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); /* Layout responsive para los campos de config */
    gap: 10px 15px; /* Espacio vertical y horizontal */
    border-top: 1px solid var(--border-color-light);
    border-bottom: 1px solid var(--border-color-light);
    padding: 15px 0;
}
.criterion-slider-config > div { /* Cada cajita de label + input */
    display: flex;
    flex-direction: column;
}
.criterion-slider-config label {
    font-size: 0.85em;
    color: var(--secondary-text-color);
    margin-bottom: 4px;
}
.criterion-input-small, .criterion-input-xtra-small {
    width: 100%; /* Que ocupen el ancho de su celda en el grid */
    font-size: 0.9em; /* Un poco más pequeños */
}

.criterion-options {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 5px;
}
.criterion-main-input, .criterion-slider-config, .criterion-options {
    display: flex;
    flex-wrap: wrap; /* Permitir que los elementos internos se envuelvan */
    gap: 10px; /* Espacio entre elementos internos */
    align-items: center; /* Alinear verticalmente si hay diferentes alturas */
}

.criterion-weighted-label {
    font-size: 0.95em;
    display: flex;
    align-items: center;
    gap: 8px;
}
.criterion-weighted-label input[type="checkbox"] { /* Estilos del checkbox de ponderación */
    width: 16px;
    height: 16px;
    accent-color: var(--accent-color-primary);
}

/* En style.css (puedes añadirlo en la sección de formularios o etiquetas) */

.fixed-tags-group {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 15px;
}
.form-divider-light {
    border: none;
    height: 1px;
    background-color: var(--border-color-light, rgba(255, 255, 255, 0.1));
    margin: 20px 0;
}
.tag-checkbox input[type="checkbox"] {
    display: none; /* Ocultamos el checkbox por defecto */
}
.tag-checkbox span {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 15px;
    background-color: var(--input-bg);
    color: var(--secondary-text-color);
    border-radius: 20px;
    cursor: pointer;
    border: 1px solid var(--border-color-light);
    transition: all 0.2s ease;
}
.tag-checkbox span i {
    opacity: 0.7;
}
/* Estilo cuando el checkbox está seleccionado */
.tag-checkbox input[type="checkbox"]:checked + span {
    background-color: var(--accent-color-primary);
    color: #0A1931; /* Un color oscuro para el texto */
    border-color: var(--accent-color-primary);
    font-weight: 600;
}
.tag-checkbox input[type="checkbox"]:checked + span i {
    opacity: 1;
}

/* Light theme adjustments para criterios */
body.light-theme .criterion-item {
    background-color: rgba(0,0,0,0.02);
    border-color: rgba(0,0,0,0.1);
}
body.light-theme .criterion-slider-config {
    border-top-color: rgba(0,0,0,0.08);
    border-bottom-color: rgba(0,0,0,0.08);
}

.tag-item { display: flex; gap: 10px; align-items: center; margin-bottom: 10px; background-color: rgba(0,0,0,0.1); padding: 10px; border-radius: 5px; }
.tag-item input { flex-grow: 1; }
.remove-button { padding: 5px 10px; font-size: 1.2em; line-height: 1; }

/* REVIEW-FORM: Image Upload */
.image-upload-area { border: 2px dashed var(--input-border); border-radius: 8px; padding: 20px; text-align: center; cursor: pointer; transition: border-color 0.3s ease, background-color 0.3s ease; }
.image-upload-area.drag-over { border-style: solid; border-color: var(--accent-color-primary); background-color: rgba(var(--accent-color-primary-rgb, 255,209,102), 0.05); }
.upload-instructions i { font-size: 3em; color: var(--accent-color-primary); margin-bottom: 10px; }
.upload-instructions p { margin: 5px 0; font-size: 0.9em; }
.file-input-hidden { display: none; }
.image-upload-area .url-input { margin-top: 5px; }
.image-preview img { max-width: 100%; max-height: 200px; margin-top: 15px; border-radius: 6px; border: 1px solid var(--input-border); }
#image-actions button { background-color: var(--accent-color-secondary); color: white; border: none; padding: 8px 12px; margin: 5px; border-radius: 5px; cursor: pointer; font-size: 0.9em; }
#image-actions button:hover { opacity: 0.9; }

/* REVIEW-FORM: Tag Selection (Checkboxes) */
.tag-selection { display: flex; flex-wrap: wrap; gap: 10px; padding-top: 5px; }
.tag-checkbox { background-color: rgba(255,255,255,0.1); padding: 8px 12px; border-radius: 15px; border: 1px solid transparent; cursor: pointer; transition: background-color 0.2s, border-color 0.2s, color 0.2s; font-size: 0.9em; display: inline-flex; align-items: center; color: var(--text-color); }
.tag-checkbox:hover { background-color: rgba(255,255,255,0.2); }
.tag-checkbox input[type="checkbox"] { appearance: none; -webkit-appearance: none; -moz-appearance: none; margin-right: 8px; width: 16px; height: 16px; border: 1px solid var(--input-border); border-radius: 3px; background-color: var(--input-bg); cursor: pointer; position: relative; vertical-align: middle; outline: none; flex-shrink: 0; transition: background-color 0.2s, border-color 0.2s; }
.tag-checkbox input[type="checkbox"]:checked { background-color: var(--accent-color-primary); border-color: var(--accent-color-primary); }
.tag-checkbox input[type="checkbox"]:checked::before { content: '✔'; font-size: 12px; font-weight: bold; color: var(--primary-bg); position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); line-height: 1; }
.tag-checkbox.selected { background-color: var(--accent-color-primary); color: var(--primary-bg); border-color: var(--accent-color-primary); font-weight: 500; }
.tag-checkbox.selected input[type="checkbox"] { border-color: var(--primary-bg); }

/* REVIEW-FORM: Restaurant Suggestions */
.suggestions-box { border: 1px solid var(--input-border); border-top: none; border-radius: 0 0 6px 6px; background-color: var(--primary-bg); max-height: 200px; overflow-y: auto; }
.suggestions-box ul { list-style: none; padding: 0; margin: 0; }
.suggestions-box li { padding: 10px 15px; cursor: pointer; border-bottom: 1px solid var(--input-border); text-align: left; }
.suggestions-box li:last-child { border-bottom: none; }
.suggestions-box li:hover { background-color: var(--input-bg); }
.suggestions-box p { padding: 10px 15px; font-style: italic; opacity: 0.7; }

/* REVIEW-FORM: Botón Obtener Dirección Actual y contenedor de campos manuales */
#get-current-address-btn {
    padding: 8px 12px !important; /* Usar !important con precaución, solo si es necesario para sobrescribir .button */
    font-size: 0.9em !important;
    flex-shrink: 0;
    line-height: 1.2; /* Ajustar para el icono */
}

.input-with-button-beside {
    display: flex;
    gap: 8px;
    align-items: center;
}
.input-with-button-beside .form-input {
    flex-grow: 1;
}
.input-with-button-beside .button { /* El botón al lado */
    flex-shrink: 0;
}

#manual-location-fields {
    display: none; /* Controlado con JS */
    border: 1px solid var(--border-color-light);
    padding: 20px;
    border-radius: var(--border-radius-medium);
    margin-top: 10px;
    background-color: rgba(var(--text-color-rgb, 224, 224, 224), 0.03);
}
#manual-location-fields label { margin-top: 10px; font-size: 0.9em; }
#manual-location-fields input.form-input { margin-bottom: 5px; }

/* Styles for criteria sliders in forms */
.slider-group { margin-bottom: 20px; text-align: left; }
.slider-group label { display: block; margin-bottom: 8px; font-weight: 400; }
.slider-value-display { display: inline-block; min-width: 35px; margin-left: 10px; font-weight: 600; color: var(--accent-color-primary); background-color: rgba(0,0,0,0.2); padding: 3px 8px; border-radius: 4px; font-size: 0.9em; text-align: center; }
.rating-slider { width: 100%; margin: 8px 0; accent-color: var(--accent-color-secondary); cursor: pointer; }
.rating-slider::-webkit-slider-thumb { background: var(--accent-color-secondary); border-radius: 50%; padding:2px; }
.rating-slider::-moz-range-thumb { background: var(--accent-color-secondary); border-radius: 50%; border:none; height: 16px; width: 16px; }
.slider-range-labels { display: flex; justify-content: space-between; font-size: 0.8em; color: rgba(255,255,255,0.6); padding: 0 2px; }

/* LIST-VIEW: Table & Filters */
.list-header-actions { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap:15px; margin-bottom: 3px; } /* Reducido margin-bottom */
.list-header-actions h2 { margin-bottom: 0;margin-top: 40px; text-align: left; }
.list-actions { display: flex; gap: 5px; }
.list-action-button { font-size: 0.9em; padding: 8px 15px; }
.list-action-button i { margin-right: 6px; }

.add-review-button.submit-button{
    width: 100%;
    right: 0;
    margin-left: 20px
}
.search-filter-container { width: 100%; margin-bottom: 10px; display: flex; justify-content: left; }
.search-input { width: 100%; max-width: 400px; padding: 8px 15px; background-color: var(--input-bg); border: 1px solid var(--input-border); border-radius: 6px; color: var(--text-color); font-size: 1em; }
.search-input:focus { outline: none; border-color: var(--input-focus-border); }
.tag-filter-container { margin-bottom: 0px; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }
.tag-filter-button { background-color: rgba(255,255,255,0.1); color: var(--text-color); padding: 3px 15px; border-radius: 20px; font-size: 0.9em; transition: background-color 0.2s, color 0.2s; }
.tag-filter-button:hover { background-color: rgba(255,255,255,0.2); }
.tag-filter-button.selected { background-color: var(--accent-color-secondary); color: white; font-weight: 600; }

.table-container { 
    overflow-x: auto; 
    border-radius: 12px; /* Redondeo para el contenedor */
    overflow: hidden; /* Importante para que el border-radius afecte a la tabla interna */
    /* Sombra y borde para tema oscuro se manejan por defecto, tema claro tiene su propio borde */
    box-shadow: 0 8px 20px rgba(0,0,0,0.15); /* Sombra sutil para ambos temas */
    /* margin-bottom ya está en main > .table-container */
} 

.ranking-table { 
    width: 100%; 
    border-collapse: collapse; 
    table-layout: fixed; /* MUY IMPORTANTE para anchos de columna predecibles */
    font-size: 0.95em; 
    /* margin-bottom: 25px;  Movido a .table-container o main > .table-container */
}

/* Estilos base para th y td (tema oscuro por defecto) */
.ranking-table th, .ranking-table td { 
    padding: 12px 15px; 
    text-align: left; 
    border-bottom: 1px solid rgba(255,255,255,0.1); 
    vertical-align: middle; /* Asegurar alineación vertical */
}
.ranking-table th { 
    background-color: rgba(0,0,0,0.2); 
    font-weight: 600; 
    color: var(--accent-color-primary); 
    white-space: nowrap; /* Evita que el texto de la cabecera se parta, excepto criterios */
}
/* Permitir que las cabeceras de criterios se dividan */
.ranking-table th.score-col {
    white-space: normal;
    hyphens: auto;
}

.ranking-table th.sortable { cursor: pointer; }
.ranking-table th.sortable:hover { background-color: rgba(0,0,0,0.3); }
.ranking-table th.sorted-asc::after { content: " ▲"; font-size: 0.8em; }
.ranking-table th.sorted-desc::after { content: " ▼"; font-size: 0.8em; }

.ranking-row { cursor: pointer; transition: background-color 0.2s ease; }
.ranking-row:hover { background-color: rgba(255,255,255,0.07); } /* Ligero aumento en hover */

/* Redondeo de esquinas de la tabla (solo para la primera y última cabecera) */
/* El redondeo inferior se maneja mejor con el contenedor y overflow:hidden */
.ranking-table th:first-child { border-top-left-radius: 12px; } /* Coincide con .table-container */
.ranking-table th:last-child { border-top-right-radius: 12px; } /* Coincide con .table-container */
.ranking-table tr:last-child td { 
    border-bottom: none; /* No borde inferior para la última fila de datos */
}

/* Definición de anchos y estilos para columnas específicas */
.ranking-row { cursor: pointer; transition: background-color 0.2s ease; }
.ranking-row:hover { background-color: rgba(255,255,255,0.05); }
.ranking-row td { vertical-align: middle; }

/* --- INICIO: Correcciones para tamaño de imagen e icono placeholder --- */
.ranking-table .col-image { /* Clase para la celda <td> */
    width: 60px;  /* Ancho fijo para la celda que contiene la imagen/icono */
    min-width: 60px; /* Evitar que se encoja demasiado */
    height: 60px; /* Alto fijo */
    padding: 5px;   /* Padding alrededor de la imagen/icono */
    text-align: center;
    vertical-align: middle; /* Asegurar que el contenido esté centrado verticalmente */
}
.ranking-table th.col-image { /* Para la cabecera, si es necesario ajustar */
    width: 70px; /* Un poco más para compensar paddings si los tuviera el th */
    min-width: 70px;
}

.ranking-item-image { /* Para las imágenes reales */
    width: 50px;   /* (60px celda - 2*5px padding) */
    height: 50px;  /* (60px celda - 2*5px padding) */
    object-fit: cover; /* Cubre el espacio, puede recortar pero mantiene proporción */
    border-radius: 5px; /* Mismo borde que tenías */
    display: inline-block; /* Ajustado para respetar el padding de la celda */
    border: none; /* Quitar el borde si el contenedor .col-image ya lo simula o no se quiere */
    margin: auto; /* Centrar si es inline-block y la celda es flex */
}

.ranking-item-icon-placeholder { /* Contenedor para el icono Font Awesome */
    width: 50px;   /* (60px celda - 2*5px padding) */
    height: 50px;
    display: inline-flex; /* Ajustado para respetar padding y centrar contenido */
    align-items: center;
    justify-content: center;
    background-color: var(--icon-placeholder-bg, rgba(0,0,0,0.25)); /* Fondo para el icono */
    border-radius: 5px; /* Mismo borde que las imágenes */
    box-sizing: border-box;
    margin: auto;
}
.ranking-item-icon-placeholder i { /* El icono Font Awesome en sí */
    font-size: 1.8em; /* Ajusta el tamaño del icono (ej. 1.5em, 2em) */
    color: var(--icon-placeholder-color, var(--accent-color-primary)); /* Color del icono */
}

/* Limpieza de duplicados que estaban al final de la sección de imagen */
/* .ranking-table .col-image { ... } */ /* Ya definido arriba */
/* .ranking-table td { ... } */ /* Estilos base ya definidos */
/* .ranking-table th { ... } */ /* Estilos base ya definidos */
/* --- FIN: Correcciones para tamaño de imagen e icono placeholder --- */

/* Estilos para columnas específicas */
.ranking-table td {
  vertical-align: middle; /* Alinear el contenido de la celda verticalmente */
  padding: 10px; /* Agregar un poco de espacio entre el contenido y los bordes */
}

.ranking-table th {
  text-align: left; /* Alinear el contenido de la celda horizontalmente */
  padding: 10px; /* Agregar un poco de espacio entre el contenido y los bordes */
}

.ranking-table th.col-element, .ranking-table td.col-element {
    min-width: 180px; /* Un mínimo para que no se comprima demasiado */
    /* width: 30%; /* Opcional, si se prefiere porcentaje */
}
.ranking-table .col-element .restaurant-name,
.ranking-table .col-element .dish-name-sub {
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.3;
}
.ranking-table .col-element .restaurant-name { font-weight: 600; }
.ranking-table .col-element .dish-name-sub { font-size: 0.9em; opacity: 0.8; }
.ranking-table th.score-col, .ranking-table td.score-col { text-align: center; font-weight: 600; width: 80px; }
.ranking-table .col-general .overall-score { font-size: 1.3em; color: var(--accent-color-primary); }
.ranking-table .col-location a { color: var(--accent-color-tertiary); font-size: 1.3em; }
.ranking-table .col-location a:hover { color: #05a984; }
.ranking-table .col-location .location-no-link { color: rgba(255,255,255,0.4); font-size: 1.3em; }
.ranking-table .non-weighted-cell { /* Para estilizar las celdas de criterios no ponderados */
    font-style: italic;
    opacity: 0.7;
    font-size: 0.9em;
}
small.non-weighted-header { /* Para (NP) en cabeceras */
    font-size: 0.8em;
    font-weight: normal;
    opacity: 0.7;
}
/* Para la columna de puntuación general */
.ranking-table th.col-general, .ranking-table td.col-general { 
    width: 100px; text-align: center; 
}


/* DETAIL-VIEW Specifics */
.detail-list-name { font-size: 0.9em; color: rgba(255,255,255,0.7); margin-bottom: 5px; text-align: center; }
#detail-restaurant-name { margin-bottom: 5px; }
.detail-dish-name { font-size: 1.1em; color: var(--accent-color-quinary); margin-bottom: 25px; text-align: center; font-weight: 400; }
.detail-content { display: flex; flex-wrap: wrap; gap: 30px; margin-bottom: 30px; }
.detail-image-area { flex: 1; min-width: 280px; }
.detail-image-area img { width: 100%; max-height: 400px; object-fit: cover; border-radius: 10px; border: 1px solid var(--input-border); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
/* Para el placeholder de icono en detail-view */
.detail-image-icon-placeholder {
    width: 100%;
    height: 300px; /* Ajusta a la altura deseada para el placeholder grande */
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--icon-placeholder-bg, rgba(0,0,0,0.25));
    border-radius: 10px;
    border: 1px solid var(--input-border);
}
.detail-image-icon-placeholder i {
    font-size: 5em; /* Icono más grande para detail-view */
    color: var(--icon-placeholder-color, var(--accent-color-primary));
}


.detail-info-area { flex: 1; min-width: 280px; text-align: left; background-color: rgba(0,0,0,0.15); padding: 20px; border-radius: 8px; }
.detail-overall-score-container { text-align: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); }
.detail-overall-score-container span { display: block; font-size: 1em; opacity: 0.8; }
.detail-overall-score { font-size: 3em; font-weight: 700; color: var(--accent-color-primary); }
.detail-ratings-list { list-style: none; padding: 0; margin: 0 0 20px 0; }
.detail-ratings-list li { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.08); }
.detail-ratings-list li:last-child { border-bottom: none; }
.detail-ratings-list .rating-label { opacity: 0.9; }
.detail-ratings-list .rating-value { font-weight: 600; color: var(--accent-color-secondary); }
small.non-weighted-detail { font-size: 0.85em; opacity: 0.7; font-style: italic; }


#detail-location-container { margin-bottom: 20px; }
.detail-location a, .detail-no-location { display: inline-flex; align-items: center; gap: 8px; color: var(--accent-color-tertiary); text-decoration: none; padding: 8px 12px; background-color: rgba(var(--accent-color-tertiary-rgb, 6,214,160), 0.1); border-radius: 6px; transition: background-color 0.2s; }
.detail-location a:hover { background-color: rgba(var(--accent-color-tertiary-rgb, 6,214,160), 0.2); }
.detail-no-location { color: rgba(255,255,255,0.5); background-color: rgba(255,255,255,0.05); }
.detail-no-location i { opacity: 0.7; }

.detail-comment, .detail-tags-area { margin-bottom: 20px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); }
.detail-comment h4, .detail-tags-area h4 { margin-top: 0; margin-bottom: 10px; color: var(--accent-color-quaternary); font-weight: 600; }
#detail-comment-text { line-height: 1.7; opacity: 0.95; }
#detail-tags { display: flex; flex-wrap: wrap; gap: 8px; }
.tag-detail { background-color: var(--accent-color-secondary); color: white; padding: 5px 10px; border-radius: 15px; font-size: 0.85em; }
.detail-actions { margin-top: 30px; display: flex; justify-content: flex-end; gap: 15px; }

/* Media Queries for smaller screens */
@media (max-width: 768px) {
    .list-header-actions { flex-direction: column; align-items: stretch; }
    .list-header-actions h2 { text-align: left; }
    .list-actions { justify-content: center; }
    .detail-content { flex-direction: column; }
    .criterion-item input[name="criteria_title[]"] { flex-basis: 100%; }
    .criterion-item input[name="criteria_label_left[]"], .criterion-item input[name="criteria_label_right[]"] { flex-basis: calc(50% - 1rem); }
    
    /* Logo adjustments for medium screens */
    .app-logo-container {
        top: 10px;
        left: 10px;
    }
    .app-logo {
        height: 60px; /* Further reduced from 70px */
    }
}

@media (max-width: 480px) {
    h1.brand-title { font-size: 2em; }
    .container h2 { font-size: 1.6em; }
    .button, button, input[type="submit"], .add-review-button, .submit-button, .edit-button, .delete-button, .add-button { width: 30%; margin-bottom: 10px; }
    .form-actions, .detail-actions { display: flex; flex-direction: column; gap:10px; }
    .detail-actions .button, .detail-actions button { margin-bottom: 0; }
    .list-action-button span { display: none; } 
    .list-action-button i { margin-right: 0; }
    #list-circles-ul a { width: 100px; height: 100px; }
    #list-circles-ul a i { font-size: 2em; }
    .criterion-item input[name="criteria_label_left[]"], .criterion-item input[name="criteria_label_right[]"] { flex-basis: 100%; }
    .criterion-item .criterion-weighted-label { width: 100%; margin-left: 0; justify-content: flex-start; margin-top: 0.5rem; padding-left: 0; }
    .criterion-item .remove-button { margin-left: auto; margin-top: 0.5rem; }

    /* Logo adjustments for small screens */
    .app-logo-container {
        top: 8px;
        left: 8px;
    }
    .app-logo {
        height: 50px; /* Further reduced from 55px */
    }
}

/* Added a more specific breakpoint for very small devices if needed, based on previous report structure */
@media (max-width: 360px) {
    .app-logo-container {
        top: 5px;
        left: 5px;
    }
    .app-logo {
        height: 40px; /* Further reduced from 50px */
    }
    /* Other 360px styles from previous responsiveness pass would go here if they existed */
    /* For example, if brand-title size was also adjusted at 360px: */
    /* h1.brand-title { font-size: 2.2em; } */
}


/* --- Tema Claro --- */
body.light-theme {
  /* Variables base del tema claro. Las de :root son para el tema oscuro por defecto. */
  /* Las variables como --background-color, --surface-color, etc., que estaban aquí comentadas */
  /* y no se usaban directamente, se eliminan para mayor claridad. */
  /* Usamos las variables específicas como --primary-bg, --text-color, etc. */

  /* Asegúrate de que los elementos usen estas variables, por ejemplo: */
  /* background-color: var(--background-color); */
  /* color: var(--primary-text-color); */
    --primary-bg: #F0F2F5;                     /* Fondo principal claro, ej. gris muy pálido */
    --container-bg: rgba(255, 255, 255, 0.85);  /* Contenedores blancos o casi blancos, semi-transparentes */
    --text-color: #333740;                     /* Texto principal oscuro */
    --title-color: #1A1D24;                    /* Títulos más oscuros */
    --secondary-text-color: #858585;            /* Texto secundario un poco más oscuro */

    /* Opción 2: Ajustarlos ligeramente (ej. un poco más oscuros/saturados) */
    --accent-color-primary: #EAA600;    /* UPDATED: Was #F5A623. Darker yellow/orange for better contrast on links/icons */
    --accent-color-secondary: #D9405F;  /* Rosa más intenso */
    --accent-color-tertiary: #05B88A;   /* Verde más intenso */
    --accent-color-quaternary: #0E7899; /* Azul más intenso */
    --accent-color-quinary: #FF7A60;    /* Salmón más intenso */

    --footer-bg: rgba(220, 223, 228, 0.7); /* Footer gris claro semi-transparente */
    --footer-text-color: #555B66;          /* Texto del footer gris medio */

    --input-bg: #FFFFFF;                   /* Fondo de inputs blanco */
    --input-border: #B0B8C0;               /* Borde de inputs gris medio, más visible */
    --input-focus-border: var(--accent-color-primary); /* Mantenemos el acento para el foco */
    --main-button-text: #333740;           /* Texto oscuro para acento amarillo/naranja */
    --main-button-hover-bg: #D49100;       /* UPDATED: Was #EAA600. Darker to complement new --accent-color-primary */
    --danger-color: #D9534F;               /* Se puede mantener el mismo rojo */
    --danger-hover-bg: #C9302C;            /* Y su hover */
    
    --icon-placeholder-bg: rgba(0, 0, 0, 0.06); /* Fondo muy sutil para placeholders de iconos */
    --icon-placeholder-color: var(--accent-color-primary); /* Color del icono placeholder */

    --primary-bg-rgb-values: 240, 242, 245; /* Para el color claro #F0F2F5 */
    --header-gradient-opacity-bottom: 0.65;
    --header-gradient-opacity-top: 0.1;
    --header-noise-opacity: 0.04;
}

/* Ajustes específicos para tema claro */
body.light-theme .form-input::placeholder, 
body.light-theme .form-textarea::placeholder, 
body.light-theme .search-input::placeholder {
    color: #8892A0; /* Placeholder gris un poco más oscuro */
}

/* UPDATED: Specific styles for list circles in light theme for better icon contrast */
body.light-theme #list-circles-ul a {
    background-color: rgba(0,0,0,0.04); 
    border: 1px solid rgba(0,0,0,0.08);
}
body.light-theme #list-circles-ul a:hover {
    background-color: rgba(0,0,0,0.07);
    border-color: rgba(0,0,0,0.12);
}
/* Icon color will use the updated --accent-color-primary for light theme */
body.light-theme #manual-location-fields {
    background-color: rgba(0,0,0,0.01);
    border-color: rgba(0,0,0,0.08);
}



body.light-theme .tag-filter-button {
    background-color: #E9EDF0; /* Fondo gris más claro */
    color: var(--text-color);  /* Texto oscuro (ya definido en variable) */
    border: 1px solid #CCD1D6; /* Borde sutil pero visible */
}
body.light-theme .tag-filter-button:hover {
    background-color: #DDE1E5; /* Gris un poco más oscuro al pasar el ratón */
    border-color: #BCC1C6;
}
body.light-theme .tag-filter-button.selected {
    background-color: var(--accent-color-secondary); /* Usa el acento secundario del tema claro */
    color: #FFFFFF; /* Texto blanco para contraste */
    border-color: var(--accent-color-secondary);
}

body.light-theme .table-container {
    border: 1px solid var(--input-border); /* Borde consistente con inputs */
    box-shadow: 0 4px 15px rgba(0,0,0,0.08); /* Sombra más sutil para tema claro */
}
body.light-theme .ranking-table th {
    background-color: #E9ECEF; /* Fondo de cabecera muy claro */
    color: var(--title-color); /* Texto de cabecera oscuro */
    border-bottom: 1px solid #D4DAE0; /* Borde inferior más definido */
}
body.light-theme .ranking-table td {
    border-bottom: 1px solid #E1E6EB; /* Borde de celdas más claro pero visible */
}
body.light-theme .ranking-row:hover {
    background-color: rgba(0,0,0,0.03); /* Hover muy sutil en tema claro */
}

/* UPDATED: Edit button text color for light theme */
body.light-theme .edit-button {
    color: #FFFFFF; /* White text for better contrast on green background */
}
body.light-theme .edit-button:hover {
    color: #FFFFFF; /* Ensure hover state also has white text */
}


/* --- Estilos para el botón de cambio de tema --- */
.theme-toggle-button {
  position: relative;
  /*top: 15px;
  right: 15px;
  background-color: var(--container-bg); /* Usa el color de fondo de los contenedores del tema actual */
  /* position: fixed, top, right, y z-index se eliminan para permitir que este botón
     sea un elemento flex dentro de .header-actions-container.
     Su estilo visual principal debería provenir de .header-action-button si se usan juntos. */
    background-color: var(--container-bg); /* Estas propiedades podrían ser redundantes si .header-action-button siempre está aplicado */
  color: var(--text-color); /* Usa el color de texto del tema actual */
  border: 1px solid var(--input-border); /* Usa el color de borde de input del tema actual */
  border-radius: 50%;
  width: 45px;
  height: 45px;
  display: flex; /* Asegura que flexbox esté aplicado */
  align-items: center; /* Centra verticalmente el icono */
  justify-content: center; /* Centra horizontalmente el icono */
  font-size: 1.2em; /* Ajusta el tamaño base para el icono si es necesario */
  padding: 0; /* Elimina padding si interfiere con el centrado del icono */
  /*z-index: 1001;*/
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
}

.theme-toggle-button:hover {
  background-color: var(--accent-color-primary); /* Usa el color de acento primario del tema actual */
  color: var(--main-button-text); /* Usa el color de texto de botón principal del tema actual */
  border-color: var(--accent-color-primary); /* Usa el color de acento primario del tema actual */
  transform: translateY(-1px);
}

.theme-toggle-button i {
  line-height: 1; /* Ayuda a centrar verticalmente el icono de FontAwesome */
  display: flex; /* Para asegurar que el icono se comporte como un bloque flexible */
  align-items: center;
  justify-content: center;
}

/* Media Queries Adicionales para tablas */
@media (max-width: 768px) {
    .ranking-table {
        font-size: 0.9em; /* Reducir un poco la fuente */
    }
    .ranking-table th, .ranking-table td {
        padding: 10px 8px; /* Reducir padding */
    }
    .ranking-table th.col-image, .ranking-table td.col-image {
        width: 55px; 
        min-width: 55px;
    }
    .ranking-item-image, .ranking-item-icon-placeholder {
        width: 40px; 
        height: 40px;
    }
    .ranking-item-icon-placeholder i { font-size: 1.5em; }
    .ranking-table th.score-col, .ranking-table td.score-col { width: 65px; }
    .ranking-table th.col-general, .ranking-table td.col-general { width: 85px; }
}

@media (max-width: 600px) {
    .ranking-table th.col-location, .ranking-table td.col-location {
        display: none; /* Ocultar columna de ubicación en pantallas muy pequeñas */
    }
    .ranking-table {
        font-size: 0.85em; /* Reducir aún más la fuente */
    }
     .ranking-table th, .ranking-table td {
        padding: 8px 6px; /* Reducir más padding */
    }
}

/* --- Estilos para Grouped Detail View (grouped-detail-view.html) --- */
.grouped-detail-header {
    text-align: center;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--input-border);
}
.grouped-detail-header h2 {
    font-size: clamp(1.8em, 5vw, 2.5em); 
    color: var(--title-color);
    margin-bottom: 5px;
}
.grouped-detail-header #list-name-subheader {
    font-size: 1em;
    color: var(--secondary-text-color);
    margin-top: 0;
}

.group-summary-section, .group-images-section, .individual-reviews-section {
    margin-bottom: 30px;
}

.group-summary-section.card, .group-images-section.card {
    padding: 20px;
    text-align: left; /* Sobrescribir el text-align:center del .container si es necesario */
}
.group-summary-section h3, .group-images-section h3, .individual-reviews-section h3 {
    margin-top: 0;
    margin-bottom: 15px;
    color: var(--accent-color-secondary); 
    border-bottom: 2px solid var(--accent-color-primary);
    padding-bottom: 8px;
    text-align: left;
}

.summary-score .score-value, .summary-count .count-value {
    font-weight: bold;
    font-size: 1.2em;
    color: var(--accent-color-tertiary); 
}

.image-gallery-placeholder {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}
.gallery-thumbnail {
    width: 100px;
    height: 100px;
    object-fit: cover;
    border-radius: 8px;
    border: 2px solid var(--input-border);
    transition: transform 0.2s ease;
}
.gallery-thumbnail:hover {
    transform: scale(1.05);
    border-color: var(--accent-color-primary);
}

.review-card {
    background-color: var(--container-bg); /* O var(--surface-color) si lo tienes */
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    text-align: left;
}
.review-card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; border-bottom: 1px dashed var(--input-border); padding-bottom: 8px;}
.review-card-header h4 { margin: 0; font-size: 1.1em; }
.review-card-score strong { font-size: 1.2em; color: var(--accent-color-primary); } 
.review-card-body { display: flex; gap: 15px; margin-bottom: 10px; }
.review-card-image-container { flex-basis: 120px; flex-shrink: 0; }
.review-card-image { width: 100%; height: auto; max-height: 120px; object-fit: cover; border-radius: 6px; }
.review-card-no-image { width: 120px; height: 120px; background-color: var(--icon-placeholder-bg); display: flex; align-items: center; justify-content: center; border-radius: 6px; font-size: 2em; color: var(--icon-placeholder-color); }
.review-card-details { flex-grow: 1; }
.review-card-details ul { list-style: none; padding: 0; margin: 0; font-size: 0.9em; }
.review-card-details ul li { margin-bottom: 4px; }
.review-card-comment-section { margin-bottom: 10px; font-size: 0.95em; }
.review-card-comment-empty { opacity: 0.7; font-style: italic; }
.review-card-actions { text-align: right; margin-top: 10px; }
.review-card-actions .button-link { font-size: 0.9em; padding: 6px 12px; }

body.light-theme .review-card {
    background-color: #FFFFFF;
    box-shadow: 0 2px 8px rgba(0,0,0,0.07);
}

/* Footer (already defined earlier, ensuring it's consistent) */
/* The footer style from lines 183-184 was very basic. */
/* The more complete footer style (similar to what I provided before) is now integrated near the top. */
/* This section can be removed if the footer style at the top is now the definitive one. */
/* For now, I'll assume the earlier, more complete footer definition is active. */

body.light-theme footer {
    border-top: 1px solid #D1D5DB; /* Borde para tema claro */
} 

/* --- Animations --- */
@keyframes fadeInUpScale { from { opacity: 0; transform: translateY(20px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }


.search-button {
      /* position: fixed;  <-- Eliminado para que dependa del contenedor */
  /* top: 15px;        <-- Eliminado */
  /* Theme toggle button is at right: 15px, width: 45px. Add 10px gap. */
  /* 15px (theme-toggle offset) + 45px (theme-toggle width) + 10px (gap) = 70px */
  /* right: 70px;      <-- Eliminado */
  position: relative; 
  background-color: var(--container-bg);
  color: var(--text-color);
  border: 1px solid var(--input-border);
  border-radius: 50%;
  width: 45px;
  height: 45px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.3em; /* Icon size */
  padding: 0;
  /* z-index: 1001;  <-- Manejado por .user-profile-menu-container y .user-menu */
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  cursor: pointer;
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
}

  .search-button:hover {
    background-color: var(--accent-color-primary); /* Usa el color de acento primario del tema actual */
    color: var(--main-button-text); /* Usa el color de texto de botón principal del tema actual */
    border-color: var(--accent-color-primary); /* Usa el color de acento primario del tema actual */
    transform: translateY(-1px);
  }
  
  .search-button i {
    line-height: 1; /* Ayuda a centrar verticalmente el icono de FontAwesome */
    display: flex; /* Para asegurar que el icono se comporte como un bloque flexible */
    align-items: center;
    justify-content: center;
  }

/* NUEVO: Contenedor para el menú de perfil */
.user-profile-menu-container {
    position: fixed;
    top: 15px;
    /* Theme toggle button is at right: 15px, width: 45px. Add 10px gap. */
    /* 15px (theme-toggle offset) + 45px (theme-toggle width) + 10px (gap) = 70px */
    right: 70px; 
    z-index: 1002; /* Por encima del botón de tema, pero debajo del menú desplegable */
  }


/* --- User Profile Menu --- */
.user-profile-button {
  /* position: fixed;  <-- Eliminado para que dependa del contenedor */
  /* top: 15px;        <-- Eliminado */
  /* Theme toggle button is at right: 15px, width: 45px. Add 10px gap. */
  /* 15px (theme-toggle offset) + 45px (theme-toggle width) + 10px (gap) = 70px */
  /* right: 70px;      <-- Eliminado */
  position: relative; /* Para el posicionamiento absoluto del menú hijo */
  background-color: var(--container-bg);
  color: var(--text-color);
  border: 1px solid var(--input-border);
  border-radius: 50%;
  width: 45px;
  height: 45px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.3em; /* Icon size */
  padding: 0;
  /* z-index: 1001;  <-- Manejado por .user-profile-menu-container y .user-menu */
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  cursor: pointer;
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
}

.user-profile-button:hover {
  background-color: var(--accent-color-primary);
  color: var(--main-button-text);
  border-color: var(--accent-color-primary);
  transform: translateY(-1px);
}

.user-profile-button i {
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

.user-menu {
  position: absolute;
  top: calc(100% + 8px); /* Below the button with a small gap */
  right: 0;
  background-color: var(--container-bg); /* Consistente con el botón y otros contenedores */
  border: 1px solid var(--input-border);
  border-radius: 8px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.25);
  min-width: 200px;
  z-index: 1003; /* Above user button and theme button */
  padding: 8px 0;
  display: none; /* Hidden by default, toggled by JS */
  flex-direction: column; /* If using display:flex for .is-active */
}

.user-menu.is-active {
  display: flex; /* Or display: block; */
}

.user-menu a, .user-menu button { /* Assuming links or buttons for menu items */
  display: block;
  padding: 10px 20px;
  color: var(--text-color);
  text-decoration: none;
  font-size: 0.95em;
  background-color: transparent;
  border: none;
  width: 100%;
  text-align: left;
  cursor: pointer;
  transition: background-color 0.2s ease, color 0.2s ease;
  box-sizing: border-box; /* Ensure padding is included in the 100% width */
}
.user-menu a:hover, .user-menu button:hover {
  background-color: rgba(var(--accent-color-primary-rgb), 0.15);
  color: var(--accent-color-primary);
}

.user-menu-divider {
  height: 1px;
  margin: 8px 0;
  background-color: var(--input-border);
  border: 0;
}

/* Light theme adjustments for User Profile Menu */
body.light-theme .user-profile-button {
  background-color: #FFFFFF;
  color: var(--text-color);
  border-color: var(--input-border);
}
body.light-theme .user-profile-button:hover {
  background-color: var(--accent-color-primary);
  color: var(--main-button-text); /* Ensure this var is appropriate for light theme accent */
  border-color: var(--accent-color-primary);
}

body.light-theme .user-menu {
  background-color: #FFFFFF; /* Lighter background for dropdown in light mode */
  border-color: #D1D5DB; /* Consistent light theme border */
  box-shadow: 0 8px 20px rgba(0,0,0,0.1);
}
body.light-theme .user-menu a, 
body.light-theme .user-menu button {
  color: var(--text-color);
}
body.light-theme .user-menu a:hover,
body.light-theme .user-menu button:hover {
  background-color: #f0f0f0; /* Light grey hover for items */
  color: var(--accent-color-primary);
}
body.light-theme .user-menu-divider {
  background-color: #E5E7EB; /* Lighter divider for light theme */
}
/* La llave de cierre extra que estaba aquí ha sido eliminada. */


/* --- Header Action Buttons (Search, User Profile, Theme Toggle) --- */
.header-actions-container { /* Este es tu contenedor principal del header fijo */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    padding: 0 20px; 
    /* background-color: rgba(var(--primary-bg-rgb, 10, 25, 49), 0.3); Fondo translúcido    z-index: 1005; Ya lo tienes alto */
    display: flex;
    justify-content: space-between; /* CLAVE: para separar izquierda y derecha */
    align-items: center;
    height: 80px; /* O la altura que definiste */
    box-sizing: border-box;
    z-index: 1005; /* Asegúrate de que sea suficientemente alto */
    /* Capa base: Gradiente de transparencia progresiva */
    /* Va desde más opaco abajo (usando el color de fondo primario del tema) 
       hasta casi transparente arriba. */
       background-image: linear-gradient(
        to top, /* De abajo hacia arriba */
        rgba(var(--primary-bg-rgb-values), 0), /* Color y opacidad en la parte inferior */
        rgba(var(--primary-bg-rgb-values), 1)     /* Color y opacidad en la parte superior */
        /* Si quieres que la parte superior sea completamente transparente, puedes usar:
           transparent
           en lugar de la segunda rgba()
        */
    );
    background-size: 100% 100%; /* Asegura que el gradiente cubra todo el contenedor */
    background-repeat: no-repeat;
    
    /* Necesario para posicionar correctamente el pseudo-elemento del granulado */
    /* position: relative;  */
}

/* Capa de efecto granulado (superpuesta al gradiente) */
.header-actions-container::before {
    /* ... (content, position, width, height, pointer-events como antes) ... */
    background-image: url('/path/to/your/noise.png');
    background-repeat: repeat; /* Para que la imagen se repita y cubra el área */
    opacity: var(--header-noise-opacity); 
}

.header-left-content {
    display: flex;
    align-items: center;
    gap: 12px; /* Espacio entre el logo y el texto dinámico */
    overflow: hidden; /* Para ayudar a contener el texto si se vuelve muy largo */
}

.header-dynamic-page-info {
    display: flex; /* Para alinear los spans si es necesario, aunque con white-space: nowrap es menos crítico */
    align-items: baseline; /* Alinea el texto por la base */
    color: var(--title-color); /* Color base del texto */
    font-family: 'Poppins', serif; /* La fuente que te gusta */
    font-weight: 600; /* El grosor que te gusta */
    font-size: 2em; /* Ajusta este tamaño. Un h2 suele ser más grande (2.2em+), 
                         pero para el header quizás quieras algo más comedido. 
                         Prueba con valores entre 1.2em y 1.8em. */
    letter-spacing: 0.5px; /* Un poco de espaciado si quieres */
    text-shadow: 1px 1px 3px rgba(0,0,0,0.15); /* Sombra más sutil para header */

    white-space: nowrap; /* Para que no se parta en varias líneas */
    overflow: hidden;    /* Oculta el texto que no quepa */
    text-overflow: ellipsis; /* Muestra "..." si el texto es muy largo */
    flex-shrink: 1; /* Permitir que se encoja si es necesario */
    min-width: 0;   /* Ayuda a flex-shrink con overflow */
    /* max-width: calc(100vw - 300px);  Un max-width puede ser útil para evitar que 
                                      empuje a los iconos de la derecha. 
                                      Este valor es un ejemplo, ajústalo. */                                
}

#page-category-name {
    color: var(--accent-color-primary); /* La categoría en color de acento */
    /* Puedes añadir un margin-right si quieres más espacio antes del separador */
}

#page-list-name-separator {
    margin: 5px;
    font-size: 0.25em; /* Pequeño espacio alrededor del guion */
}

#page-list-name {
    color: var(--title-color); /* El nombre de la lista con el color de título normal */
}

.header-right-actions {
    display: flex;
    align-items: center;
    gap: 9px; /* Espacio entre los botones de acción */
}

/* En style.css */

/* Estilo general para los botones de acción del header, incluyendo los que son enlaces */
.header-action-button, 
a.header-action-button { /* Importante añadir 'a.header-action-button' */
    background-color: var(--container-bg);
    color: var(--text-color); /* Para el color del icono */
    border: 1px solid var(--input-border);
    border-radius: 45%;
    width: 45px;
    height: 45px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2em; /* Tamaño del icono */
    padding: 0;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    cursor: pointer;
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
    box-sizing: border-box;
    flex-shrink: 0;
    
    text-decoration: none; /* CLAVE: Quita el subrayado de los enlaces */
}



/* Hover state */
.header-action-button:hover,
a.header-action-button:hover {
    background-color: var(--accent-color-primary);
    color: var(--main-button-text); /* Asegura que el icono cambie de color */
    border-color: var(--accent-color-primary);
    transform: translateY(-1px);
    text-decoration: none; /* Mantener sin subrayado en hover */
}

.header-action-button, a.header-action-button i {
    line-height: 1;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Specific adjustments if .user-profile-button needs to retain its original class for JS */
/* but also adopt .header-action-button styles */
.user-profile-button.header-action-button {
    /* It will inherit all .header-action-button styles */
    /* No specific overrides needed unless its behavior must differ */
}

/* Adjust .user-profile-menu-container as it's now a flex item */
.user-profile-menu-container {
    position: relative; /* Was fixed, now relative to the flex container */
    top: auto;          /* Reset fixed positioning */
    right: auto;        /* Reset fixed positioning */
    z-index: auto;      /* Reset z-index or manage within header-actions-container */
    /* display: flex;      Removed: Let parent flex container handle alignment of this block */
    /* align-items: center; Removed: Button inside has fixed size, should align correctly */
    box-sizing: border-box; /* Ensure padding/border don't affect final size unexpectedly */
    flex-shrink: 0; /* Also prevent this container from shrinking */
    /* Purpose of this container is to be a positioned anchor for the absolute .user-menu */
    /* and a flex item in .header-actions-container. Its size will be that of its child button. */
}
/* The .user-profile-button itself is now styled by .header-action-button */
/* The .user-menu dropdown positioning might need adjustment if it was based on fixed parent */
.user-menu {
    /* top: calc(100% + 8px); /* This should still work if .user-profile-menu-container is relative */
    /* right: 0; */ /* This should still work */
}


/* Light theme adjustments for new buttons/container */
body.light-theme .header-action-button {
  background-color: #FFFFFF;
  color: var(--text-color); /* Uses light theme text color */
  border-color: var(--input-border); /* Uses light theme input border */
}
body.light-theme .header-action-button:hover, 
a.header-action-button:hover {
  background-color: var(--accent-color-primary); /* Uses light theme accent */
  /* Ensure main-button-text for light theme is set correctly for light theme accent bg */
  color: var(--main-button-text); 
  border-color: var(--accent-color-primary);
}

/* Responsive adjustments for header actions container */
@media (max-width: 768px) {
    .header-actions-container {
        height: var(--header-height); /* Usa la variable */
        top: 0px;
        right: 10px;
        gap: 8px;
    }
    .header-action-button, a.header-action-button {
        width: 40px;
        height: 40px;
        font-size: 1.1em;
    }
    .search-button, .user-profile-button, .theme-toggle-button {
        top: 8px;
    }
} 

@media (max-width: 480px) {
    .header-actions-container {
        height: 50px;
        top: 0px; /* Adjusted from 8px */
        right: 0px; /* Adjusted from 8px */
        gap: 3px; /* Remains 5px, seems appropriate */
    }
    .header-action-button, a.header-action-button {
        width: 30px; /* Adjusted from 38px */
        height: 30px; /* Adjusted from 38px */
        font-size: 0.95em; /* Adjusted from 1em for icons */
    }
    .search-button {
        margin-bottom: 10px;
    }
}

@media (max-width: 360px) {
    .header-actions-container {
        gap: 4px; /* Further reduce gap */
        /* top: 5px; right: 5px; already set by 480px, can be kept or overridden if needed */
    }
    .header-action-button, a.header-action-button {
        width: 32px; /* Further reduce size */
        height: 32px; /* Further reduce size */
        font-size: 0.85em; /* Further reduce icon size */
    }
}


/* --- Estilos para la página de perfil (profile.html) --- */
/* Estilos para el encabezado fijo de la página de perfil */
.page-header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    background-color: var(--container-bg);
    border-bottom: 1px solid var(--border-color);
    box-shadow: var(--shadow-elevation-low);
    z-index: 1000; /* Debe estar por debajo de .header-actions-container y modales */
    box-sizing: border-box;
}
.page-header h1 {
    margin: 0;
    font-size: 1.5em;
    color: var(--text-color);
}

.profile-container {
    max-width: 800px;
    margin: 20px auto; /* Margen superior ajustado ya que body tiene padding-top */
    padding: 20px; /* Padding interno del contenedor del perfil */
}

.user-info-card { /* Reemplaza al antiguo .profile-header */
    text-align: center;
    margin-bottom: 40px;
    padding: 20px;
    background: var(--container-bg);
    border-radius: 10px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

#profile-photo-display { /* Para la imagen de perfil clickeable */
    width: 120px;
    height: 120px;
    margin: 0 auto 20px;
    border-radius: 50%;
    overflow: hidden;
    object-fit: cover;
    border: 3px solid var(--border-color);
    background-color: var(--input-bg); /* Fondo mientras carga o si no hay imagen */
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}
#profile-photo-display:hover {
    transform: scale(1.05);
    box-shadow: 0 0 15px rgba(var(--accent-color-primary-rgb), 0.5);
}

#profile-display-name { /* Ya existía, se mantiene y ajusta si es necesario */
    margin: 10px 0 5px;
    color: var(--title-color);
    font-size: 1.8em;
    font-family: var(--brand-font);
    font-weight: 600;
}

#profile-username-display {
    color: var(--accent-color-primary);
    font-size: 1.1em;
    margin-bottom: 15px;
}

#profile-bio-display {
    color: var(--secondary-text-color);
    margin-bottom: 15px;
    white-space: pre-wrap; /* Para respetar saltos de línea en la bio */
    font-size: 0.95em;
    line-height: 1.5;
}

#profile-email-display { /* Ya existía, se mantiene */
    font-size: 0.9em;
    color: var(--secondary-text-color);
    margin-bottom: 20px;
}

.edit-profile-button { /* Para el botón "Editar Perfil" */
    margin-top: 15px;
}

.profile-item-list { /* Para #my-lists-ul y #my-reviews-ul */
    list-style: none;
    padding: 0;
    margin: 0;
}

.profile-list li {
    padding: 12px 15px;
    margin-bottom: 10px;
    background: rgba(var(--accent-color-primary-rgb), 0.05);
    border-radius: 6px;
    transition: background-color 0.2s;
}
.profile-list li:hover {
    background: rgba(var(--accent-color-primary-rgb), 0.1);
}
.profile-list li a {
    color: var(--text-color);
    text-decoration: none;
    font-weight: 500;
}
.profile-list li a:hover {
    color: var(--accent-color-primary);
}

/* Profile Stats Section */
.profile-stats {
    display: flex;
    justify-content: space-around;
    background-color: var(--container-bg-secondary);
    padding: 20px;
    border-radius: var(--border-radius-medium);
    margin-bottom: 30px;
    box-shadow: var(--shadow-elevation-low);
}
.stat-item {
    text-align: center;
    cursor: pointer;
    padding: 5px 10px;
    border-radius: var(--border-radius-small);
    transition: background-color 0.2s ease;
}
.stat-item:hover {
    background-color: rgba(var(--accent-color-primary-rgb), 0.1);
}
.stat-item .count {
    font-size: 1.8em;
    font-weight: bold;
    display: block;
    color: var(--text-color);
}
.stat-item .label {
    font-size: 0.9em;
    color: var(--secondary-text-color);
}

/* Profile Sections (Mis Listas, Mis Reseñas) */
.profile-section { /* Ya existía, se adapta */
    background: var(--container-bg-secondary);
    border-radius: var(--border-radius-medium);
    padding: 20px;
    margin-bottom: 30px;
    box-shadow: var(--shadow-elevation-low);
}
.profile-section h3 { /* Ya existía, se adapta */
    color: var(--accent-color-secondary); /* Cambiado de primary a secondary para variedad */
    font-size: 1.4em;
    margin-top: 0;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--border-color);
}

/* Modal Styles */
.modal {
    display: none; /* Hidden by default */
    position: fixed;
    z-index: 1050; /* Above header actions */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.7); /* Semi-transparent black overlay */
    align-items: center;
    justify-content: center;
}
.modal.active {
    display: flex; /* Use flex to center content */
}
.modal-content {
    background-color: var(--container-bg);
    margin: auto;
    padding: 25px;
    border-radius: var(--border-radius-large);
    box-shadow: var(--shadow-elevation-high);
    width: 90%;
    max-width: 500px; /* Default max-width */
    position: relative;
    animation: fadeInUpScale 0.3s ease-out forwards;
}
.modal-content.photo-modal-content {
    max-width: 600px;
    text-align: center;
}
.close-button {
    color: var(--secondary-text-color);
    position: absolute;
    top: 10px;
    right: 20px;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.2s ease;
}
.close-button:hover, .close-button:focus {
    color: var(--text-color);
}

/* Save button specific to modals, if different from global .button or .submit-button */
.save-button { /* This class was used in profile.html modals */
    /* Inherits from .button, or define specific styles here */
    /* Example: if it needs to be distinct from .submit-button */
    background-color: var(--accent-color-tertiary); /* Default green */
    color: var(--primary-bg); /* Dark text on light green */
}
.save-button:disabled {
    background-color: var(--disabled-bg);
    color: var(--disabled-text-color) !important; /* Ensure override */
    opacity: 0.7;
    cursor: not-allowed;
}
.save-button.has-changes {
    background-color: var(--accent-color-primary); /* Yellow when changes pending */
    color: var(--main-button-text); /* Dark text on yellow */
}

#enlarged-profile-photo {
    max-width: 100%;
    max-height: 70vh; /* Limit height */
    border-radius: var(--border-radius-medium);
    margin-bottom: 15px;
    border: 2px solid var(--border-color);
}
#photo-edit-controls {
    margin-top: 20px;
    padding: 15px;
    background-color: rgba(0,0,0,0.1);
    border-radius: var(--border-radius-small);
}
#photo-edit-controls .form-group {
    margin-bottom: 15px;
}
#photo-edit-controls input[type="file"],
#photo-edit-controls input[type="url"] {
    margin-bottom: 10px;
}


/* Ajustes responsivos */
@media (max-width: 768px) {
    .profile-container {
        padding: 15px;
        padding-top: 90px;
        margin-top: 0; /* Body padding-top handles space for fixed header */
    }
    .user-info-card {
        padding: 15px;
    }
    .profile-picture {
        width: 100px;
        height: 100px;
    }
    
    .profile-picture i {
        font-size: 60px;
    }
    .modal-content {
        padding: 20px;
    }
}

@media (max-width: 480px) {
    #profile-display-name {
        font-size: 1.5em;
    }
    .user-info-card {
        margin-bottom: 25px;
    }
    .profile-stats { margin-bottom: 25px; flex-direction: column; gap: 15px; }
    .profile-section {
        padding: 15px;
    }
}

/* --- User Profile Page Styles --- */
#profile-picture-placeholder {
    /* This ID might be from an older version or a different approach. */
    /* The current profile.html uses #profile-photo-display directly. */
    /* If #profile-picture-placeholder is still used as a container, style it here. */
    /* For now, assuming #profile-photo-display is the primary element. */
    text-align: center;
}
#profile-picture-placeholder .fa-user-circle { /* Default icon if no image */
    font-size: 100px; /* Adjust as needed */
    color: var(--accent-color-primary);
    line-height: 1; /* Ensure it aligns well if it's the only thing */
}


/* #profile-display-name and #profile-email styles are now part of .user-info-card section */

/* #profile-my-lists and #profile-my-reviews are now styled by .profile-section */
/* The specific ul and li styles are covered by .profile-item-list */


#profile-my-lists, #profile-my-reviews {
    margin-bottom: 35px;
    padding: 20px;
    background-color: rgba(0,0,0,0.1); /* Subtle background for sections */
    border-radius: 8px;
    text-align: left; /* Align section content to left */
}
#profile-my-lists h3, #profile-my-reviews h3 {
    /* These are now styled by .profile-section h3 */
}



#my-reviews-container .review-item-placeholder { /* Example class for styling individual reviews later */
    padding: 10px;
    margin-bottom:10px;
    background-color: rgba(255,255,255,0.05);
    border-radius: 5px;
}


/* Light theme adjustments for profile page sections */
body.light-theme #profile-photo-display {
    border-color: var(--input-border); /* Uses light theme input border */
}

/* --- Profile Page Specific Container Width --- */
.profile-page-container {
    max-width: 1100px !important; /* Increased from default 900px for .container. Using !important to ensure override if needed. */
}
/* End Profile Page Specific Container Width */


/* Style for dynamically created profile image */
.profile-image-dynamic {
    width: 120px; /* Matches existing #profile-picture-placeholder img style */
    height: 120px;
    border-radius: 50%;
    border: 3px solid var(--input-border);
    object-fit: cover;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    display: block; /* Or inline-block if preferred for layout */
    margin: 0 auto 20px auto; /* Centering if it's a block */
}


body.light-theme .user-info-card,
body.light-theme .profile-stats,
body.light-theme .profile-section {
    background-color: rgba(0,0,0,0.03); /* Very light background for sections */
    border: 1px solid var(--input-border);
}
body.light-theme .profile-section h3 {
    border-bottom: 1px solid var(--input-border); /* Uses light theme input border */
}
body.light-theme .profile-list li {
    border-bottom: 1px solid rgba(var(--accent-color-primary-rgb), 0.2); /* Slightly more visible in light */
    background-color: rgba(0,0,0,0.02);
}
body.light-theme .profile-list li:hover {
    background-color: rgba(0,0,0,0.05);
}
body.light-theme .profile-list li a {
    color: var(--text-color); /* Uses light theme text color */
}
body.light-theme .profile-list li a:hover {
    color: var(--accent-color-primary); /* Uses light theme accent */
}

/* Profile Message Area */
#profile-message-area {
    margin-top: 15px;
    padding: 12px 15px;
    border-radius: var(--border-radius-small);
    font-weight: 500;
    text-align: center;
    line-height: 1.4;
    display: none; /* Oculto por defecto, JS lo muestra */
    font-size: 0.9em;
}
#profile-message-area.success { background-color: rgba(var(--accent-color-tertiary-rgb), 0.15); color: var(--accent-color-tertiary); border: 1px solid var(--accent-color-tertiary); }
#profile-message-area.error { background-color: rgba(var(--danger-color-rgb), 0.15); color: var(--danger-color); border: 1px solid var(--danger-color); }



body.light-theme .modal-content {
    background-color: var(--primary-bg); /* Light theme page background */
    border: 1px solid var(--input-border);
}
body.light-theme .save-button {
    background-color: var(--accent-color-tertiary);
    color: white; /* Text on green */
}
body.light-theme .save-button.has-changes {
    background-color: var(--accent-color-primary);
    color: var(--main-button-text); /* Dark text on yellow */
}
body.light-theme #photo-edit-controls {
    background-color: rgba(0,0,0,0.05);
}

/* Estilos para listas y reseñas en el perfil */
.profile-list-item, .profile-review-item {
    background-color: var(--container-bg); /* Un fondo sutil */
    padding: 15px;
    margin-bottom: 12px;
    border-radius: var(--border-radius-medium);
    border: 1px solid var(--border-color-light);
    transition: box-shadow 0.2s ease, transform 0.2s ease;
}
.profile-list-item:hover, .profile-review-item:hover {
    box-shadow: var(--shadow-elevation-low);
    transform: translateY(-2px);
}

.profile-list-item a, .profile-review-item a {
    text-decoration: none;
    color: var(--text-color);
    display: block;
}

.profile-list-item-name, .profile-review-item-title {
    font-size: 1.1em;
    font-weight: 600;
    color: var(--accent-color-primary);
    margin-bottom: 8px;
    display: block;
}

.profile-list-item-meta, .profile-review-item-meta {
    font-size: 0.85em;
    color: var(--secondary-text-color);
    display: flex;
    flex-wrap: wrap;
    gap: 15px; /* Espacio entre meta items */
}
.profile-list-item-meta span, .profile-review-item-meta span {
    display: inline-flex;
    align-items: center;
}
.profile-list-item-meta i, .profile-review-item-meta i {
    margin-right: 6px;
    color: var(--accent-color-secondary);
}

.profile-review-item-main {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}
.profile-review-rating {
    font-weight: bold;
    color: var(--accent-color-tertiary);
    font-size: 1em;
}
.profile-review-rating .fa-star {
    color: var(--accent-color-primary); /* O el color que prefieras para la estrella */
    font-size: 0.9em;
}

/* Placeholder y errores en listas/reseñas del perfil */
.loading-placeholder, .error-placeholder {
    color: var(--secondary-text-color);
    font-style: italic;
    padding: 10px 0;
}
.error-placeholder {
    color: var(--danger-color);
}

.review-author-info {
    text-align: center;
    margin-top: -15px; /* Para acercarlo un poco al título del plato si quieres */
    margin-bottom: 20px;
    font-size: 0.9em;
    color: var(--secondary-text-color); /* O el color que prefieras */
}

.review-author-info strong {
    color: var(--text-color); /* O un color de acento */
    font-weight: 600;
}



/* En style.css */

.search-page-container h1.brand-title {
    font-size: clamp(2.5em, 7vw, 3.5em); /* Un poco más pequeño que el de index */
    margin-bottom: 25px;
}

.search-input-area {
    display: flex;
    gap: 10px;
    margin-bottom: 25px;
}

.large-search-input {
    padding: 15px 20px; /* Más grande */
    font-size: 1.1em;
    flex-grow: 1;
    width: 100%;
}

.search-input-area .submit-button {
    flex-shrink: 0; /* Para que el botón no se encoja */
    padding: 15px 25px;
}

.entity-type-filters {
    margin-bottom: 20px;
    text-align: center; /* Centrar los botones de tipo */
}
.entity-type-filters p {
    margin-bottom: 10px;
    font-weight: 500;
}
.entity-type-btn { /* Hereda de .tag-filter-button pero podemos especializar */
    margin: 0 5px 10px 5px; /* Espacio alrededor */
    /* Estilos para 'active' se pueden manejar con la clase .selected que ya tienes para .tag-filter-button */
}
.entity-type-btn.active { /* O usa .selected si reutilizas esa clase */
    background-color: var(--accent-color-primary);
    color: var(--main-button-text);
    border: 1px solid var(--accent-color-primary);
}


.advanced-filters-trigger {
    text-align: center;
    margin-bottom: 30px;
}

.search-results-container {
    margin-top: 20px;
    /* Aquí irán los estilos para las tarjetas de resultados */
}
.search-placeholder {
    color: var(--secondary-text-color);
    font-style: italic;
    padding: 20px;
    text-align: center;
}

/* Estilos para el modal de filtros (ya tienes estilos base para .modal y .modal-content) */
#advanced-filters-content .form-group {
    margin-bottom: 15px;
}
#advanced-filters-content label {
    font-size: 0.95em;
}
#advanced-filters-content .form-input, 
#advanced-filters-content select { /* Si usas select para categorías o insignias */
    font-size: 0.95em;
}



/* --- Estilos para Tarjetas de Resultado de Búsqueda --- */

.search-results-container {
    text-align: left; /* Para que las tarjetas se alineen a la izquierda */
    margin-top: 0px;
}

.search-card {
    display: flex;
    align-items: center;
    gap: 15px;
    background-color: var(--container-bg-secondary, rgba(23, 38, 63, 0.85));
    padding: 8px;
    padding-left: 15px;
    border-radius: var(--border-radius-medium, 8px);
    margin-bottom: 2px;
    text-decoration: none;
    color: var(--text-color);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    border: 1px solid var(--border-color-light, rgba(255, 255, 255, 0.1));
}

.search-card:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-elevation-medium, 0 6px 12px rgba(0,0,0,0.2));
}

.search-card__icon-container {
    flex-shrink: 0;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgba(var(--accent-color-primary-rgb), 0.1);
    border-radius: 50%;
    font-size: 1.2em;
    color: var(--accent-color-primary);
}

.search-card__icon-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
}

.search-card__content {
    flex-grow: 1;
    overflow: hidden; /* Para manejar textos largos */
}

.search-card__title {
    margin: 0 0 8px 0;
    font-size: 1.1em;
    font-weight: 600;
    color: var(--title-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.search-card__tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.info-tag {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background-color: var(--input-bg, rgba(0, 0, 0, 0.35));
    padding: 4px 10px;
    border-radius: 20px; /* Estilo "píldora" */
    font-size: 0.8em;
    font-weight: 500;
    line-height: 1.4;
    color: var(--secondary-text-color, rgba(224, 224, 224, 0.7));
}

.info-tag i {
    opacity: 0.8;
}

/* Modificadores de color para cada tipo de etiqueta */
.info-tag--list {
    background-color: rgba(var(--accent-color-secondary-rgb), 0.15);
    color: var(--accent-color-secondary);
}

.info-tag--user {
    background-color: rgba(var(--accent-color-tertiary-rgb), 0.15);
    color: var(--accent-color-tertiary);
}

.info-tag--place {
    background-color: rgba(var(--accent-color-quaternary-rgb), 0.15);
    color: var(--accent-color-quaternary);
}

.info-tag--item {
    background-color: rgba(var(--accent-color-quinary-rgb), 0.15);
    color: var(--accent-color-quinary);
}